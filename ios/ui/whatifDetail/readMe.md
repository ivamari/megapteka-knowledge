# Описание и назначение экрана
Экран «Что делать, если?» предназначен для предоставления пользователю пошаговых инструкций и рекомендаций по действиям в различных неотложных ситуациях, связанных со здоровьем (например, аллергическая реакция на вакцину). Экран помогает быстро сориентироваться, что делать, какие препараты можно использовать, когда обращаться к врачу и как снизить риск повторения проблемы.

# Общая иерархия экрана
Экран построен на базе UIViewController с использованием UITableView. Тематические секции экрана формируются на сервере и передаются через API. Все секции по умолчанию развернуты, пользователь может свернуть или развернуть любую секцию по нажатию на её заголовок.

Верхняя панель содержит заголовок и кнопку «Поделиться». Основная область — список секций с заголовками и контентом (текстовые блоки и чек-листы). Внизу экрана отображается стандартная навигационная панель приложения.

---

## 1. Верхняя панель
### 1.1. Назначение и элементы
- **Заголовок экрана** — отображает название раздела («Что делать, если?»). Не изменяется при скролле.
- **Кнопка "Назад"** — возвращает пользователя на предыдущий экран.
- **Кнопка "Поделиться"** — отображается только если для темы задан текст для шаринга. При нажатии открывает системное меню для отправки текста.
- **Кнопка "Поделиться" может быть скрыта** — если нет текста для шаринга.

---

## 2. Основная область (основной контент)
Экран реализован на базе UITableView. Содержит несколько секций:

### 2.1. Секции и их элементы (в порядке отображения)
- **Секция 1: Название темы**
  - Отображается в виде отдельного заголовка (большой шрифт, без раскрывающегося содержимого).
  - Не содержит строк, только заголовок.
  - Не взаимодействует с пользователем.

- **Секции 2: Тематические блоки**
  - Каждая секция содержит:
    - **Заголовок секции** (с иконкой и стрелкой раскрытия/сворачивания)
      - По умолчанию секция развернута. При нажатии на заголовок секция сворачивается или разворачивается обратно (анимированно).
      - В свернутом состоянии содержимое секции скрыто.
      - В раскрытом состоянии отображаются все блоки секции.
      - Заголовок может содержать иконку (слева), текст и стрелку (справа), фон — выделен цветом.
    - **Содержимое секции** (отображается только в раскрытом состоянии):
      - **Текстовые блоки** — многострочный текст, может содержать HTML-разметку.
      - **Чек-листы (marked items)** — строка с иконкой галочки и текстом.
      - Порядок блоков соответствует порядку в данных.
      - Каждый блок занимает отдельную строку.
      - Нет дополнительных кнопок или вложенных элементов.

#### Примеры тематических блоков

- Краткое описание ситуации
- Первичные действия
- Рекомендации по образу жизни и питанию
- Допустимые безрецептурные препараты
- Когда необходимо обратиться к врачу
- Как избежать повторения проблемы
- Заключение

---

## 3. Всплывающие и дополнительные элементы
- **Алерты** — могут появляться поверх экрана при ошибках загрузки или других событиях (например, проблемы с сетью). Содержат текст ошибки и кнопки для повторного действия или отмены.
- **Системное меню "Поделиться"** — появляется при нажатии на кнопку «Поделиться» в верхней панели, если оно доступно.

---

## 4. Нижняя навигационная панель
- Стандартная навигационная панель приложения с кнопками перехода: «Главный», «Каталог», «Корзина», «Избранное», «Меню».
- Переход между разделами осуществляется по нажатию на соответствующую иконку.

---

## 5. Схематичное дерево иерархии экрана
```
Экран «Что делать, если?»
├── Верхняя панель
│   ├── Заголовок экрана
│   ├── Кнопка "Назад"
│   └── Кнопка "Поделиться" (отображается при наличии текста для шаринга)
├── Основная область (UITableView)
│   ├── Секция: Название темы
│   │   └── Заголовок темы
│   ├── Секция: [Название тематического блока 1]
│   │   ├── Заголовок секции (с иконкой, фоном, стрелкой)
│   │   └── [Блоки секции: текстовые, чек-листы]
│   ├── Секция: [Название тематического блока 2]
│   │   ├── Заголовок секции (с иконкой, фоном, стрелкой)
│   │   └── [Блоки секции: текстовые, чек-листы]
│   └── ...
├── Всплывающие элементы
│   ├── Алерты (ошибки, предупреждения)
│   └── Системное меню "Поделиться"
└── Нижняя навигационная панель
    ├── Главный
    ├── Каталог
    ├── Корзина
    ├── Избранное
    └── Меню
```