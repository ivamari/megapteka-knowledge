# Описание и назначение экрана

Экран "Что нового?" предназначен для информирования пользователя о новых возможностях, функциях и изменениях в приложении. Здесь пользователь может ознакомиться с краткими описаниями новых фич, просмотреть подробности по каждой из них, а также перейти к детальному описанию, если заинтересовался.

---

# Общая иерархия экрана

Экран реализован на основе UIViewController (`FeaturesVC`), основной контент представлен в виде UICollectionView с кастомными ячейками (`FeatureView`). Верхняя панель содержит заголовок и кнопку закрытия (крестик). В нижней части экрана отображается стандартная навигационная панель приложения.

---

## 1. Верхняя панель

### 1.1. Назначение и элементы

- **Заголовок экрана** (`navigationItem.title`, текст: "Что нового?")  
  Отображается в верхней части экрана, сообщает пользователю, что он находится на экране новых функций.
- **Кнопка закрытия** (UIButton, иконка "крестик")  
  Находится в правом верхнем углу. При нажатии закрывает экран и возвращает пользователя на предыдущий экран.

---

## 2. Основная область (основной контент)

### 2.1. Коллекция новых функций

- **UICollectionView** (`collectionView` в FeaturesVC)
  - Отображает список новых функций в виде карточек.
  - Использует кастомную ячейку `FeatureView` (xib: FeatureView.xib).
  - Поддерживает pull-to-refresh (обновление списка при свайпе вниз).
  - Поддерживает пагинацию: при прокрутке к концу списка автоматически загружаются следующие элементы.

#### Структура карточки новой функции (`FeatureView`):

- **Контейнер карточки** (`TapScaleView`)
  - Реализует визуальный эффект нажатия (scale).
  - Округлённые углы, цвет фона — разделитель ячеек.
- **Фоновое изображение** (`ViAlignedImageView`)
  - Отображает изображение, связанное с функцией.
  - Контент-мод: scaleAspectFill, занимает всю площадь карточки.
- **Градиентный оверлей** (`GradientView`)
  - Затемняет нижнюю часть изображения для лучшей читаемости текста.
- **Заголовок функции** (`UILabel`, labelTitle)
  - Крупный белый текст, располагается в верхней части карточки.
- **Подзаголовок/описание** (`UILabel`, labelSubtitle)
  - Мелкий белый текст, располагается под заголовком.
- **Визуальный индикатор прочитанности**
  - Прозрачность карточки меняется в зависимости от того, была ли функция просмотрена пользователем (alpha = 1 для просмотренных, 0.5 для новых).

#### Взаимодействие пользователя:

- **Тап по карточке**
  - Открывает детальное описание функции (через `openFeatureDetail`).
  - Детальное описание реализовано через ViDynamicStories (отдельный модуль, открывается модально).
- **Свайп вниз по коллекции**
  - Обновляет список новых функций (pull-to-refresh).
- **Прокрутка вниз**
  - При достижении конца списка автоматически подгружаются новые элементы (пагинация).

---

## 3. Всплывающие и дополнительные элементы

- **Модальное окно детального описания функции** (`ViDynamicStories`)
  - Открывается при нажатии на карточку.
  - Содержит подробную информацию, слайды, изображения и т.д.
  - После закрытия модального окна обновляется состояние карточки (становится "прочитанной").

- **Алерты и индикаторы загрузки**
  - При ошибках отображается алерт с описанием проблемы.
  - При загрузке данных отображается индикатор загрузки (либо стандартный UIRefreshControl, либо кастомный LoadIndicatorService).

---

## 4. Нижняя навигационная панель

- **TabBarController** (стандартная навигация приложения)
  - Кнопки: Главный, Каталог, Корзина, Избранное, Меню.
  - Позволяет быстро переходить между основными разделами приложения.

---

## 5. Схематичное дерево иерархии экрана

```
Экран "Что нового?" (FeaturesVC)
├── Верхняя панель (UINavigationBar)
│   ├── Заголовок ("Что нового?")
│   └── Кнопка закрытия (UIButton)
├── Основная область (UIView)
│   └── Коллекция новых функций (UICollectionView)
│       └── Карточка функции (FeatureView)
│           ├── Контейнер (TapScaleView)
│           │   ├── Фоновое изображение (ViAlignedImageView)
│           │   ├── Градиентный оверлей (GradientView)
│           │   ├── Заголовок (UILabel)
│           │   └── Подзаголовок (UILabel)
│           └── [Визуальный индикатор прочитанности]
├── Всплывающие элементы
│   ├── Модальное окно детального описания (ViDynamicStories)
│   └── Алерты/индикаторы загрузки
└── Нижняя навигационная панель (UITabBar)
    ├── Главный
    ├── Каталог
    ├── Корзина
    ├── Избранное
    └── Меню
```

---

## [Нужно дополнить]

- Не хватает информации о точных названиях и классах для кнопки закрытия (крестик) и её обработчика.
- Не хватает информации о структуре и содержимом модального окна детального описания функции (ViDynamicStories), так как оно реализовано в отдельном модуле.
- Не указаны точные идентификаторы и стили для элементов TabBar, так как они не определяются в данном экране.
- Не описаны возможные состояния ошибок и их визуализация, кроме стандартного алерта.

--- 