# Описание и назначение экрана

Экран предназначен для создания нового или редактирования существующего отзыва на товар. Пользователь может выставить оценку, написать текст отзыва, указать имя, добавить фотографию, а также должен согласиться с обработкой персональных данных для отправки отзыва. Экран используется в сценариях взаимодействия с товарами, предоставляя обратную связь другим пользователям и магазину.

# Общая иерархия экрана

Экран построен на базе UIViewController с использованием UIScrollView и UIStackView для вертикального размещения контента. Основные области: верхняя панель (заголовок и кнопка назад), основная область с заголовком секции, карточкой товара, формой отзыва, блоком добавления фото, чекбоксом согласия, нижняя область с кнопкой отправки и предупреждением. Внизу всегда отображается системная навигационная панель приложения.

---

## 1. Верхняя панель
### 1.1. Назначение и элементы
- **Заголовок экрана** — текст "Оценить товар".
- **Кнопка назад** — стандартная кнопка возврата в UINavigationBar (отображается автоматически системой).

---

## 2. Основная область (основной контент)

Вся основная область размещена внутри UIScrollView, что обеспечивает прокрутку при необходимости.

### 2.1. Секции и их элементы

#### Секция 1: Заголовок области
- **Заголовок секции** (UILabel)
  - Текст: "Отзыв о товаре" (при создании нового отзыва) или "Редактирование отзыва" (при редактировании).
  - Расположен первым элементом в основной области, визуально отделяет форму отзыва от заголовка экрана.

#### Секция 2: Карточка товара
- **Карточка товара** (TapScaleView)
  - **Изображение товара** (ItemImageView)
  - **Название товара** (ViLabel)
  - **Бренд товара** (ViLabel)
  - **Рейтинг (звёзды)** (ViCosmosView) — интерактивный элемент, позволяет выбрать оценку от 1 до 5. При нажатии обновляет модель отзыва.
  - **Взаимодействие:** нажатие на карточку открывает подробную информацию о товаре.

#### Секция 3: Форма отзыва
- **Поле "Имя"** (TextField)
  - Отображается только при создании нового отзыва (скрыто при редактировании).
  - Позволяет ввести или изменить имя пользователя.
- **Поле "Текст отзыва"** (ViTextView)
  - Многострочное поле для ввода текста отзыва.
  - Показывает плейсхолдер, если поле пустое.
  - При редактировании отзыва поле заполняется существующим текстом.

#### Секция 4: Блок добавления фото
- **Блок добавления фото** (PhotoAttachmentView)
  - Отображается только при создании нового отзыва (скрыто при редактировании).
  - Позволяет добавить одну фотографию к отзыву (через камеру или галерею).
  - После добавления фото появляется миниатюра и кнопка удаления.
  - Взаимодействие: нажатие на область — открытие выбора фото; нажатие на крестик — удаление фото.

#### Секция 5: Чекбокс согласия
- **Чекбокс согласия на обработку персональных данных** (RichCheckBox)
  - Необходимо отметить для возможности отправки отзыва.
  - Содержит текст с ссылкой на политику конфиденциальности (открывается по нажатию).
  - Если чекбокс не отмечен, кнопка отправки скрыта, а ниже появляется предупреждение.

---

## 3. Всплывающие и дополнительные элементы
- **Алерт об успешной отправке**
  - Всплывающее окно с закруглёнными углами, центрировано на экране.
  - **Заголовок:** "Спасибо за отзыв" (жирный, центрированный).
  - **Текст:** "Мы ценим, что вы делитесь своим опытом использования товаров с другими пользователями Мегаптеки" (обычный, центрированный, несколько строк).
  - **Кнопка:** "Закрыть" (красная, центрирована, выделена, закрывает алерт по нажатию).
  - Алерт появляется после успешной отправки отзыва и блокирует взаимодействие с остальным интерфейсом до закрытия.
- **Алерт об ошибке** — появляется при ошибке отправки, содержит текст ошибки и кнопку закрытия.
- **Ворнинг (Label)** — появляется в нижней части экрана, если чекбокс не отмечен: "Необходимо принять условия соглашения, чтобы продолжить".
- **Модальное окно выбора фото** — появляется при добавлении фото, позволяет выбрать источник (камера или галерея).

---

## 4. Нижняя навигационная панель
- **TabBar приложения** — отображается всегда, содержит кнопки перехода: Главный, Каталог, Корзина, Избранное, Меню.
- **Переходы между разделами** осуществляются стандартным способом через TabBar.

---

## 5. Схематичное дерево иерархии экрана
```
Экран "Оценить товар"
├── Верхняя панель
│   ├── Заголовок экрана
│   └── Кнопка назад
├── Основная область (UIScrollView)
│   ├── Заголовок секции ("Отзыв о товаре" / "Редактирование отзыва")
│   ├── Карточка товара (TapScaleView)
│   │   ├── Изображение товара (ItemImageView)
│   │   ├── Название товара (ViLabel)
│   │   ├── Бренд товара (ViLabel)
│   │   └── Рейтинг (ViCosmosView)
│   ├── Форма отзыва
│   │   ├── Поле "Имя" (TextField) [только при создании]
│   │   └── Поле "Текст отзыва" (ViTextView)
│   ├── Блок добавления фото (PhotoAttachmentView) [только при создании]
│   ├── Чекбокс согласия (RichCheckBox)
│   └── Ворнинг (Label) [если чекбокс не отмечен]
├── Нижняя область
│   └── Кнопка "Готово" (UIButton)
└── Нижняя навигационная панель (TabBar)
    ├── Главный
    ├── Каталог
    ├── Корзина
    ├── Избранное
    └── Меню
```

---

## [Нужно дополнить]
- Не хватает информации о точных названиях и классах элементов нижней навигационной панели (TabBar), так как они реализованы вне данного экрана.
- Не хватает информации о поведении экрана при ошибках загрузки изображения или при отсутствии интернета.
- Не описаны возможные дополнительные состояния, связанные с загрузкой (например, индикатор загрузки при отправке отзыва), если они реализованы неявно. 