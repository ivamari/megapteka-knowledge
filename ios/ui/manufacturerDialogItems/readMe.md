# Вопрос производителю (ManufacturerDialogItemsVC)

## Описание и назначение экрана
Экран предназначен для того, чтобы пользователь мог задать вопрос производителю конкретного товара напрямую. Вся переписка с представителем бренда остаётся конфиденциальной, а ответ на вопрос пользователь получает в разделе "Меню > Чат с производителями". Основная задача — выбор товара для обращения и переход к диалогу с производителем.

## Общая иерархия экрана
Экран реализован на базе `UIViewController` (`ManufacturerDialogItemsVC`) с использованием `UITableView` для отображения секций и списка товаров. Разметка построена через секции с кастомными header и cell.

---

## 1. Верхняя панель
### 1.1. Назначение и элементы
- **Заголовок** (navigationItem.title, строка): "Вопрос производителю"
  - Отображается всегда.
- **Кнопка "Назад"** (стандартная кнопка UINavigationBar)
  - Возвращает на предыдущий экран.

---

## 2. Основная область (основной контент)
Основная область реализована через `UITableView` с двумя секциями:

### 2.1. Секция 1: Информационный блок (Section.info, header: ManufacturerDialogItemsHeaderView)
- **Описание**: Информирует пользователя о назначении экрана и правилах обращения.
- **Состав**:
  - **Текстовое поле с описанием** (`DescriptionTextView`)
    - Содержит HTML-текст с возможностью клика по ссылкам (например, "Меню > Чат с производителями").
    - При нажатии на ссылку происходит переход на соответствующий экран (вызывается метод openLink()).
  - **Панель поиска товара** (`SearchPanelView`)
    - Скрыта, если не передана строка поиска (entity == nil).
    - Состав панели:
      - **Текстовое поле поиска** (`PaddedTextField`)
        - Позволяет вводить название товара для фильтрации списка.
        - При изменении текста вызывается обновление списка товаров (onSearchTextChanged()).
      - **Кнопка голосового ввода** (`ExtendedHitButton`)
        - Реализует функцию голосового поиска: при нажатии активируется распознавание речи для ввода поискового запроса.
      - **Кнопка сканирования** (`ExtendedHitButton`)
        - Кнопка отображается, но функция сканирования не реализована и не используется.

### 2.2. Секция 2: Список товаров (Section.items, cell: ManufacturerDialogItemView)
- **Описание**: Список товаров, по которым можно задать вопрос производителю.
- **Состав**:
  - **Ячейка товара** (`ManufacturerDialogItemView`)
    - **Изображение товара** (`UIImageView`)
    - **Название товара** (`UILabel`)
    - **Название бренда** (`UILabel`)
    - **Разделители сверху и снизу** (`UIView`)
      - Нижний разделитель отображается только для последней ячейки.
  - **Пользовательское взаимодействие**:
    - Тап по ячейке открывает экран диалога с производителем по выбранному товару (`ManufacturerDialogDetailVC`).
  - **Пагинация**:
    - При прокрутке к концу списка автоматически подгружаются следующие товары (реализовано через ViData.Table.Paging.Adapter).

---

## 3. Всплывающие и дополнительные элементы
- **Алерты** (`AlertModel`)
  - Используются для отображения ошибок загрузки или других важных сообщений.
  - Отображаются поверх основного контента.

---

## 4. Нижняя навигационная панель
- **TabBar** (UITabBarController)
  - Кнопки: Главный, Каталог, Корзина, Избранное, Меню
  - Переход между разделами приложения.

---

## 5. Открываемые экраны при взаимодействии с элементами
- **Ссылка "Меню > Чат с производителями"** (в DescriptionTextView)
  - Открывает: Экран списка чатов с производителями (`ManufacturerDialogListVC`)
- **Ячейка товара**
  - Открывает: Экран диалога с производителем по товару (`ManufacturerDialogDetailVC`)

---

## 6. Схематичное дерево иерархии экрана
```
Экран "Вопрос производителю" (ManufacturerDialogItemsVC)
├── Верхняя панель (UINavigationBar)
│   ├── Заголовок: "Вопрос производителю"
│   └── Кнопка "Назад"
├── Основная область (UITableView)
│   ├── Секция 1: Информационный блок (ManufacturerDialogItemsHeaderView)
│   │   ├── Текстовое поле с описанием (DescriptionTextView)
│   │   └── Панель поиска товара (SearchPanelView)
│   │       ├── Текстовое поле поиска (PaddedTextField)
│   │       ├── Кнопка голосового ввода (ExtendedHitButton)
│   │       └── Кнопка сканирования (ExtendedHitButton, функция не реализована)
│   └── Секция 2: Список товаров
│       └── Ячейка товара (ManufacturerDialogItemView)
│           ├── Изображение товара (UIImageView)
│           ├── Название товара (UILabel)
│           ├── Название бренда (UILabel)
│           ├── Разделитель сверху (UIView)
│           └── Разделитель снизу (UIView, только для последней ячейки)
├── Всплывающие элементы
│   └── Алерты (AlertModel)
└── Нижняя навигационная панель (UITabBarController)
    ├── Главный
    ├── Каталог
    ├── Корзина
    ├── Избранное
    └── Меню
```

---

## [Нужно дополнить]
- Не хватает информации о возможных дополнительных состояниях экрана (например, пустой список, ошибки загрузки, лоадеры).
- Не описаны возможные состояния кнопок и их доступность. 