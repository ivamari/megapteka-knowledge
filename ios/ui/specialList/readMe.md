# Экран «Мегасоветы» (SpecialListVC)

## Описание и назначение экрана

Экран предназначен для просмотра, поиска и управления списком мегасоветов. Пользователь может просматривать все мегасоветы, добавлять их в избранное, фильтровать по избранным, искать по названию, а также переходить к подробной информации о каждом мегасовете. Экран поддерживает различные состояния: пустой список, отображение результатов, отсутствие результатов поиска.

## Общая иерархия экрана

Экран реализован на основе UIViewController (`SpecialListVC`) с использованием UITableView для отображения списка мегасоветов и дополнительных секций (например, промпт/заглушка). Верхняя панель реализована через UINavigationBar, нижняя навигация — через UITabBarController.

---

## 1. Верхняя панель (UINavigationBar)

### 1.1. Назначение и элементы

- **Заголовок** (`navigationItem.title`, текст: "Мегасоветы")
  - Отображается всегда, кроме режима поиска.
- **Кнопка поиска** (`searchButton`, UIBarButtonItem с иконкой лупы)
  - Открывает строку поиска.
  - При активном поиске заменяется на кнопку "Отмена".
- **Строка поиска** (`searchBar`, UISearchBar, обёрнутый в ContainerView)
  - Появляется при активации поиска.
  - Позволяет вводить поисковый запрос.
  - Кнопка "Отмена" закрывает поиск и сбрасывает фильтр.

---

## 2. Основная область (UITableView)

### 2.1. Секции и их элементы

#### Секция: Сегментированный контрол (ViSegmentedControl<SpecialsSegmentItem> внутри ContainerView)

- **Назначение:** Переключение между "Все мегасоветы" и "Избранные".
- **Элементы:** Две кнопки-сегмента ("Все мегасоветы", "Избранные").
- **Взаимодействие:** Переключение сегмента фильтрует список.
- **Особенности:** Сегментированный контрол закреплён в верхней части экрана, реализован через кастомный ContainerView.

#### Секция: Список мегасоветов (UITableView, секция .specials, ячейка SpecialView)

- **Назначение:** Отображение карточек мегасоветов.
- **Элементы карточки (SpecialView):**
  - **Изображение** (`imageViewIcon`, UIImageView) — сверху, с соотношением сторон 2:1.
  - **Заголовок** (`labelTitle`, UILabel) — под изображением, жирный шрифт.
  - **Краткое описание** (`labelShortTitle`, UILabel) — под заголовком.
  - **Кнопка "Подробнее"** (`buttonMore`, UIButton) — снизу слева, неактивна для пользователя.
  - **Кнопка "Избранное"** (`buttonFavorite`, SpecialFavoriteButton) — справа от заголовка, в виде иконки сердца.
- **Взаимодействие:**
  - Тап по карточке — открывает подробную информацию о мегасовете.
  - Тап по иконке "Избранное" — добавляет/удаляет из избранного.
- **Особенности:** Карточки имеют скруглённые углы и тень, реализованы через кастомный TapScaleView.

#### Секция: Промпт/заглушка (FlexiblePromptView, секция .prompt)

- **Назначение:** Отображение различных состояний:
  - Пустой список избранного (с иконкой единорога и текстом).
  - Нет результатов поиска (с иконкой единорога и текстом).
  - Ошибка загрузки (если есть).
- **Элементы:** Картинка, заголовок, описание, кнопка действия (например, "К мегасоветам").
- **Взаимодействие:** Кнопка действия может переключать сегмент или сбрасывать фильтры.
- **Особенности:** Показывается только при соответствующем состоянии (нет данных, ошибка, нет результатов поиска).

---

## 3. Всплывающие и дополнительные элементы

- **Алерты** (`displayAlert`) — отображаются при ошибках или важных событиях.
- **Индикатор загрузки** (`displayLoadIndicator`) — появляется при загрузке данных.
- **Pull-to-refresh** — обновление списка при свайпе вниз.

---

## 4. Нижняя навигационная панель (UITabBar)

- **Кнопки:** Главный, Каталог, Корзина, Избранное, Меню.
- **Взаимодействие:** Переход между основными разделами приложения.
- **Особенности:** Подсвечивается активная вкладка.

---

## 5. Схематичное дерево иерархии экрана

```
Экран "Мегасоветы" (SpecialListVC)
├── Верхняя панель (UINavigationBar)
│   ├── Заголовок ("Мегасоветы")
│   ├── Кнопка поиска (searchButton)
│   ├── Строка поиска (searchBar, появляется при поиске)
│   └── Кнопка "Отмена" (cancelButton, появляется при поиске)
├── Основная область (UIView)
│   ├── Сегментированный контрол (ViSegmentedControl<SpecialsSegmentItem> в ContainerView)
│   └── Таблица (UITableView)
│       ├── Секция: Список мегасоветов (.specials)
│       │   └── Ячейка: Карточка мегасовета (SpecialView)
│       │       ├── Изображение (imageViewIcon)
│       │       ├── Заголовок (labelTitle)
│       │       ├── Краткое описание (labelShortTitle)
│       │       ├── Кнопка "Подробнее" (buttonMore)
│       │       └── Кнопка "Избранное" (buttonFavorite)
│       └── Секция: Промпт/заглушка (.prompt)
│           └── Гибкий промпт (FlexiblePromptView)
│               ├── Картинка
│               ├── Заголовок
│               ├── Описание
│               └── Кнопка действия (например, "К мегасоветам")
├── Всплывающие элементы
│   ├── Алерты (AlertModel)
│   └── Индикатор загрузки (LoadIndicatorService)
└── Нижняя навигационная панель (UITabBar)
    ├── Главный
    ├── Каталог
    ├── Корзина
    ├── Избранное
    └── Меню
```

---

## [Нужно дополнить]

- Не хватает информации о внутренней структуре FlexiblePromptView (какие именно классы используются для картинки, текста и кнопки).
- Не хватает точных названий классов для элементов нижней панели (UITabBar).
- Не описаны возможные состояния ошибок (текст, иконки) — требуется уточнение в коде FlexiblePromptView.
- Не описаны переходы на экран подробностей мегасовета (SpecialsDetailVC) — требуется изучить SpecialsDetailRouter и связанные классы.

--- 