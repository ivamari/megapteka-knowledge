# Экран поиска аптек по адресу/улице/метро (StoresSearchVC)

## Описание и назначение экрана
Экран предназначен для поиска адреса по названию улицы, станции метро или адресу дома. Пользователь может ввести запрос, выбрать подходящий вариант из предложенных подсказок или увидеть сообщение о пустом результате. Экран помогает найти адрес для дальнейшей фильтрации аптек рядом с выбранным адресом.

## Общая иерархия экрана
Экран реализован на базе UIViewController (`StoresSearchVC`) с использованием UITableView для отображения подсказок и дополнительных сообщений. Верхняя панель содержит поисковую строку и кнопку отмены. Основная область — таблица с секциями для подсказок и информационных сообщений. В нижней части — дополнительная подсказка.

---

## 1. Верхняя панель
### 1.1. Назначение и элементы
- **Поисковая строка (UISearchBar, searchBar)**
  - Позволяет вводить название улицы, станции метро или адреса дома.
  - Автоматически получает фокус при первом появлении экрана.
  - Слева иконка поиска, справа кнопка очистки ввода.
  - Ввод текста обновляет список подсказок с задержкой (0.3 сек).
  - Кнопка "Идти" на клавиатуре отправляет запрос без задержки.
- **Кнопка "Отмена" (UIButton, cancelButton)**
  - Справа от поисковой строки.
  - При нажатии закрывает экран поиска.

---

## 2. Основная область (основной контент)
Основная область реализована через UITableView (`tableView`) с двумя секциями:

### 2.1. Секции и их элементы
- **Секция подсказок (Section.suggestions, StoresSearchSuggestionView)**
  - Отображает список подсказок по введённому запросу.
  - Каждая подсказка — отдельная ячейка (`StoresSearchSuggestionView`):
    - **Иконка (UIImageView, imageViewIcon)** — слева, отображает тип подсказки (метро, улица и т.д.).
    - **Текст подсказки (UILabel, labelTitle)** — основное название (например, "Рядом с метро Первомайская", "Вдоль ул Ленина").
    - **Разделитель (UIView, viewSeparator)** — тонкая линия снизу.
  - Взаимодействие: нажатие на ячейку выбирает подсказку, закрывает экран и передаёт выбранный вариант делегату.
  - Особенности:
    - Список может быть пустым — тогда секция скрыта.
    - Подсказки могут быть разного типа (метро, улица, адрес дома и др.), что влияет на иконку.

- **Секция информационного сообщения (Section.prompt, FlexiblePromptView)**
  - Показывается, если нет подходящих подсказок или результат поиска пустой.
  - Содержит кастомный вид с иконкой и текстом:
    - **Иконка (например, единорог с вопросом)** — отображается только при пустом результате поиска.
    - **Текст сообщения** — поясняет, что ничего не найдено, и предлагает проверить запрос или попробовать другой адрес.
  - Особенности:
    - Сообщение появляется только при пустом результате поиска.
    - В других случаях секция скрыта.

---

## 3. Всплывающие и дополнительные элементы
- **Алерт (AlertModel)**
  - Показывается при ошибках загрузки или сетевых проблемах.
  - Содержит текст ошибки и кнопки для повтора или отмены действия.
  - Взаимодействие: пользователь может повторить попытку или закрыть алерт.

---

## 4. Нижняя навигационная панель
- **Нижняя подсказка (UILabel, labelBottomPrompt)**
  - Находится внизу экрана, под таблицей.
  - Содержит текстовую инструкцию: "Введите название улицы, станции метро или адрес дома, рядом с которым вы хотели бы забрать заказ, мы покажем ближайшие аптеки".
  - Всегда видима, не зависит от состояния поиска.

---

## 5. Открываемые экраны при взаимодействии с элементами
- **Ячейка подсказки (StoresSearchSuggestionView)**
  - Открывает: закрывает текущий экран и передаёт выбранную подсказку делегату (экран, инициировавший поиск).
- **Кнопка "Отмена"**
  - Открывает: закрывает текущий экран поиска.
- **Алерт (AlertModel)**
  - Открывает: не открывает новые экраны, только отображает сообщение поверх текущего.

---

## 6. Схематичное дерево иерархии экрана
```
Экран поиска аптек (StoresSearchVC)
├── Верхняя панель
│   ├── Поисковая строка (UISearchBar)
│   └── Кнопка "Отмена" (UIButton)
├── Основная область (UITableView)
│   ├── Секция подсказок (Section.suggestions)
│   │   └── Ячейка подсказки (StoresSearchSuggestionView)
│   │       ├── Иконка (UIImageView)
│   │       ├── Текст подсказки (UILabel)
│   │       └── Разделитель (UIView)
│   └── Секция информационного сообщения (Section.prompt)
│       └── Кастомный вид сообщения (FlexiblePromptView)
│           ├── Иконка (опционально)
│           └── Текст сообщения
├── Всплывающие элементы
│   └── Алерт (AlertModel)
└── Нижняя подсказка (UILabel)
```

---

## [Нужно дополнить]
- Не хватает информации о точной структуре FlexiblePromptView (иконка, текст, стиль).
- Неизвестно, какие ещё типы подсказок могут быть, кроме улицы, метро и адреса.
- Не описаны возможные состояния загрузки (например, индикатор загрузки).
- Не указано, как реализована обработка ошибок на уровне UI (кроме алерта).
- Неясно, может ли быть несколько секций подсказок одновременно. 
