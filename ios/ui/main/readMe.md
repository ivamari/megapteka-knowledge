# Структура и описание главного экрана приложения Мегаптека

## Описание и назначение экрана
Главный экран приложения Мегаптека — это стартовая страница, с которой пользователь начинает взаимодействие с сервисом. Экран предназначен для быстрого доступа к основным функциям приложения: поиску и заказу лекарств, просмотру статусов и истории заказов, ознакомлению с советами и акциями, а также получения полезной информации о здоровье. Здесь собраны все ключевые элементы для удобной навигации, информирования пользователя и повышения вовлечённости.

## Общая иерархия экрана

Главный экран построен на основе вертикального стека, в котором размещены основные элементы:
- Верхняя панель поиска и навигации
- Основная область с таблицей, разбитой на секции
- Всплывающие и дополнительные элементы (например, ворнинг про отсутствие предоплаты)

Вся разметка реализована через UIViewController с использованием UITableView и кастомных header/cell view для секций.

---

## 1. Верхняя панель (Navigation Bar + Search Panel)

### 1.1. Навигационная панель
- **Город**: отображает текущий выбранный город. При нажатии открывается выбор города.
- **Иконка уведомлений**: при нажатии открывается центр уведомлений.

### 1.2. Панель поиска
- **Поле поиска**: позволяет ввести текст для поиска товаров.
- **Иконка микрофона**: активирует голосовой поиск.
- **Иконка сканера**: активирует сканирование штрихкода.
- **Взаимодействие**: нажатие на любой элемент приводит к соответствующему действию (переход к поиску, голосовому поиску, сканеру).

---

## 2. Основная область (Таблица с секциями)

Вся основная область реализована как таблица с секциями. Секции могут динамически отображаться или скрываться в зависимости от состояния данных и пользователя.

### 2.1. Секции и их элементы (в порядке сверху вниз)

#### 2.1.1. Советы провизора
- **Заголовок**: название блока и кнопка "Смотреть все".
- **Коллекция советов**: горизонтальный скроллируемый список карточек советов.
- **Взаимодействие**: нажатие на карточку открывает подробный совет, на "Смотреть все" — переход к списку советов.
- **Особенности**: отображается только если есть советы.

#### 2.1.2. Карточки заказов, знакомства, обновления, входа
- **Карточки заказов**: отображают активные заказы пользователя, их статус, сумму, аптеку и срок хранения.
- **Карточка знакомства**: появляется, если есть предложение познакомиться с сервисом.
- **Карточка обновления приложения**: появляется, если доступно обновление.
- **Карточка входа**: появляется, если пользователь не авторизован.
- **Взаимодействие**: нажатие на карточку заказа — переход к деталям заказа, на карточку знакомства — переход к знакомству, на обновление — переход в App Store, на вход — переход к авторизации.
- **Особенности**: отображается только если есть соответствующие данные.

#### 2.1.3. Карта заказов
- **Кнопка "Показать заказы на карте"**: отображается, если есть активные заказы.
- **Взаимодействие**: открывает карту с заказами.

#### 2.1.4. Блок push-уведомлений
- **Текст с предложением включить push-уведомления**.
- **Кнопка "Включить push-уведомления"**.
- **Взаимодействие**: открывает настройки уведомлений.
- **Особенности**: отображается только если есть активные заказы и push-уведомления выключены.

#### 2.1.5. Экономия
- **Информационный баннер**: показывает сумму сэкономленных средств.
- **Взаимодействие**: отсутствует.
- **Особенности**: отображается, если есть данные о выгоде.

#### 2.1.6. Главное меню
- **Сетка иконок**: быстрые действия, представленные в виде двух строк по шесть столбцов.
- **Варианты быстрых действий:**

  - **1 строка:**
    1. Что нового?
    2. Как заказать
    3. Мои заказы
    4. Мегасоветы
    5. Мои адреса
    6. В топе

  - **2 строка:**
    1. Совместимость лекарств
    2. Мегаптека для друзей
    3. Расшифровка рецепта
    4. Задать вопрос о товаре
    5. Аптечный контроль
    6. Оценить приложение

- **Взаимодействие**: нажатие на иконку — переход к соответствующему разделу или действию.

#### 2.1.7. Товары с падением наличия
- **Список товаров**: товары, у которых снизилась доступность.
- **Взаимодействие**: нажатие на товар — переход к деталям.
- **Особенности**: отображается только если есть такие товары.

#### 2.1.8. Оценка товаров
- **Заголовок**: название блока и кнопка "Показать все".
- **Список товаров для оценки**: карточки товаров с возможностью поставить оценку (звезды).
- **Взаимодействие**: нажатие на звезды — отправка оценки, на карточку — переход к подробной оценке.
- **Особенности**: отображается, если есть товары для оценки.

#### 2.1.9. Баннеры
- **Горизонтальный список баннеров**: рекламные или информационные баннеры.
- **Пример возможного баннера:**
  - "Что делать, если?"
    - Текст: «Более 100 статей с ответами на важные вопросы о здоровье»
    - Яркое оформление с иллюстрациями (вопросительные знаки, лекарства, медицинские предметы)
    - Назначение: переход к разделу с полезными статьями и ответами на вопросы о здоровье
- **Взаимодействие**: нажатие — переход по ссылке.

#### 2.1.10. Меготовары
- **Заголовок**: название блока и кнопка "Показать все".
- **Список меготоваров**: карточки товаров с акцентом на выгоде.
- **Взаимодействие**: нажатие на товар — переход к деталям.
- **Особенности**: отображается, если есть меготовары.

#### 2.1.11. Сказать спасибо
- **Текстовый блок**: призыв оставить отзыв.
- **Возможные действия:**
  - Оставить отзыв в Google Play (рейтинг 4.9, 5 звёзд)
  - Оставить отзыв в Яндексе (рейтинг 4.9, Яндекс Карты)
  - Оставить отзыв в Google (рейтинг 5.0, Google Maps)
  - Оставить отзыв в 2ГИС (рейтинг 5.0, 2GIS)
  - Оставить отзыв на iRecommend (RECOMMEND.RU)
  - Оставить отзыв на Zoon (ZOON)
  - Оставить отзыв на Отзовике (Отзовик)
  - Подписаться во ВКонтакте (ВКонтакте)
  - Подписаться в Одноклассниках (Одноклассники)
  - Подписаться в Телеграме (Telegram)
  - Поделиться с друзьями (иконки: Telegram, ВКонтакте, WhatsApp, Viber, Gmail)
- **Взаимодействие**: нажатие на карточку — переход к написанию отзыва, подписке или открытие формы шаринга.
- **Особенности**: отображается, если есть данные.

#### 2.1.12. Уже заказывали
- **Список товаров**: ранее заказанные товары.
- **Взаимодействие**: нажатие на товар — переход к деталям, на кнопку "Показать все" — переход к полному списку.
- **Особенности**: отображается, если есть такие товары.

#### 2.1.13. Вы смотрели
- **Список товаров**: недавно просмотренные товары.
- **Взаимодействие**: нажатие на товар — переход к деталям.
- **Особенности**: отображается, если есть такие товары.

#### 2.1.14. Сегодня в топе
- **Заголовок**: название блока.
- **Список товаров**: топовые товары дня.
- **Взаимодействие**: нажатие на товар — переход к деталям.
- **Особенности**: поддерживает подгрузку следующей страницы при скролле.

---

## 3. Всплывающие и дополнительные элементы

### 3.1. Ворнинг про отсутствие предоплаты
- **Текстовое сообщение**: информирует пользователя, что заказ оплачивается в аптеке при получении, предоплата не требуется.
- **Кнопка закрытия**: скрывает ворнинг.
- **Взаимодействие**: нажатие на крестик скрывает ворнинг.
- **Особенности**:
  - Может быть показан пользователю не более двух раз (после второго показа больше не появляется).
  - Если пользователь вручную закрыл ворнинг, он временно скрывается до следующего показа (если лимит показов не исчерпан).

---

## 4. Нижняя навигационная панель
- **Кнопки навигации**: Главная, Каталог, Корзина, Избранное, Меню.
- **Взаимодействие**: переход между основными разделами приложения.
- **Особенности**: всегда закреплена внизу экрана.

---

## 5. Схематичное дерево иерархии главного экрана

```
Главный экран
├── Верхняя панель навигации
│   ├── Кнопка выбора города
│   └── Кнопка уведомлений
├── Панель поиска
├── Верхний фон
├── Основная таблица
│   ├── Советы провизора
│   ├── Карточки заказов, знакомства, обновления, входа
│   ├── Карта заказов
│   ├── Блок push-уведомлений
│   ├── Экономия
│   ├── Главное меню
│   ├── Товары с падением наличия
│   ├── Оценка товаров
│   ├── Баннеры
│   ├── Меготовары
│   ├── Сказать спасибо
│   ├── Уже заказывали
│   ├── Вы смотрели
│   └── Сегодня в топе
├── Ворнинг про отсутствие предоплаты
│   ├── Текстовое сообщение
│   └── Кнопка закрытия
└── Нижняя навигационная панель
```