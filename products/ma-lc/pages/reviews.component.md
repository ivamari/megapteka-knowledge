# Страница: Отзывы (Reviews)

## 1. Обзор Страницы

- **Назначение**: Отображение отзывов, оставленных покупателями, о заказах и аптеках.
- **Роль**: Инструмент для мониторинга качества обслуживания и получения обратной связи от клиентов.
- **Основные функции**:
    - Просмотр списка отзывов в формате карточек.
    - Фильтрация отзывов по оценке, аптеке, месяцу и статусу заказа.
    - Просмотр деталей каждого отзыва: оценка, текст, фото, информация о заказе и аптеке.
    - Выгрузка отфильтрованного списка отзывов в формате Excel.

## 2. Элементы Пользовательского Интерфейса (UI)

- **Заголовок**: `<h1>Отзывы покупателей об аптеках</h1>`
- **Фильтр**:
    - **Название**: `app-filter`.
    - **Назначение**: Предоставляет поля для фильтрации отзывов.
    - **Поля фильтра**:
        - Оценка (от 1 до 5)
        - Аптека
        - Месяц заказа
        - Статус заказа
        - Причина отмены
- **Баннер "Заказать наклейки"**:
    - **Название**: `app-request-stickers-banner`.
    - **Назначение**: Информирует и позволяет заказать рекламные материалы (наклейки) для аптек.
- **Мета-информация об отзывах**:
    - **Название**: `app-reviews-meta`.
    - **Назначение**: Отображает сводную статистику по отфильтрованным отзывам (например, средняя оценка).
- **Список отзывов**:
    - **Назначение**: Отображает отзывы в виде сетки из карточек.
    - **Элементы карточки отзыва**:
        - `Номер заказа`: Кликабельный номер заказа, к которому относится отзыв.
        - `Фото`: Если клиент прикрепил фото, отображается его превью. Клик по превью открывает полное изображение в новой вкладке.
        - `Статус заказа`: Текущий статус связанного заказа.
        - `Дата`: Дата и время оставления отзыва.
        - `Оценка`: Рейтинг в виде звезд (от 1 до 5).
        - `Текст отзыва`: Текстовый комментарий клиента.
        - `Адрес аптеки`: Адрес аптеки, где был сделан заказ.
        - `Код аптеки`: UUID аптеки.
- **Пагинация**:
    - **Название**: `app-pagination`.
    - **Назначение**: Навигация по страницам списка отзывов. Позволяет выбрать количество отзывов на странице (12, 24, 48, 96).
- **Кнопка "Скачать в Excel"**:
    - **Название**: `app-excel-button`.
    - **Назначение**: Инициирует загрузку отчета по отзывам.

## 3. Пользовательские Сценарии (User Flows)

- **Анализ негативных отзывов**:
    1. Пользователь заходит на страницу "Отзывы".
    2. В фильтре "Оценка" выбирает "1".
    3. Список обновляется, показывая только отзывы с самой низкой оценкой.
    4. Пользователь читает тексты отзывов и просматривает прикрепленные фото для выявления проблем.
- **Выгрузка всех отзывов за месяц**:
    1. Пользователь выбирает нужный месяц в фильтре "Месяц заказа".
    2. Нажимает кнопку "Скачать в Excel".
    3. Получает файл со всеми отзывами за выбранный период для дальнейшего анализа.

## 4. Навигация

- **Переходы с этой страницы**:
    - Клик по фото в отзыве открывает изображение в новой вкладке браузера.
- **Переходы на эту страницу**:
    - Через основное меню навигации (пункт "Отзывы").

## 5. Отображаемые Данные

- **Типы данных**:
    - Список отзывов (`Review[]`).
    - Параметры фильтрации.
- **Источники данных (API)**:
    - `GET merch-lk/v1/reviews`: Основной метод для получения списка отзывов. Принимает параметры для фильтрации и пагинации.
    - `GET merch-lk/v1/reviews/download`: Загрузка отчета в Excel. Принимает те же параметры фильтрации.
    - `GET merch-lk/v1/reviews/meta`: Получение сводной мета-информации для блока `app-reviews-meta`.
    - `POST merch-lk/v1/reviews/request-stickers`: Отправка запроса на заказ наклеек (из компонента `app-request-stickers-banner`).
- **Отправляемые данные**:
    - Параметры фильтрации и пагинации передаются в URL.

## 6. Особые Состояния/Логика

- **Загрузка**:
    - При загрузке списка отзывов отображается `app-loader`.
    - При загрузке отчета кнопка "Скачать в Excel" заменяется на `app-loader`.
- **Пустое состояние**: Если по заданным фильтрам не найдено ни одного отзыва, отображается компонент `app-empty`.
- **Debounce**: Запросы на обновление списка после изменения фильтров отправляются с задержкой в 500 мс.
- **Пагинация**: Количество элементов на странице может быть настроено пользователем (12, 24, 48, 96), по умолчанию 24.
