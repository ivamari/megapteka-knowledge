# Страница: Аналитика (Analytics) - Производитель

## 1. Обзор Страницы

- **Назначение**: Предоставление производителю (бренду) аналитических отчетов по продажам, ценам и наличию его товаров в аптеках.
- **Роль**: Инструмент для стратегического анализа позиций своих товаров на рынке в различных регионах.
- **Основные функции**:
    - Выбор до 5 товаров для анализа.
    - Построение трех отчетов по выбранным товарам: "Продажи", "Цены" и "Наличие".
    - В каждом отчете можно выбрать до 5 регионов для сравнения.

## 2. Элементы Пользовательского Интерфейса (UI)

- **Заголовок**: `<h1>Аналитика по товарам</h1>`
- **Выбор товаров (`app-choose-box`)**:
    - **Назначение**: Позволяет пользователю выбрать до 5 своих товаров, по которым будут строиться все отчеты на странице.
- **Отчет "Продажи"**:
    - **Заголовок**: `<h2>Продажи (помесячная динамика за последние 6 месяцев)</h2>`
    - **Выбор регионов**: Позволяет выбрать до 5 регионов для отчета.
    - **Таблица**: Отображает помесячное количество продаж каждого выбранного товара в каждом выбранном регионе.
- **Отчет "Цены"**:
    - **Заголовок**: `<h2>Цены (в разрезе регионов)</h2>`
    - **Выбор регионов**: Позволяет выбрать до 5 регионов для отчета.
    - **Таблица**: Для каждого товара показывает минимальную, максимальную и медианную цену в каждом выбранном регионе.
- **Отчет "Наличие"**:
    - **Заголовок**: `<h2>Наличие (в разрезе регионов)</h2>`
    - **Выбор регионов**: Позволяет выбрать до 5 регионов для отчета.
    - **Таблица**: Для каждого товара показывает "Покрытие" (доля аптек с товаром), "Остатки" (медианное количество) и "Индекс наличия" в каждом выбранном регионе.

## 3. Пользовательские Сценарии (User Flows)

- **Сравнение продаж двух товаров в разных регионах**:
    1. Пользователь заходит на страницу.
    2. В верхнем блоке выбирает 2 интересующих его товара.
    3. Прокручивает до отчета "Продажи".
    4. В блоке выбора регионов для продаж выбирает 3 региона.
    5. В таблице "Продажи" появляются данные, и пользователь может сравнить помесячную динамику продаж этих двух товаров в трех разных регионах.

## 4. Навигация

- **Переходы с этой страницы**: Нет прямых переходов.
- **Переходы на эту страницу**:
    - Через основное меню навигации (пункт "Аналитика").

## 5. Отображаемые Данные

- **Типы данных**:
    - Списки товаров и регионов для выбора.
    - Данные для отчетов: `AnalyticsSales`, `AnalyticsPrices`, `AnalyticsStocks`.
- **Источники данных (API)**:
    - `GET brand-lk/v1/drugs`: Получение списка товаров для выбора.
    - `GET brand-lk/v1/regions`: Получение списка регионов для выбора.
    - `GET brand-lk/v1/analytics/sales`: Получение данных для отчета "Продажи".
    - `GET brand-lk/v1/analytics/prices`: Получение данных для отчета "Цены".
    - `GET brand-lk/v1/analytics/stocks`: Получение данных для отчета "Наличие".
- **Отправляемые данные**:
    - Все запросы к API аналитики принимают `item_ids` (массив ID товаров) и `region_ids` (массив ID регионов).

## 6. Особые Состояния/Логика

- **Зависимость отчетов**: Отчеты "Продажи", "Цены" и "Наличие" не отображаются и не запрашивают данные, пока не выбран хотя бы один товар в главном селекторе.
- **Индивидуальные фильтры**: Каждый из трех отчетов имеет свой независимый набор выбранных регионов.
- **Загрузка**: Каждый отчет имеет свой собственный индикатор загрузки (`app-loader`).
- **Пустое состояние**: Если для отчета нет данных или не выбраны товары/регионы, отображается соответствующее сообщение (`app-empty`).
