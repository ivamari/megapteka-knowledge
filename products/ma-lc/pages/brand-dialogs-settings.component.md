# Страница: Диалоги → Настройки (Dialogs → Settings)

## 1. Обзор Страницы

- **Назначение**: Управление настройками диалогов для всех товаров производителя.
- **Роль**: Инструмент для массового и индивидуального включения/отключения функции чата с клиентом и настройки email-уведомлений.
- **Основные функции**:
    - Массовое включение/отключение диалогов для всех товаров.
    - Настройка глобального email для получения уведомлений о новых сообщениях.
    - Просмотр списка товаров с возможностью индивидуальной настройки email и статуса активности диалога.
    - Поиск товаров по названию.

## 2. Элементы Пользовательского Интерфейса (UI)

- **Заголовок**: `<h1>Настройки диалогов с клиентами</h1>`
- **Блок "Общие настройки для всех товаров"**:
    - **Назначение**: Управление настройками, которые применяются ко всем товарам сразу.
    - **Элементы**:
        - **Кнопка "Включить все"**: Активирует диалоги для всех товаров.
        - **Кнопка "Выключить все"**: Деактивирует диалоги для всех товаров.
        - **Поле "Общая почта" (`app-input-edit`)**: Позволяет указать и сохранить единый email для уведомлений.
- **Фильтр**:
    - **Назначение**: Поиск товаров в таблице ниже.
    - **Поля фильтра**:
        - `Название товара`.
- **Таблица настроек товаров**:
    - **Назначение**: Отображает список товаров для индивидуальной настройки.
    - **Колонки**:
        - `Товар`: Изображение и название товара.
        - `Почта`: Поле `app-input-edit` для редактирования email-адреса для уведомлений по конкретному товару.
        - `Уведомления`: Переключатель `app-switch` для включения/отключения диалога по конкретному товару.
- **Пагинация**:
    - **Назначение**: Навигация по страницам списка товаров.

## 3. Пользовательские Сценарии (User Flows)

- **Массовое отключение диалогов**:
    1. Пользователь заходит на страницу.
    2. В блоке "Общие настройки" нажимает кнопку "Выключить все".
    3. Система отправляет запрос, и после его выполнения все переключатели в таблице переходят в неактивное состояние.
- **Настройка уведомлений для отдельного товара**:
    1. Пользователь находит нужный товар в списке, используя поиск.
    2. В строке этого товара кликает на поле в колонке "Почта".
    3. Вводит новый email и нажимает "Сохранить".
    4. Включает переключатель в колонке "Уведомления", если он был выключен.

## 4. Навигация

- **Переходы с этой страницы**: Нет прямых переходов.
- **Переходы на эту страницу**:
    - Через основное меню навигации (пункт "Диалоги" → "Настройки").

## 5. Отображаемые Данные

- **Типы данных**:
    - Глобальные настройки (`DialogsSettings`).
    - Список товаров с их индивидуальными настройками (`DialogItemSettings[]`).
- **Источники данных (API)**:
    - `GET brand-lk/v1/dialogs/settings`: Получение глобальных настроек.
    - `POST brand-lk/v1/dialogs/settings/update`: Обновление глобальных настроек.
    - `GET brand-lk/v1/dialogs/settings/items`: Получение списка товаров с их настройками.
    - `POST brand-lk/v1/dialogs/settings/items/update`: Обновление настроек для одного товара.
    - `POST brand-lk/v1/dialogs/settings/items/all/update`: Массовое обновление статуса диалогов для всех товаров.
- **Отправляемые данные**:
    - `email` (string): При обновлении email.
    - `is_chat_available` (boolean): При включении/отключении диалогов.
    - `id` (number): ID товара при индивидуальном обновлении.

## 6. Особые Состояния/Логика

- **Загрузка**: Во время загрузки списка товаров отображается `app-loader`.
- **Пустое состояние**: Если у производителя нет товаров, отображается `app-empty`.
- **Debounce**: Запросы на обновление списка после поиска отправляются с задержкой в 500 мс.
- **Реактивные формы**: Для каждого поля ввода email и каждого переключателя создается свой `FormControl`, что позволяет отслеживать и сохранять изменения индивидуально.
