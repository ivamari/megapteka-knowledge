# Страница: Ценовой робот → Настройки (Optimus Price → Stores)

## 1. Обзор Страницы

- **Назначение**: Управление настройками Ценового робота как для всей аптечной сети в целом, так и для каждой аптеки в отдельности.
- **Роль**: Центральная страница для конфигурации и активации Ценового робота.
- **Основные функции**:
    - Включение/отключение глобальных опций "Неликвиды" и "Контрактные товары" для всей сети.
    - Просмотр списка аптек с возможностью индивидуального включения/отключения "базовой" схемы работы робота.

## 2. Элементы Пользовательского Интерфейса (UI)

- **Заголовок**: `<h1>Настройки ценового робота</h1>`
- **Блок "Общие настройки для всех аптек"**:
    - **Назначение**: Управление глобальными опциями, которые применяются ко всем аптекам сети.
    - **Элементы**:
        - **Переключатель "Неликвиды"**: Активирует или деактивирует автоматическое снижение цен на залежавшиеся товары.
        - **Переключатель "Контрактные товары"**: Активирует или деактивирует автоматическое снижение цен на контрактные товары для увеличения оборота.
- **Информационный блок**:
    - **Назначение**: Текстовое описание принципов работы опций "Неликвиды" и "Контрактные товары".
- **Заголовок**: `<h1>Аптеки с базовой схемой работы ценового робота</h1>`
- **Таблица аптек**:
    - **Назначение**: Отображает список всех аптек сети для индивидуального управления "базовой" схемой робота.
    - **Колонки**:
        - `Код аптеки`: UUID аптеки.
        - `Город`: Город аптеки.
        - `Адрес`: Адрес аптеки.
        - `Активность аптеки`: Текущий статус работы аптеки (включена/отключена).
        - `Активность робота`: Переключатель (`app-switch`) для включения или отключения "базовой" схемы робота для конкретной аптеки.

## 3. Пользовательские Сценарии (User Flows)

- **Включение опции "Неликвиды" для всей сети**:
    1. Пользователь заходит на страницу.
    2. В блоке "Общие настройки" находит переключатель "Неликвиды".
    3. Переводит его в активное положение.
    4. Настройка автоматически сохраняется.
- **Активация робота для конкретной аптеки**:
    1. Пользователь находит нужную аптеку в таблице.
    2. В колонке "Активность робота" переводит переключатель в активное положение.
    3. Робот для данной аптеки активируется. В случае ошибки, переключатель вернется в исходное положение и появится уведомление.

## 4. Навигация

- **Переходы с этой страницы**: Нет прямых переходов.
- **Переходы на эту страницу**:
    - Через основное меню навигации (пункт "Робот" → "Аптеки").
    - Является страницей по умолчанию для раздела "Ценовой робот".

## 5. Отображаемые Данные

- **Типы данных**:
    - Глобальные настройки робота (`PricebotSettings`).
    - Список аптек с их статусом активности робота (`PricebotStore[]`).
- **Источники данных (API)**:
    - `GET merch-lk/v1/pricebot/settings`: Получение глобальных настроек ("Неликвиды", "Контрактные товары").
    - `POST merch-lk/v1/pricebot/settings/update`: Обновление глобальных настроек.
    - `GET merch-lk/v1/pricebot/stores`: Получение списка аптек для таблицы.
    - `POST merch-lk/v1/pricebot/stores/activity/update`: Включение/отключение робота для конкретной аптеки.
- **Отправляемые данные**:
    - При обновлении глобальных настроек: `{ "old_items": boolean }` или `{ "contract_items": boolean }`.
    - При изменении активности робота для аптеки: `{ "store_id": number, "is_active_pricebot": boolean }`.

## 6. Особые Состояния/Логика

- **Загрузка**: Блок общих настроек и таблица аптек имеют индивидуальные индикаторы загрузки (`app-loader`).
- **Пустое состояние**: Если в сети нет аптек, таблица не отображается, показывается компонент `app-empty`.
- **Ошибки**: При ошибках API (например, не удалось изменить статус робота) пользователю показывается всплывающее уведомление (toast).
