# Страница: Авторизация (Auth)

## 1. Обзор Страницы

- **Назначение**: Предоставление пользователю формы для входа в систему.
- **Роль**: Единственная точка входа в защищенную часть личного кабинета.
- **Основные функции**:
    - Ввод логина и пароля.
    - Отправка данных для аутентификации.
    - Отображение ошибок в случае неудачного входа.

## 2. Элементы Пользовательского Интерфейса (UI)

- **Логотип**:
    - **Назначение**: Отображение логотипа "Мегаптека".
- **Форма входа**:
    - **Назначение**: Сбор учетных данных пользователя.
    - **Элементы**:
        - **Поле "Логин"**: `input type="text"` для ввода логина.
        - **Поле "Пароль"**: `input type="password"` для ввода пароля.
        - **Кнопка "Войти в личный кабинет"**: `app-button` для отправки формы.
            - **Состояния**:
                - **Активное**: Кнопка доступна для нажатия.
                - **Загрузка**: Во время процесса аутентификации на кнопке отображается индикатор загрузки.
- **Блок поддержки (`app-support`)**:
    - **Назначение**: Отображение контактной информации службы поддержки.

## 3. Пользовательские Сценарии (User Flows)

- **Успешный вход**:
    1. Пользователь открывает страницу.
    2. Вводит свой логин и пароль в соответствующие поля.
    3. Нажимает кнопку "Войти в личный кабинет".
    4. Кнопка переходит в состояние загрузки.
    5. Данные отправляются на сервер.
    6. Сервер возвращает успешный ответ с токеном аутентификации.
    7. Токен сохраняется в локальном хранилище.
    8. Пользователь перенаправляется на страницу, которую он пытался посетить до авторизации, либо на страницу по умолчанию (Дашборд).
- **Неудачный вход (неверный пароль)**:
    1. Пользователь вводит логин и неверный пароль.
    2. Нажимает "Войти".
    3. Сервер возвращает ошибку.
    4. Кнопка возвращается в активное состояние.
    5. На экране появляется всплывающее уведомление (toast) с текстом ошибки (например, "Неверный логин или пароль").
- **Неудачный вход (незаполненные поля)**:
    1. Пользователь нажимает "Войти", не заполнив одно или оба поля.
    2. Отправка на сервер не происходит.
    3. Появляется всплывающее уведомление с сообщением о необходимости заполнить поля (например, "Укажите логин").

## 4. Навигация

- **Переходы с этой страницы**:
    - На запрашиваемую страницу (до редиректа на `/auth`) или на страницу по умолчанию (`/dashboard`) после успешной авторизации.
- **Переходы на эту страницу**:
    - Автоматическое перенаправление при попытке доступа к любой защищенной странице без действующей сессии.
    - После выхода из системы через страницу `/logout`.

## 5. Отображаемые Данные

- **Типы данных**: На странице не отображаются данные с сервера.
- **Источники данных (API)**:
    - `POST merch-lk/v1/auth/login`: Отправка учетных данных для аутентификации.
- **Отправляемые данные**:
    - В теле POST-запроса передается объект: `{ "login": "...", "password": "..." }`.

## 6. Особые Состояния/Логика

- **Проверка существующей сессии**: При загрузке страницы сначала выполняется проверка наличия и валидности существующего токена. Если пользователь уже авторизован, его автоматически перенаправляет на запрашиваемую страницу, и форма входа не отображается.
- **Валидация на стороне клиента**: Форма не будет отправлена, пока оба поля (логин и пароль) не будут заполнены.
- **URL для возврата**: Система запоминает URL, на который пользователь пытался зайти до перенаправления на страницу входа, и возвращает его туда после успешной аутентификации.
