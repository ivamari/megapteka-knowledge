# ItemsScanActivity

## 1. Обзор Экрана

Экран "Сканирование товаров" (ItemsScanActivity) предназначен для сканирования штрих-кодов товаров с помощью камеры устройства. Он служит точкой входа для функциональности сканирования и навигации по результатам сканирования. Активность использует `NavHostFragment` для управления внутренней навигацией между различными этапами сканирования.

**Основные функции:**
*   Инициализация и управление процессом сканирования штрих-кодов.
*   Отображение интерфейса сканера.
*   Обработка результатов сканирования.
*   Интеграция с кнопкой чата поддержки.

## 2. Элементы Пользовательского Интерфейса (UI Elements)

*   **Toolbar (через `IncludeAppBarBinding`):**
    *   **Назначение/Функция:** Отображает заголовок экрана и кнопку "Назад" для навигации. Настраивается с помощью `NavController`.
    *   **Взаимодействие пользователя:** Нажатие на кнопку "Назад" закрывает активность.
*   **NavHostFragment (navHostContainer):**
    *   **Назначение/Функция:** Контейнер для размещения фрагментов, управляющих логикой сканирования (например, фрагмент камеры, фрагмент результатов).
    *   **Взаимодействие пользователя:** Не имеет прямых интерактивных элементов, служит для отображения контента текущего фрагмента навигации.
*   **ChatButton (includedChatButton.chatButton):**
    *   **Назначение/Функция:** Кнопка для быстрого доступа к чату поддержки.
    *   **Взаимодействие пользователя:** Нажатие открывает экран чата.

## 3. Пользовательские Сценарии (User Flows)

*   **Запуск сканирования:**
    1.  Пользователь открывает `ItemsScanActivity`.
    2.  Инициализируется `NavHostFragment` с графом навигации `scan_nav_graph`.
    3.  Отображается начальный фрагмент сканирования (например, с предпросмотром камеры).
*   **Сканирование штрих-кода:**
    1.  Пользователь наводит камеру на штрих-код.
    2.  Система распознает штрих-код.
    3.  Результат сканирования обрабатывается, и происходит навигация к соответствующему экрану (например, к деталям товара).
*   **Навигация внутри сканирования:**
    1.  В зависимости от логики `scan_nav_graph`, пользователь может перемещаться между различными состояниями сканирования (например, экран камеры, экран результатов, экран ошибки).

## 4. Навигация

С экрана "Сканирование товаров" возможны следующие переходы:

*   **Внутренняя навигация:** Управляется `scan_nav_graph` и может вести к различ��ым фрагментам, связанным со сканированием (например, к экрану результатов поиска товара по штрих-коду).
*   **Закрытие активности:** При нажатии кнопки "Назад" в тулбаре или системной кнопки "Назад".
*   **Экран чата:** При нажатии на кнопку чата.

### Deep Links

На этот экран нет прямых deep links.

## 5. Отображаемые Данные

*   **Типы данных:**
    *   Результаты сканирования (например, штрих-код).
*   **Источник данных:**
    *   **Камера устройства:** Для получения изображения штрих-кода.
    *   **Внутренние компоненты навигации:** Передача отсканированного штрих-кода другим фрагментам/активностям для дальнейшей обработки.

## 6. Особые Состояния/Логика

*   **Dagger Android Injection:** Используется для инъекции зависимостей в активность и фрагменты.
*   **FragmentFactory:** Устанавливается для корректного создания фрагментов, инжектированных Dagger.
*   **Обработка Insets:** Активность корректно обрабатывает системные отступы (status bar, navigation bar, IME) для правильного отображения UI.
*   **NavController и Navigation Graph:** Используется Android Navigation Component для управления потоком сканирования, что обеспечивает структурированную и предсказуемую навигацию.
*   **EmptyOuterNavigator:** Добавляется в `NavController` для обработки навигации, которая может выходить за пределы текущего графа (например, переход на главный экран).