# PropertyFragment

## Обзор Экрана
`PropertyFragment` — это нижний диалог (BottomSheetDialogFragment), предназначенный для отображения подробного значения определенного свойства товара. Он используется для показа расширенной информации о характеристиках товара, которая может быть слишком длинной или форматированной (например, с HTML) для отображения непосредственно на основном экране деталей товара.

## Элементы Пользовательского Интерфейса (UI Elements)
*   **Текстовое поле для значения свойства (TextView `value`)**:
    *   **Назначение/Функция**: Отображает значение выбранного свойства товара. Поддерживает отображение HTML-форматированного текста.
    *   **Возможные состояния**: Активное.
    *   **Взаимодействие пользователя**: Прокрутка текста, если он не помещается на экране.

## Пользовательские Сценарии (User Flows)
*   **Просмотр подробного свойства товара**: Пользователь нажимает на свойство на экране деталей товара, и `PropertyFragment` появляется снизу, отображая полное значение этого свойства.

## Навигация
*   **Переход на `PropertyFragment`**:
    *   Осуществляется с экрана деталей товара (`ItemDetailsFragment`).
    *   Условия перехода: Передача имени свойства (`name`) через аргументы навигации (`navArgs`). Фрагмент затем использует это имя для поиска соответствующего значения свойства в данных товара, полученных из `ItemDetailsViewModel`.
*   **Переход с `PropertyFragment`**:
    *   На предыдущий экран: Пользователь может закрыть нижний диалог, свайпнув его вниз, нажав на область вне диалога, или с помощью системной кнопки "Назад".

### Deep Links

На этот экран нет прямых deep links.

## Отображаемые Данные
*   **Типы данных**: Строковое значение свойства товара, которое может содержать HTML.
*   **Источники данных**: 
    *   **API:** `ApiService.getItemDetail` (REST метод: `GET /app/v4/items/detail`) - для получения детальной информации о товаре.
    *   **Локальное хранилище:** Таблица `ItemsDao` (для сохранения последнего просмотренного товара).

## Особые Состояния/Логика
*   **BottomSheetDialogFragment**: Фрагмент реализован как нижний диалог, что позволяет ему появляться поверх текущего экрана, не перекрывая его полностью, и легко закрываться.
*   **Обработка HTML**: Текст значения свойства парсится как HTML (`parseAsHtml()`) для корректного отображения форматированного контента.
*   **ViewModel Scope**: Фрагмент использует `navGraphViewModels` для получения `ItemDetailsViewModel`, что позволяет ему разделять данные о товаре с родительским `ItemDetailsFragment`.