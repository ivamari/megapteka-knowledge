# GoodsFragment

## 1. Обзор Экрана

Экран "Мегатовары" (GoodsFragment) предназначен для отображения списка товаров. Он позволяет пользователю просматривать товары, обновлять список с помощью "потяни-чтобы-обновить" и переходить к детальному просмотру каждого товара. Экран поддерживает пагинацию и обработку различных состояний загрузки данных.

**Основные функции:**
*   Отображение списка товаров с пагинацией.
*   Обновление списка товаров с помощью "потяни-чтобы-обновить" (pull-to-refresh).
*   Переход к детальному просмотру выбранного товара.
*   Обработка состояний загрузки, ошибок и пустого списка товаров.

## 2. Элементы Пользовательского Интерфейса (UI Elements)

*   **SwipeRefreshLayout (swipeRefresh):**
    *   **Назначение/Функция:** Позволяет пользователю обновить список товаров, потянув экран вниз.
    *   **Взаимодействие пользователя:** Свайп вниз для обновления данных.
*   **RecyclerView:**
    *   **Назначение/Функция:** Основной контейнер для отображения секций `InfoSection`, `GoodsSection` и `StateSection`.
    *   **Взаимодействие пользователя:** Вертикальная прокрутка для просмотра содержимого.
*   **InfoSection:**
    *   **Назначение/Функция:** Вероятно, отображает общую информацию или баннеры, связанные с категорией товаров.
    *   **Взаимодействие пользователя:** Неинтерактивный элемент.
*   **GoodsSection:**
    *   **Назначение/Функция:** Адаптер для `RecyclerView`, который управляет отображением отдельных карточек товаров. Каждая карточка, вероятно, включает изображение, название, цену и кнопки для взаимодействия.
    *   **Взаимодействие пользователя:** Нажатие на карточку товара инициирует переход к экрану детального просмотра товара.
*   **StateSection:**
    *   **Назначение/Функция:** Отображает состояния загрузки, ошибки или пустого состояния данных для списка товаров.
    *   **Возможные состояния:**
        *   `LOADING`: Показывает индикатор прогресса и сообщение "Загрузка товаров".
        *   `ERROR`: Показывает сообщение об ошибке и кнопку "Повторить".
        *   `EMPTY`: Показывает сообщение "Пусто" (если нет товаров).
        *   `HIDDEN`: Скрыт, когда данные успешно загружены и отображаются.
    *   **Взаимодействие пользователя:** Нажатие на кнопку "Повторить" (в состоянии ошибки) для повторной попытки загрузки данных.

## 3. Пользовательские Сценарии (User Flows)

*   **Просмотр списка товаров:**
    1.  Пользо��атель открывает экран "Мегатовары".
    2.  Отображается индикатор загрузки (`StateSection`).
    3.  ViewModel запрашивает список товаров.
    4.  При успешной загрузке, индикатор скрывается, и `GoodsSection` отображает список товаров.
    5.  Если список товаров пуст, отображается `StateSection` с сообщением о пустом списке.
*   **Переход к деталям товара:**
    1.  Пользователь нажимает на любой товар в списке.
    2.  Происходит навигация к экрану `GoodsDetailFragment` с передачей ID выбранного товара.
*   **Обновление списка:**
    1.  Пользователь выполняет жест "потяни-чтобы-обновить".
    2.  Список товаров перезагружается.
*   **Обработка ошибок загрузки:**
    1.  При возникновении ошибки загрузки данных, `StateSection` отображает сообщение об ошибке и кнопку "Повторить".
    2.  Нажатие на кнопку "Повторить" инициирует повторную попытку загрузки данных.

## 4. Навигация

С экрана "Мегатовары" возможны следующие переходы:

*   **`GoodsDetailFragment`:** Для просмотра детальной информации о выбранном товаре.

### Deep Links

На этот экран можно попасть по следующим deep links:

*   `{scheme}://{host}/goods`

## 5. Отображаемые Данные

*   **Типы данных:**
    *   `PagingData<Goods>`: Для отображения списка товаров, где `Goods` представляет собой объект товара (например, ID, название, изображение, цена).
*   **Источник данных:**
    *   **API:** `ApiService.getGoods` (REST метод: `GET /app/v1/goods`) - для получения списка товаров.
    *   **Локальное хранилище:** Нет.

## 6. Особые Состояния/Логика

*   **Pull-to-refresh:** `SwipeRefreshLayout` позволяет пользователю вручную обновить список товаров.
*   **Декорация элементов:** Используется `SpacesItemDecoration` для добавления отступов между элементами в `RecyclerView`.
*   **Обработка ошибок Paging:** `handleLoadStates` обрабатывает различные состояния загрузки (начальная загрузка, добавление, ошибка) и отображает соответствующий UI через `StateSection`.