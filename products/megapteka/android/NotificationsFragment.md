# NotificationsFragment

## 1. Обзор Экрана

Экран "Центр уведомлений" (NotificationsFragment) предназначен для отображения списка уведомлений, полученных пользователем. Он также предоставляет быстрый доступ к системным настройкам уведомлений, если они отключены для приложения.

**Основные функции:**
*   Отображение списка уведомлений.
*   Переход к деталям, связанным с уведомлением, по deep-ссылке.
*   Предложение включить уведомления, если они отключены на системном уровне.
*   Обработка состояний загрузки, ошибок и пустого списка уведомлений.

## 2. Элементы Пользовательского Интерфейса (UI Elements)

*   **RecyclerView:**
    *   **Назначение/Функция:** Основной контейнер для отображения секций `NotificationsSettingsSection`, `NotificationsSection` и `StateSection`.
    *   **Взаимодействие пользователя:** Вертикальная прокрутка для просмотра содержимого.
*   **NotificationsSettingsSection:**
    *   **Назначение/Функция:** Отображает карточку с предложением включить уведомления, если они отключены на системном уровне. Если уведомления включены, эта секция скрыта.
    *   **Возможные состояния:** Видима, если уведомления отключены; скрыта в противном случае.
    *   **Взаимодействие пользователя:** Нажатие на карточку инициирует переход в системные настройки уведомлений приложения.
*   **NotificationsSection:**
    *   **Назначение/Функция:** Отображает список индивидуальных уведомлений. Каждое уведомление, вероятно, включает заголовок, текст и, возможно, изображение.
    *   **Взаимодействие пользователя:** Нажатие на уведомление инициирует навигацию по связанной deep-ссылке.
*   **StateSection:**
    *   **Назначение/Функция:** Отображает состояния загрузки, ошибки или пустого состояния данных для списка уведомлений.
    *   **Возможные состояния:**
        *   `LOADING`: Показывает индикатор прогресса и сообщение "Загрузка уведомлений".
        *   `ERROR`: Показывает сообщение об ошибке.
        *   `EMPTY`: Показывает сообщение о пустом списке уведомлений с заголовком, сообщением и изображением (если уведомления включены).
        *   `HIDDEN`: Скрыт, когда данные успешно загружены и отображаются.
    *   **Взаимодействие пользователя:** Не имеет прямых интерактивных элементов, кроме отображения информации.

## 3. Пользовательские Сценарии (User Flows)

*   **Просмотр уведомлений:**
    1.  Пользователь открывает экран "Центр уведомлений".
    2.  ViewModel проверяет статус системных уведомлений и загружает список уведомлений.
    3.  Если системные уведомления отключены, отображается `NotificationsSettingsSection`.
    4.  Отображается индикатор загрузки (`StateSection`).
    5.  При успешной загрузке, индикатор скрывается, и `NotificationsSection` отображает список уведомлений.
    6.  Если уведомления включены, но список пуст, отображается `StateSection` с сообщением о пустом списке.
*   **Переход к деталям уведомления:**
    1.  Пользователь нажимает на любое уведомление в списке.
    2.  Если уведомление имеет deep-ссылку, происходит навигация по этой ссылке.
*   **Включение уведомлений:**
    1.  Если уведомления отключены, пользователь нажимает на карточку `NotificationsSettingsSection`.
    2.  Открываются системные настройки уведомлений для приложения "Мегаптека", где пользователь может их включить.

## 4. Навигация

С экрана "Центр уведомлений" возможны следующие переходы:

*   **Системные настройки уведомлений:** Для управления разрешениями на уведомления на уровне ОС.
*   **Навигация по DeepLink:** Если уведомление имеет deep-ссылку, может произойти переход на любой экран приложения или внешний ресурс.

### Deep Links

На этот экран нет прямых deep links.

## 5. Отображаемые Данные

*   **Типы данных:**
    *   `Boolean`: Статус системных уведомлений (`viewModel.notificationsEnabled`).
    *   `List<Notification>`: Список объектов `Notification`, каждый из которых представляет собой уведомление (например, `deeplink`, заголовок, текст).
*   **Источник данных:**
    *   **Локальное хранилище:** Таблица `NotificationsDao` (для получения списка уведомлений).
    *   **Системные службы:** `NotificationManagerCompat` (для проверки статуса ��истемных уведомлений).

## 6. Особые Состояния/Логика

*   **Динамическая видимость секции настроек:** `NotificationsSettingsSection` отображается только тогда, когда системные уведомления для приложения отключены, предоставляя пользователю явный призыв к действию.
*   **Обработка пустого списка:** Если уведомления включены, но список пуст, отображается специальное сообщение о пустом списке с соответствующим изображением.
*   **Декорация элементов:** Используется `DividerSectionItemDecoration` для добавления разделителей между элементами в `RecyclerView`.
*   **Обработка ошибок:** Ошибки загрузки уведомлений отображаются через `StateSection`.