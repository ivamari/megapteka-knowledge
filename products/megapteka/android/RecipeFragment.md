# RecipeFragment

## 1. Обзор Экрана

Экран "Расшифровка рецепта" (RecipeFragment) предназначен для помощи пользователю в расшифровке медицинских рецептов. Он предоставляет возможность сделать фотографию рецепта или выбрать ее из галереи, а затем отправить ее в чат для получения консультации.

**Основные функции:**
*   Возможность сделать фотографию рецепта с помощью камеры.
*   Возможность выбрать фотографию рецепта из галереи.
*   Отправка фотографии рецепта в чат для расшифровки.
*   Запрос разрешений на доступ к камере.

## 2. Элементы Пользовательского Интерфейса (UI Elements)

*   **ImageView (image):**
    *   **Назначение/Функция:** Отображает иллюстрацию, связанную с расшифровкой рецепта.
    *   **Взаимодействие по��ьзователя:** Неинтерактивный элемент.
*   **TextView (title):**
    *   **Назначение/Функция:** Отображает заголовок экрана (например, "Расшифровка рецепта").
    *   **Взаимодействие пользователя:** Неинтерактивный элемент.
*   **TextView (message):**
    *   **Назначение/Функция:** Отображает пояснительное сообщение о том, как работает расшифровка рецепта.
    *   **Взаимодействие пользователя:** Неинтерактивный элемент.
*   **Button (send):**
    *   **Назначение/Функция:** Кнопка для отправки фотографии рецепта.
    *   **Взаимодействие пользователя:** Нажатие инициирует запрос разрешения на камеру и затем открывает диалог выбора источника изображения (камера/галерея).

## 3. Пользовательские Сценарии (User Flows)

*   **Отправка рецепта на расш��фровку:**
    1.  Пользователь открывает экран "Расшифров��а рецепта".
    2.  Нажимает кнопку "Отправить рецепт" (`send`).
    3.  Если разрешение на камеру не предоставлено, запрашивается разрешение.
    4.  Открывается системный диалог для выбора источника изображения (сделать фото или выбрать из галереи).
    5.  Пользователь делает фотографию или выбирает ее.
    6.  Выбранная фотография (ее URI) передается на экран чата (`ChatActivity`) вместе с предварительным сообщением.
    7.  Происходит навигация к экрану чата.

## 4. Навигация

С экрана "Расшифровка рецепта" возможны следующие переходы:

*   **`ChatActivity`:** После выбора/съемки фотографии рецепта, пользователь перенаправляется на экран чата с прикрепленным изображением.
*   **Системный выбор изображения:** Для выбора фото из галереи или съемки на камеру.

### Deep Links

На этот экран можно попасть по следующим deep links:

*   `ma://{host}/recipe`

## 5. Отображаемые Данные

*   **Типы данных:**
    *   `Uri`: URI выбранной или сделанной фотографии рецепта.
*   **Источник данных:**
    *   **Камера/Галерея устройства:** Для получения фотографии рецепта.
    *   **Локальные ресурсы:** Статические тексты и изображения.

## 6. Особые Состояния/Логика

*   **Сохранение URI камеры:** `cameraUri` сохраняется при изменении конфигурации для корректной работы с камерой.
*   **Обработка разрешений:** Перед использованием камеры запрашивается разрешение `Manifest.permission.CAMERA`.
*   **Передача данных в чат:** URI фотографии и предварительное сообщение передаются в `ChatActivity` через аргументы навигации.