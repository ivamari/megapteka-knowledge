# SortingDialog (v1)

## 1. Обзор Экрана

`SortingDialog` (версия 1) — это нижний диалог (BottomSheetDialogFragment), который позволяет пользователю выбрать один из доступных вариантов сортировки для списка элементов. Он отображает заголовок и список опций сортировки, позволяя выбрать одну из них и применить ее.

**Основные функции:**
*   Отображение списка доступных опций сортировки.
*   Выбор одной опции сортировки.
*   Применение выбранной сортировки и закрытие диалога.

## 2. Элементы Пользовательского Интерфейса (UI Elements)

*   **TextHeaderSection (headerSection):**
    *   **Назначение/Функция:** Отображает заголовок диалога, например, "Сортировать по".
    *   **Взаимодействие пользов����теля:** Неинтерактивный элемент.
*   **RecyclerView:**
    *   **Назначение/Функция:** Основной контейнер для отображения секций `HeaderSection` и `SortingsSection`.
    *   **Взаимодействие пользователя:** Вертикальная прокрутка для просмотра содержимого.
*   **SortingsSection:**
    *   **Назначение/Функция:** Адаптер для `RecyclerView`, который управляет отображением отдельных опций сортировки. Каждая опция, вероятно, представляет собой текстовый элемент с возможностью выбора.
    *   **Взаимодействие пользователя:** Нажатие на опцию сортировки выбирает ее, передает результат на предыдущий экран и закрывает диалог.
*   **ImageButton (close):**
    *   **Назначение/Функция:** Кнопка для закрытия диалога.
    *   **Взаимодействие пользователя:** Нажатие закрывает диалог.

## 3. Пользовательские Сценарии (User Flows)

*   **Выбор опции сортировки:**
    1.  Пользователь открывает `SortingDialog`, передавая список доступных опций сортировки (`args.sortings`) и текущую выбранную опцию (`args.currentSorting`).
    2.  Отображается заголовок и список опций сортировки, с отмеченной текущей опцией.
    3.  Пользователь нажимает на одну из опций сортировки.
    4.  Выбранная опция передается обратно на предыдущий экран через `setFragmentResult`, и диалог закрывается.
*   **Закрытие диалога:**
    1.  Пользователь нажимает кнопку "Закрыть" (`close`).
    2.  Диалог закрывается без применения изменений.

## 4. Навигация

С диалога `SortingDialog` возможны следующие действия:

*   **Закрытие диалога:** При выборе опции сортировки, при нажатии кнопки "Закрыть", или при нажатии кнопки "Назад" на устройстве.

### Deep Links

На этот экран нет прямых deep links.

## 5. Отображаемые Данные

*   **Типы данных:**
    *   `List<Sorting>`: Список объектов `Sorting`, каждый из которых представляет опцию сортировки (например, название, код, статус `checked`).
*   **Источник данных:** Входящие аргументы (`navArgs`) - список доступных опций сортировки (`args.sortings`) и текущая выбранная опция (`args.currentSorting`).

## 6. Особые Состояния/Логика

*   **Производительность на слабых устройствах:** Для устройств с низкой производительностью аниматор элементов `RecyclerView` отключается (`viewBinding.recyclerView.itemAnimator = null`).
*   **BottomSheetBehavior:** Диалог всегда развернут (`BottomSheetBehavior.STATE_EXPANDED`) при открытии.
*   **Декорация элементов:** Используется `DividerSectionItemDecoration` для добавления разделителей между элементами в `RecyclerView`.
*   **Передача результатов:** Выбранная опция сортировки передается обратно на предыдущий экран чер��з `setFragmentResult` с использованием `REQUEST_KEY_SORTING` и `RESULT_KEY_SORTING`.