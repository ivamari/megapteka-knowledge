# PromocodeFragment

## 1. Обзор Экрана

Экран "Секретный промокод" (PromocodeFragment) предназначен для отображения специального промокода и предоставления возможности его копирования, а также перехода по связанной ссылке. Этот экран может использоваться для проведения акций или предоставления эксклюзивных предложений.

**Основные функции:**
*   Отображение секретного промокода.
*   Копирование промокода в буфер обмена.
*   Переход по ссылке, связанной с промокодом.

## 2. Элементы Пользовательского Интерфейса (UI Elements)

*   **TextView (promocode):**
    *   **Назначение/Функция:** Отображает сам промокод.
    *   **Взаимодействие пользователя:** Нажатие на текст промокода копирует его в буфер обмена.
*   **Button (button):**
    *   **Н��значение/Функция:** Кнопка для перехода по ссылке, связанной с промокодом.
    *   **Взаимодействие пользователя:** Нажатие инициирует навигацию по deep-ссылке.

## 3. Пользовательские Сценарии (User Flows)

*   **Просмотр и копирование промокода:**
    1.  Пользователь открывает экран "Секретный промокод".
    2.  ViewModel загружает промокод (`viewModel.promocode`).
    3.  Промокод отображается в `promocode`.
    4.  Пользователь нажимает на текст промокода.
    5.  Промокод копируется в буфер обмена, и отображается Toast-сообщение о копировании.
*   **Переход по ссылке:**
    1.  Пользователь нажимает на кнопку (`button`).
    2.  Происходит навигация по deep-ссылке, связанной с промокодом (`viewModel.link`).

## 4. Навигация

С экрана "Секретный промокод" возможны следующие переходы:

*   **Назад к предыдущему экрану:** При нажатии кнопки "Назад" в тулбаре или системной кнопки "Назад".
*   **Навигация по DeepLink:** Если промокод имеет связанную deep-ссылку, может произойти переход на любой экран приложения или внешний ресурс.

### Deep Links

На этот экран можно попасть по следующим deep links:

*   `ma://{host}/promocode`

## 5. Отображаемые Данные

*   **Типы данных:**
    *   `Parameter`: Объект, содержащий значение промокода (`value`) и, возможно, связанную ссылку (`link`).
*   **Источник данных:**
    *   **API:** `ApiService.getParameters` (REST метод: `GET parameters`) - для получения промокода и связанной ссылки.
    *   **Локальное хранилище:** Таблица `ParametersDao` (для кэширования параметров).

## 6. Особые Состояния/Логика

*   **Копирование в буфер обмена:** Реализована функция копирования текста в буфер обмена с помощью `ClipboardManager`.
*   **Toast-уведомление:** После копирования промокода отображается краткое Toast-уведомление.
*   **Навигация по DeepLink:** Используется `navigateDeeplink` для обработки перехода по ссылке, что позволяет гибко переходить как внутри приложения, так и на внешние ресурсы.