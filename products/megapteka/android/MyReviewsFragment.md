# MyReviewsFragment

## Обзор Экрана
`MyReviewsFragment` — это фрагмент, который отображает список отзывов, написанных текущим пользователем. Он является частью экрана "Отзывы на товары" и предоставляет функциональность для просмотра ранее оставленных отзывов, их редактирования, а также перехода к деталям товара, на который был оставлен отзыв. Фрагмент поддерживает пагинацию и обрабатывает различные состояния загрузки данных.

## Элементы Пользовательского Интерфейса (UI Elements)
*   **RecyclerView**:
    *   **Назначение/Функция**: Отображает динамический список отзывов пользователя. Использует `ConcatAdapter` для объединения секций отзывов и состояния.
    *   **Возможные состояния**: Отображение списка отзывов, пустое состояние (с настраиваемым заголовком, сообщением и кнопкой), состояние загрузки (с индикатором прогресса и сообщением "Загрузка товаров..."), состояние ошибки (с сообщением об ошибке и кнопкой "Повторить").
    *   **Взаимодействие пользователя**: Прокрутка списка для загрузки новых отзывов, нажатие на элемент отзыва для перехода к деталям товара, нажатие на кнопку "Редактировать" у отзыва, нажатие на кнопку "Повторить" при ошибке, нажатие на кнопку в пустом состоянии.
*   **Индикатор прогресса/Сообщения о состоянии (через `StateSection`)**:
    *   **Назначение/Функция**: Отображает сообщения о состоянии (загрузка, пусто, ошибка) и индикатор прогресса.
    *   **Возможные состояния**: Видимый (в зависимости от со��тояния данных), скрытый.
    *   **Взаимодействие пользователя**: Нажатие на кнопку "Повторить" при ошибке, нажатие на кнопку в пустом состоянии (может перевести на другой таб или по диплинку).

## Пользовательские Сценарии (User Flows)
*   **Просмотр своих отзывов**: Пользователь открывает вкладку "Мои отзывы" на экране "Отзывы на товары", чтобы увидеть список всех своих ранее оставленных отзывов.
*   **Загрузка дополнительных отзывов**: При прокрутке списка вниз автоматически подгружаются новые отзывы.
*   **Переход к деталям товара**: Пользователь нажимает на элемент отзыва, чтобы перейти на экран деталей товара, к которому относится этот отзыв.
*   **Редактирование отзыва**: Пользователь нажимает кнопку "Редактировать" рядом с отзывом, чтобы изменить его.
*   **Повторная загрузка данных**: При возникновении ошибки загрузки данных пользователь может нажать кнопку "Повторить" для повторной попытки.
*   **Действие в пустом состоянии**: Если отзывов нет, пользователю может быть предложено перейти на вкладку "Ожидают отзыва" или по другому диплинку.

## Навигация
*   **Переход на `MyReviewsFragment`**:
    *   Является частью `ItemsForReviewFragment` и отображается внутри него как одна из вкладок.
*   **Переход с `MyReviewsFragment`**:
    *   На экран `ItemDetailsFragment`: При нажатии на элемент отзыва (`ItemsForReviewFragmentDirections.actionToItemDetails`).
    *   На экран `ItemReviewFragment`: При нажатии на кнопку "Редактировать" (`ItemsForReviewFragmentDirections.actionToItemReview`) с передачей данных для редактирования отзыва.
    *   На другой таб (`ItemsForReviewFragment.TAB_REVIEWS_AWAIT`) или по произвольному диплинку при нажа��ии на кнопку в пустом состоянии.

### Deep Links

На этот экран нет прямых deep links.

## Отображаемые Данные
*   **Типы данных**: Список объектов `RatedItem`, содержащих информацию об отзыве (текст, автор, дата, оценки, количество лайков и т.д.).
*   **Источники данных**: 
    *   **API:** `ApiService.getRatedItems` (REST метод: `GET /app/v1/items/rated`) - для получения списка оцененных товаров.
    *   **Локальное хранилище:** Нет.

## Особые Состояния/Логика
*   **Пагинация (Paging Library)**: Фрагмент использует Android Paging Library для эффективной загрузки и отображения больших списков отзывов, минимизируя потребление памяти и улучшая производительность.
*   **Обработка состояний загрузки**: Отслеживает `LoadState` из Paging Library для отображения соответствующих UI-состояний (загрузка, данные, пусто, ошибка) для начальной загрузки и подгрузки страниц.
*   **Настраиваемое пустое состояние**: Сообщение и кнопка в пустом состоянии могут быть динамически настроены на основе метаданных (`viewModel.ratedMeta`).
*   **Оптимизация для слабых устройств**: На устройствах с низкой производительностью отключается анимация `itemAnimator` для `RecyclerView`.
*   **`ConcatAdapter`**: Используется для объединения адаптера отзывов (`MyReviewsSection`) с секциями состояния (`StateSection`) и фокуса (`FocusSection`).
*   **Декорации элементов**: Используется `SpacesItemDecoration` для добавления отступов между элементами списка.
*   **Вложенность**: Фрагмент является вложенным и получает `ViewModel` от родительского навигационного графа (`R.id.itemsForReview`).