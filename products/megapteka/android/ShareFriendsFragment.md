# ShareFriendsFragment

## 1. Обзор Экрана

Экран "Мегаптека для друзей" (ShareFriendsFragment) предназначен для того, чтобы пользователь мог легко поделиться информацией о приложении "Мегаптека" со своими друзьями. Он отображает пояснительный текст и предоставляет кнопку для инициирования процесса обмена.

**Основные функции:**
*   Отображение информации о возможности поделиться приложением.
*   Инициирование системного диалога для обмена текстом о приложении.

## 2. Элементы Пользовательского Интерфейса (UI Elements)

*   **ImageView (image):**
    *   **Назначение/Функция:** Отображает иллюстрацию, связанную с обменом информацией с друзьями.
    *   **Взаимодействие пользователя:** Неинтерактивный элемент.
*   **TextView (title):**
    *   **Назначение/Функция:** Отображает заголовок экрана (например, "Мегаптека для друзей").
    *   **Взаимодействие пользователя:** Неинтерактивный элемент.
*   **TextView (body):**
    *   **Назначение/Функция:** Отображает пояснительный текст о том, почему стоит поделиться приложением. Текст может содержать HTML-разметку.
    *   **Взаимодействие пользователя:** Неинтерактивный элемент.
*   **Button (button):**
    *   **Назначение/Функция:** Кнопка для инициирования процесса обмена.
    *   **Взаимодействие пользователя:** Нажатие инициирует запрос текста для обмена и затем открывает системный диалог для выбора приложения для обмена.

## 3. Пользовательские Сценарии (User Flows)

*   **Поделиться приложением:**
    1.  Пользователь открывает экран "Мегаптека для друзей".
    2.  Отображается по����снительный текст и кнопка "Поделиться".
    3.  Пользователь нажимает кнопку "Поделиться" (`button`).
    4.  ViewModel запрашивает текст для обмена (`viewModel.getTextShareStock()`).
    5.  При успешном получении текста, регистрируется аналитическое событие `AnEvent.shareLink`.
    6.  Открывается системное диалоговое окно для выбора приложения, через которое пользователь хочет поделиться текстом.

## 4. Навигация

С экрана "Мегаптека для друзей" возможны следующие переходы:

*   **Назад к предыдущему экрану:** При нажатии кнопки "Назад" в тулбаре или системной кнопки "Назад".
*   **Системное диалоговое окно "Поделиться":** Открывается для обмена текстом о приложении.

### Deep Links

На этот экран можно попасть по следующим deep links:

*   `ma://{host}/share/friends`

## 5. Отображаемые Данные

*   **Типы данных:**
    *   `Parameter`: Объект, содержащий текст для обмена (`value`).
    *   `Resource<Parameter>`: Для отслеживания статуса загрузки текста для обмена.
*   **Источник данных:**
    *   **API:** `ApiService.getParameters` (REST метод: `GET parameters`) - для получения текста для обмена.
    *   **Локальное хранилище:** Таблица `ParametersDao` (для кэширования параметра).

## 6. Особые Состояния/Логика

*   **Форматирование текста:** Текст в `body` может содержать HTML-разметку и форматируется с помощью `parseAndStyleAsHtml()`.
*   **Логирование аналитики:** Обмен информацией логируется с помощью `AnUtils.logEvent`.