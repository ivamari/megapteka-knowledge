# Экран отмены заказа (OrderCancelVC)

## Описание и назначение экрана
Экран предназначен для отмены заказа пользователем. Здесь пользователь выбирает причину отмены, при необходимости оставляет комментарий, и подтверждает действие. Экран помогает сервису собирать обратную связь для улучшения качества обслуживания.

## Общая иерархия экрана
Экран реализован на основе UIViewController (`OrderCancelVC`) с использованием UITableView для отображения секций и элементов, а также отдельной кнопки подтверждения действия. Всплывающие окна используются для информирования пользователя об успешной отмене заказа.

---

## 1. Верхняя панель

### 1.1. Назначение и элементы
- **Заголовок**: "Отмена заказа {номер заказа}" (динамически подставляется номер заказа, свойство navigationItem.title)
  - Назначение: информирует пользователя о текущем действии и заказе.
  - Взаимодействие: не интерактивен.
- **Кнопка назад**: стандартная системная кнопка (предположительно, так как не указана явно в storyboard, но типично для UINavigationController).
  - Назначение: возврат к предыдущему экрану.
  - Взаимодействие: возвращает пользователя назад.

---

## 2. Основная область (основной контент)

Вся основная область реализована через UITableView (`tableView`), разбитую на три секции:

### 2.1. Секция "Информация" (`OrderCancelInfoView`)
- **Описание**: Информирует пользователя, что заказ будет отменён, и просит выбрать причину отмены.
- **Элементы**:
  - Заголовок (`labelTitle`): "Заказ будет отменен"
  - Описание (`labelDescr`): "Пожалуйста, выберите причину отмены заказа. Ваш ответ поможет нам учитывать опыт пользователей, работать над ошибками и становиться лучше"
- **Взаимодействие**: только для чтения, не интерактивна.

### 2.2. Секция "Причина отмены" (`OrderCancelReasonView`)
- **Описание**: Список причин отмены заказа, представленный в виде радиокнопок.
- **Элементы** (каждая причина — отдельная ячейка):
  - Радиокнопка (`imageViewRadio`): отображает выбранное/невыбранное состояние.
  - Текст причины (`labelTitle`): текстовое описание причины.
  - Контейнер (`viewContainer`): область, реагирующая на нажатие.
- **Взаимодействие**:
  - Пользователь может выбрать только одну причину (single selection).
  - При выборе причины вызывается обновление состояния (selectedCancelReason).
  - Если причина требует комментария (например, "другое"), появляется следующая секция.

### 2.3. Секция "Комментарий" (`OrderCancelMessageView`)
- **Описание**: Отображается только если выбранная причина требует пояснения (например, "другое").
- **Элементы**:
  - Текстовое поле (`textView` класса ViTextView): для ввода комментария.
  - Placeholder: "Текст сообщения"
- **Взаимодействие**:
  - Пользователь может ввести текст.
  - Текст сохраняется в свойстве userMessage выбранной причины.
  - Секция появляется/скрывается динамически с анимацией.

---

## 3. Всплывающие и дополнительные элементы

- **Алерт об успешной отмене заказа**
  - Заголовок: "Ваш заказ отменен!"
  - Сообщение: "Вы можете создать новый заказ, дополнив его нужными товарами"
  - Кнопка: "OK"
  - Появляется после успешной отмены заказа.
  - Взаимодействие: по нажатию "OK" экран закрывается, вызывается делегат didCancel().

---

## 4. Нижняя навигационная панель

- **TabBar (UITabBar)**
  - Кнопки: Главный, Каталог, Корзина, Избранное, Меню
  - Назначение: переход между основными разделами приложения.
  - Взаимодействие: стандартное для TabBar.

---

## 5. Открываемые экраны при взаимодействии с элементами

- **Кнопка "ОТМЕНИТЬ ЗАКАЗ"** (`buttonConfirm`)
  - Открывает: Алерт об успешной отмене заказа (через showAlert).
  - После подтверждения — закрывает экран и вызывает делегат.

- **Ячейка причины отмены** (`OrderCancelReasonView`)
  - При выборе: обновляет выбранную причину, может отобразить секцию комментария.

---

## 6. Схематичное дерево иерархии экрана

```
Экран отмены заказа (OrderCancelVC)
├── Верхняя панель (UINavigationBar)
│   ├── Заголовок: "Отмена заказа {номер}" (navigationItem.title)
│   └── Кнопка назад
├── Основная область (UITableView)
│   ├── Секция 1: Информация (OrderCancelInfoView)
│   │   ├── Заголовок (labelTitle)
│   │   └── Описание (labelDescr)
│   ├── Секция 2: Причины отмены (OrderCancelReasonView)
│   │   ├── Радиокнопка (imageViewRadio)
│   │   ├── Текст причины (labelTitle)
│   │   └── Контейнер для нажатия (viewContainer)
│   └── Секция 3: Комментарий (OrderCancelMessageView) [отображается по условию]
│       └── Текстовое поле (textView)
├── Кнопка "ОТМЕНИТЬ ЗАКАЗ" (UIButton, buttonConfirm)
├── Всплывающий алерт (UIAlertController)
│   ├── Заголовок: "Ваш заказ отменен!"
│   ├── Сообщение: "Вы можете создать новый заказ, дополнив его нужными товарами"
│   └── Кнопка "OK"
└── Нижняя навигационная панель (UITabBar)
    ├── Главный
    ├── Каталог
    ├── Корзина
    ├── Избранное
    └── Меню
```