# Экран «Совместимость лекарств» поиск по штрих-коду

## Описание и назначение экрана
Экран предназначен для проверки совместимости лекарств по штрих-коду. Пользователь может отсканировать штрих-код товара с помощью камеры или загрузить изображение с устройства, чтобы получить информацию о совместимости. Экран используется в сценариях, когда требуется быстро узнать, подходит ли лекарство, например, при покупке в аптеке.

## Общая иерархия экрана
Экран реализован на основе многоуровневого представления с использованием компонентов UIKit. Основные области: верхняя панель с заголовком, основная область с камерой и элементами управления, всплывающие элементы (алерты), нижняя информационная панель.

---

## 1. Верхняя панель
### 1.1. Назначение и элементы
- **Заголовок**: «Совместимость лекарств» — отображается по центру верхней панели, информирует пользователя о назначении экрана.
- **Кнопка закрытия/сворачивания**: иконка стрелки вниз слева от заголовка. При нажатии закрывает экран и возвращает пользователя на предыдущий шаг.

**Взаимодействие:**
- Нажатие на стрелку — закрытие экрана.

---

## 2. Основная область (основной контент)

### 2.1. Секции и их элементы

#### 2.1.1. Кнопка «Загрузить изображение»
- Расположена под верхней панелью, по центру.
- Кнопка с текстом «Загрузить изображение».
- **Взаимодействие:**
  - При нажатии открывается системный выбор изображения (галерея/файлы). После выбора изображение анализируется на наличие штрих-кода.
- **Особенности:**
  - Кнопка всегда видима, если поддерживается версия iOS (11.0+), иначе скрыта.

#### 2.1.2. Область предпросмотра камеры
- Основная часть экрана занимает область предпросмотра камеры.
- В центре — прямоугольная рамка с красными углами для наведения на штрих-код.
- **Взаимодействие:**
  - При наведении камеры на штрих-код происходит автоматическое сканирование.
  - Если штрих-код успешно распознан, начинается поиск товара.
- **Особенности:**
  - При старте экрана камера автоматически активируется.
  - При ошибке или отсутствии доступа к камере появляется алерт.

#### 2.1.3. Затемнённая область (оверлей)
- Поверх предпросмотра камеры наложена полупрозрачная область с вырезом по центру (рамка для сканирования).
- **Особенности:**
  - Используется для фокусировки внимания пользователя на зоне сканирования.

#### 2.1.4. Вспомогательная подсказка
- В нижней части основной области, над нижней панелью, отображается текстовая подсказка:
  - «Наведите камеру на штрих-код товара, чтобы добавить его»
  - Слева иконка штрих-кода с красной рамкой.
- **Взаимодействие:**
  - Не интерактивна, служит для информирования пользователя.

---

## 3. Всплывающие и дополнительные элементы

### 3.1. Алерт об ошибке
- В случае, если товар по штрих-коду не найден, появляется модальное окно (алерт):
  - Заголовок: «Ошибка»
  - Сообщение: «К сожалению, товар не найден»
  - Кнопка: «ОК»
- **Взаимодействие:**
  - Нажатие на «ОК» закрывает алерт и возвращает пользователя к сканированию.
- **Особенности:**
  - Алерт появляется только при ошибке поиска товара.

---

## 4. Нижняя навигационная панель
- На экране присутствует нижняя панель с индикатором (чёрная полоса), которая визуально отделяет экран от системной панели.
- **Взаимодействие:**
  - Не содержит интерактивных элементов.

---

## 5. Схематичное дерево иерархии экрана
```
Экран «Совместимость лекарств»
├── Верхняя панель
│   ├── Заголовок «Совместимость лекарств»
│   └── Кнопка закрытия (стрелка вниз)
├── Основная область
│   ├── Кнопка «Загрузить изображение»
│   ├── Область предпросмотра камеры
│   │   ├── Рамка для сканирования (с красными углами)
│   │   └── Затемнённая область (оверлей)
│   └── Вспомогательная подсказка (текст и иконка)
├── Всплывающие элементы
│   └── Алерт об ошибке (заголовок, сообщение, кнопка)
└── Нижняя навигационная панель (индикатор)
```

---

## [Нужно дополнить]
- Неясно, какие ещё состояния могут быть у экрана (например, успешное добавление товара, загрузка и т.д.), так как на скриншотах и в коде явно не представлены.
- Не полностью раскрыта логика работы с ошибками камеры (например, если не выдано разрешение). 