# Экран «Отзывы о товаре»

## Описание и назначение экрана
Экран предназначен для просмотра и публикации отзывов о товаре. Пользователь может ознакомиться с отзывами других покупателей, увидеть ответы провизора, поставить лайк отзыву, а также оставить собственный отзыв с возможностью оценки, текстового комментария и прикрепления фотографии.

## Общая иерархия экрана
Экран реализован на базе `UIViewController` (`ItemFeedbackVC`) с использованием `UITableView` для отображения отзывов и формы отправки отзыва. В качестве ячеек и header используются кастомные вью: `ItemFeedbackView` (отзыв), `ItemFeedbackPostView` (форма отправки отзыва), а для прикрепления фото — `PhotoAttachmentView`.

---

## 1. Верхняя панель

### 1.1. Назначение и элементы
- **Заголовок** (`navigationItem.title`): «Отзывы о товаре»
- **Кнопка назад** (системная, слева)
- **Статус-бар** (системный)

**Взаимодействие:** Кнопка назад возвращает на предыдущий экран.

---

## 2. Основная область (основной контент)

### 2.1. Секции и их элементы

#### **Секция 1: Список отзывов**
- **Тип:** Секция `feedbacks` в `UITableView`
- **Ячейка:** `ItemFeedbackView`
- **Содержит:**
  - Имя пользователя (`labelTitle`)
  - Дата отзыва (`labelDate`)
  - Оценка (звезды, `CosmosView`)
  - Текст отзыва (`labelText`)
  - Блок реакции (лайк, `ItemFeedbackReactionView`)
  - Ответ провизора (если есть):
    - Имя провизора (`labelReplyMsgTitle`)
    - Дата ответа (`labelReplyMsgDate`)
    - Текст ответа (`labelReplyMsgText`)
  - Разделитель (`viewSeparator`)
- **Особенности отображения:**
  - Ответ провизора отображается только если он есть.
  - Кнопка лайка активна/неактивна в зависимости от состояния.
- **Взаимодействие:**
  - Нажатие на лайк увеличивает счетчик (если не был поставлен).
  - Список отзывов поддерживает пагинацию (подгрузка при скролле).

#### **Секция 2: Форма отправки отзыва**
- **Тип:** Секция `sendForm` в `UITableView` (header)
- **Ячейка:** `ItemFeedbackPostView`
- **Содержит:**
  - Заголовок формы (`labelTitle`)
  - Подзаголовок/инструкция (`labelSubtitle`)
  - Оценка (звезды, `CosmosView`)
  - Поле для имени (`textFieldName`)
  - Поле для текста отзыва (`textViewMessage`)
  - Блок прикрепления фото (`PhotoAttachmentView`)
    - Кнопка «Добавить фото» (`viewAddTappable`)
    - Превью фото (`imageViewPhoto`)
    - Кнопка удаления фото (`buttonRemove`)
  - Кнопка отправки (`buttonSend`)
- **Особенности отображения:**
  - Блок прикрепления фото отображает превью, если фото выбрано, иначе — кнопку добавления.
  - Кнопка удаления фото появляется только при наличии фото.
- **Взаимодействие:**
  - Ввод текста, имени, выставление оценки.
  - Добавление фото — открытие выбора фото.
  - Удаление фото — удаляет прикрепленное изображение.
  - Кнопка отправки — отправляет отзыв, после чего форма очищается и появляется алерт об успешной отправке.

---

## 3. Всплывающие и дополнительные элементы

- **Алерты** (`AlertModel`): Показываются при ошибках, успешной отправке отзыва и других событиях.
- **Индикатор загрузки** (`LoadIndicatorService`): Показывается при загрузке отзывов или отправке отзыва.

---

## 4. Нижняя навигационная панель

- **TabBar** (системный, всегда видим)
  - Кнопки: Главный, Каталог, Корзина, Избранное, Меню
  - Переход между разделами приложения

---

## 5. Схематичное дерево иерархии экрана

```
Экран «Отзывы о товаре» (ItemFeedbackVC)
├── Верхняя панель (UINavigationBar)
│   ├── Кнопка назад
│   └── Заголовок: "Отзывы о товаре"
├── Основная область (UITableView)
│   ├── Секция: Список отзывов (feedbacks)
│   │   └── Ячейка отзыва (ItemFeedbackView)
│   │       ├── Имя пользователя (labelTitle)
│   │       ├── Дата отзыва (labelDate)
│   │       ├── Оценка (CosmosView)
│   │       ├── Текст отзыва (labelText)
│   │       ├── Блок реакции (ItemFeedbackReactionView)
│   │       ├── Ответ провизора (viewReplyMsg)
│   │       │   ├── Имя провизора (labelReplyMsgTitle)
│   │       │   ├── Дата ответа (labelReplyMsgDate)
│   │       │   └── Текст ответа (labelReplyMsgText)
│   │       └── Разделитель (viewSeparator)
│   └── Секция: Форма отправки отзыва (sendForm)
│       └── Header формы (ItemFeedbackPostView)
│           ├── Заголовок формы (labelTitle)
│           ├── Подзаголовок (labelSubtitle)
│           ├── Оценка (CosmosView)
│           ├── Поле имени (textFieldName)
│           ├── Поле текста отзыва (textViewMessage)
│           ├── Блок прикрепления фото (PhotoAttachmentView)
│           │   ├── Кнопка "Добавить фото" (viewAddTappable)
│           │   ├── Превью фото (imageViewPhoto)
│           │   └── Кнопка удаления фото (buttonRemove)
│           └── Кнопка отправки (buttonSend)
├── Всплывающие элементы
│   ├── Алерты (AlertModel)
│   └── Индикатор загрузки (LoadIndicatorService)
└── Нижняя навигационная панель (TabBar)
    ├── Главный
    ├── Каталог
    ├── Корзина
    ├── Избранное
    └── Меню
```

---

## [Нужно дополнить]
- Не хватает информации о:
  - Точных названиях иконок, изображений и их поведении (например, иконка лайка, иконка удаления фото).
  - Валидации полей формы (например, обязательность имени, текста, оценки).
  - Возможности редактирования или удаления своих отзывов.
  - Поведении при ошибках сети или отсутствии отзывов.
  - Поддержке accessibility (VoiceOver, крупный шрифт и т.д.).
  - Локализации текстов (все ли тексты динамические или часть зашита в интерфейс).

--- 