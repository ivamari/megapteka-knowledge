# Экран теста / викторины

## Описание и назначение экрана

Экран предназначен для прохождения тематических тестов (викторин) пользователем. Он позволяет выбрать и пройти тест, чтобы получить индивидуальные рекомендации или узнать свой результат. Основные задачи пользователя — ознакомиться с описанием теста, начать его прохождение, а также поделиться тестом с другими.

## Общая иерархия экрана

Экран состоит из следующих основных областей:
- Верхняя панель (Navigation Bar)
- Основная область с webView, в которой отображается web-страница теста
- Нижняя навигационная панель (Tab Bar)

---

## 1. Верхняя панель

### 1.1. Назначение и элементы

- **Заголовок экрана** — отображает название текущего теста (например, "Какой у вас тип кожи?" или "Какой вы провизор?").
- **Кнопка "Назад"** — позволяет вернуться на предыдущий экран.
- **Кнопка "Поделиться"** — отображается, если для теста доступна ссылка для шаринга. При нажатии открывается системное меню для отправки ссылки.

**Особенности:**
- Заголовок динамически меняется в зависимости от выбранного теста.
- Кнопка "Поделиться" появляется только если для теста задан shareUrl.

---

## 2. Основная область (webView)

Вся основная область экрана занимает webView, в котором отображается web-страница теста. Содержимое webView полностью формируется на стороне сервера и может меняться в зависимости от типа теста.

- **Пример содержимого webView:**
    - Карточка теста с изображением, заголовком, описанием и кнопкой "Пройти тест" (как на скриншотах).
    - После нажатия на кнопку "Пройти тест" — отображение самих вопросов теста, формы для ответов и результатов.

**Примеры тестов (по скриншотам):**
- "Какой у вас тип кожи?" — тест из 5 вопросов, результат помогает подобрать правильный уход за кожей.
- "Какой вы провизор?" — тест из 10 вопросов, результат показывает, насколько вы хороший работник аптеки.

**Особенности:**
- Вся логика отображения и взаимодействия реализована на web-странице, загружаемой в webView.
- Карточка теста — лишь один из возможных вариантов отображения контента внутри webView.
- webView не скроллится самостоятельно (scroll отключён), все переходы по внешним ссылкам обрабатываются — если ссылка ведёт на внешний ресурс, открывается в браузере или через deeplink.
- URL web-страницы теста загружается через API метод с параметром code конкретного теста.

---

## 3. Всплывающие и дополнительные элементы

- **Индикатор загрузки** — отображается поверх экрана при загрузке данных теста или webView.
- **Алерт с ошибкой** — появляется, если не удалось загрузить данные теста; содержит кнопку для закрытия экрана.

---

## 4. Нижняя навигационная панель

- **Tab Bar** — стандартная нижняя панель приложения с иконками разделов: Главный, Каталог, Корзина, Избранное, Меню.
- **Взаимодействие:** переход между основными разделами приложения.

---

## 5. Схематичное дерево иерархии экрана

```
Экран "Тест/Викторина"
├── Верхняя панель
│   ├── Кнопка "Назад"
│   ├── Заголовок (название теста)
│   └── Кнопка "Поделиться" [отображается, если доступна ссылка]
├── Основная область
│   └── webView
│       └── (пример: карточка теста, вопросы, результаты — содержимое формируется на сервере)
├── Всплывающие элементы
│   ├── Индикатор загрузки [отображается при загрузке]
│   └── Алерт с ошибкой [отображается при ошибке загрузки]
└── Нижняя навигационная панель
    ├── Главный
    ├── Каталог
    ├── Корзина
    ├── Избранное
    └── Меню
```