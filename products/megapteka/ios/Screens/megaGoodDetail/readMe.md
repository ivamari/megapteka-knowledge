# Детальная страница мегатовара (пример: зубные пасты Splat)

## Описание и назначение экрана
Экран предназначен для отображения подробной информации о выбранном мегатоваре. Пользователь может ознакомиться с описанием товара, его историей, особенностями, а также просмотреть и заказать доступные варианты товара. Экран играет ключевую роль в пользовательском сценарии выбора и заказа мегатоваров, предоставляя всю необходимую информацию и инструменты для совершения покупки.

## Общая иерархия экрана
Экран построен на основе многоуровневой таблицы (UITableView), где каждая секция отвечает за отдельный блок информации или действий. В верхней части экрана располагается панель навигации с заголовком и кнопками. Основная область содержит секции с изображением, описанием и списком товаров с фильтрами. В нижней части экрана — навигационная панель приложения.

---

## 1. Верхняя панель
### 1.1. Назначение и элементы
- **Кнопка "Назад"** — возвращает пользователя на предыдущий экран.
- **Заголовок экрана** — отображает название раздела (например, "Мегатовары").
- **Кнопка "Поделиться"** — позволяет поделиться ссылкой на товар через системное меню.

**Взаимодействие:**
- Нажатие на кнопку "Назад" — возврат к предыдущему экрану.
- Нажатие на кнопку "Поделиться" — открытие системного меню шаринга.

---

## 2. Основная область (основной контент)
Основная область реализована в виде таблицы с секциями. Секции могут динамически появляться или скрываться в зависимости от состояния данных.

### 2.1. Секции и их элементы

- **Секция: Заголовок и изображение товара**
  - Назначение: отображение основного изображения и названия мегатовара.
  - Элементы:
    - Картинка товара (растягивается на ширину экрана, с сохранением пропорций)
    - Название товара (жирный крупный шрифт)
  - Особенности: изображение и заголовок всегда отображаются в верхней части экрана.

- **Секция: Описание товара**
  - Назначение: отображение полного текстового описания мегатовара, включая историю, особенности, свойства и дополнительные сведения.
  - Элементы:
    - Многострочный текст с возможностью прокрутки (если текст длинный)
    - В тексте могут быть выделения, ссылки (при наличии)
  - Особенности: отображается сразу под изображением. Может содержать HTML-стилизацию.

- **Секция: Фильтры и сортировка**
  - Назначение: позволяет пользователю выбрать сортировку (например, по популярности) и фильтровать товары по близости.
  - Элементы:
    - Кнопка сортировки (открывает список вариантов сортировки)
    - Кнопка фильтра "Рядом" (открывает выбор адреса или фильтрацию по местоположению)
  - Взаимодействие:
    - Нажатие на кнопки открывает соответствующие модальные окна или выпадающие списки.
  - Особенности: фильтры могут быть скрыты, если нет доступных вариантов.

- **Секция: Список товаров (варианты мегатовара)**
  - Назначение: отображение доступных вариантов товара с возможностью заказа.
  - Элементы (для каждой позиции):
    - Название варианта товара
    - Информационные теги (например, "ИН 00 ↑", "ИН 20 ↑")
    - Объем/дозировка
    - Производитель
    - Цена (от ... ₽)
    - Количество аптек, где доступен товар
    - Кнопка "В корзину"
    - Кнопка "В корзину"
    - Кнопка "Избранное" (сердечко)
  - Взаимодействие:
    - Нажатие на "В корзину" — добавление товара в корзину
    - Нажатие на сердечко — добавление/удаление из избранного
  - Особенности: кнопки могут меняться в зависимости от наличия товара и состояния заказа.

---

## 3. Всплывающие и дополнительные элементы
- **Алерты и сообщения об ошибках**
  - Назначение: информирование пользователя о проблемах с загрузкой, отсутствии товара, ошибках сети и т.д.
  - Условия показа: отображаются поверх основного контента при возникновении соответствующих событий.
  - Взаимодействие: пользователь может закрыть алерт или повторить действие.
- **Модальные окна выбора сортировки и адреса**
  - Назначение: позволяют выбрать способ сортировки или адрес для фильтрации товаров.
  - Условия показа: открываются по нажатию на соответствующие кнопки фильтров.

---

## 4. Нижняя навигационная панель
- **Панель навигации приложения**
  - Назначение: обеспечивает быстрый переход между основными разделами приложения (Главный, Каталог, Корзина, Избранное, Меню).
  - Элементы:
    - Кнопки навигации с иконками и подписями
  - Взаимодействие: нажатие на кнопку переводит пользователя в соответствующий раздел приложения.

---

## 5. Схематичное дерево иерархии экрана
```
Детальная страница мегатовара
├── Верхняя панель
│   ├── Кнопка "Назад"
│   ├── Заголовок экрана
│   └── Кнопка "Поделиться"
├── Основная область (UITableView)
│   ├── Секция: Заголовок и изображение товара
│   │   ├── Картинка товара
│   │   └── Название товара
│   ├── Секция: Описание товара
│   │   └── Многострочный текст (единый блок с описанием, историей, особенностями и свойствами)
│   ├── Секция: Фильтры и сортировка
│   │   ├── Кнопка сортировки
│   │   └── Кнопка фильтра "Рядом"
│   └── Секция: Список товаров
│       ├── Карточка товара 1
│       │   ├── Название варианта
│       │   ├── Информационные теги
│       │   ├── Объем/дозировка
│       │   ├── Производитель
│       │   ├── Цена
│       │   ├── Количество аптек
│       │   ├── Кнопка "В корзину"
│       │   └── Кнопка "Избранное"
│       └── ...
├── Всплывающие элементы
│   ├── Алерты/сообщения об ошибках
│   └── Модальные окна сортировки/выбора адреса
└── Нижняя навигационная панель
    ├── Кнопка "Главный"
    ├── Кнопка "Каталог"
    ├── Кнопка "Корзина"
    ├── Кнопка "Избранное"
    └── Кнопка "Меню"
```

---

## [Нужно дополнить]
- Не хватает информации о точных условиях показа описания (например, если оно отсутствует).
- Неясно, какие именно действия доступны в алертах и какие типы ошибок могут быть показаны.
- Не хватает точного описания структуры карточки товара (например, порядок тегов, отображение скидок и т.д.), если они есть.
- Не хватает информации о возможных дополнительных элементах, которые могут появляться в зависимости от состояния экрана (например, индикаторы загрузки, пустые состояния). 
