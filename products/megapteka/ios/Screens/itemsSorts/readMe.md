# Экран сортировки товаров (ItemsSortsVC)

## Описание и назначение экрана

Экран предназначен для выбора способа сортировки списка товаров в каталоге. Пользователь может выбрать один из предложенных вариантов сортировки (по популярности, цене, названию и т.д.), после чего список товаров будет отсортирован соответствующим образом. Экран вызывается в виде модального окна (bottom sheet) поверх основного контента.

## Общая иерархия экрана

Экран реализован на базе `UIViewController` (`ItemsSortsVC`), который отображается внутри модального контейнера (`ModalCardVC`). Основной контент представлен таблицей (`UITableView`), где каждая строка — вариант сортировки. Заголовок таблицы реализован через отдельное представление (`ModalCardHeaderView`). Взаимодействие с элементами происходит через нажатие на строки таблицы.

---

## 1. Верхняя панель

### 1.1. Назначение и элементы

- **Заголовок модального окна** (`ModalCardHeaderView`)
  - Отображает название экрана сортировки (например, "Сортировать результаты").
  - Реализован через кастомный UIView (`ModalCardHeaderView`), содержит только один элемент — заголовок (`UILabel`).
  - Заголовок задаётся динамически через модель.
  - Фон совпадает с основным цветом модального окна.
  - Не содержит кнопок закрытия — закрытие осуществляется свайпом вниз или выбором варианта.

---

## 2. Основная область (основной контент)

### 2.1. Таблица вариантов сортировки (`UITableView`)

- **Структура**: одна секция, заголовок секции — `ModalCardHeaderView`, строки — варианты сортировки.
- **Секции**:
  - **Заголовок секции**: отображает текст "Сортировать результаты" (или аналогичный, задаётся через `TextProvider.TitleVC.itemsSort`).
  - **Ячейки сортировки**: каждая строка — отдельный вариант сортировки (например, "По популярности", "Сначала дешевле", "Сначала дороже", "По названию А–Я", "По названию Я–А").
    - Используется кастомная ячейка (`ItemsSortView`).

#### Элементы ячейки сортировки (`ItemsSortView`):

- **labelTitle (UILabel)**: название варианта сортировки.
- **imageViewSelection (UIImageView)**: иконка выбора (галочка), отображается только у выбранного варианта.
- **viewSeparator (UIView)**: разделительная линия между вариантами.

##### Взаимодействие:
- Нажатие на строку приводит к выбору соответствующего варианта сортировки.
- После выбора:
  - Галочка появляется у выбранного варианта.
  - Вызывается делегат `didSelectSort`, который сообщает о выборе.
  - Модальное окно автоматически закрывается.
- Возможен скролл, если вариантов больше, чем помещается на экране.

##### Особенности:
- Только один вариант может быть выбран одновременно.
- Состояние выбранного варианта сохраняется при открытии экрана (отмечается галочкой).
- Высота ячейки фиксированная (60pt).
- Список вариантов и их порядок задаются через модель `SortInfo`.

---

## 3. Всплывающие и дополнительные элементы

- **Модальное окно** (`ModalCardVC`)
  - Экран отображается как модальное окно с закруглёнными краями (bottom sheet).
  - Закрытие возможно свайпом вниз или после выбора варианта.
  - Нижняя панель модального окна (`viewBottom`) скрыта для этого экрана.
  - Высота окна автоматически подстраивается под контент.

---

## 4. Нижняя навигационная панель

- На экране отсутствует нижняя навигационная панель.

---

## 5. Схематичное дерево иерархии экрана

```
Экран сортировки товаров (ItemsSortsVC)
└── Модальное окно (ModalCardVC)
    ├── Верхняя панель (ModalCardHeaderView)
    │   └── Заголовок (UILabel)
    └── Основная область
        └── Таблица вариантов сортировки (UITableView)
            ├── Секция
            │   ├── Заголовок секции (ModalCardHeaderView)
            │   │   └── Заголовок (UILabel)
            │   └── Ячейки сортировки (ItemsSortView)
            │       ├── Название варианта (labelTitle: UILabel)
            │       ├── Галочка выбора (imageViewSelection: UIImageView)
            │       └── Разделитель (viewSeparator: UIView)
```

---

## [Нужно дополнить]

- Не хватает информации о:
  - Точных текстах заголовка и вариантов сортировки (они задаются через модель и локализацию).
  - Внешнем виде иконки выбора (галочки) — используется изображение `checkMark`, но его внешний вид не описан.
  - Возможности кастомизации порядка сортировок или их количества (определяется моделью `SortInfo`).
  - Анимации появления/закрытия модального окна (реализуется на уровне контейнера, подробности не видны).
  - Взаимодействии с VoiceOver и доступности элементов (accessibility). 