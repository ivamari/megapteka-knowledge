# Экран «Консультация провизора»

## Описание и назначение экрана
Экран предназначен для получения консультации у дежурного провизора. Пользователь может задать вопрос о товаре, способе его применения или возможных аналогах. В зависимости от доступности провизора (онлайн/офлайн) форма для отправки вопроса меняется. Экран позволяет отправить вопрос напрямую в чат (если провизор онлайн) или оставить контактные данные для обратной связи (если провизор офлайн).

## Общая иерархия экрана
Экран реализован на базе UIViewController (`ChatRequestVC`) с использованием XIB-файла (`ChatRequestVC.xib`). Основные области: верхняя панель (навигация), основная область с формой вопроса, всплывающие элементы (алерты), нижняя навигационная панель.

---

## 1. Верхняя панель
### 1.1. Назначение и элементы
- **Заголовок** (UINavigationBar, свойство navigationItem.title)
  - Текст: «Консультация провизора»
  - Назначение: информирует пользователя о текущем разделе
- **Кнопка «Назад»** (UINavigationBarButton)
  - Назначение: возвращает пользователя на предыдущий экран
  - Взаимодействие: нажатие приводит к возврату назад

---

## 2. Основная область (основной контент)
Основная область реализована с помощью вертикального UIStackView (`StackViewPassthroughHit`), вложенного в UIScrollView (`scrollView`). Внутри стека размещены все основные элементы формы.

### 2.1. Секции и их элементы
#### 2.1.1. Статус провизора
- **Иконка статуса** (`UIImageView`, imageViewOperatorStatus)
  - Зеленый кружок — провизор онлайн
  - Красный кружок — провизор офлайн
  - Логика: цвет иконки зависит от статуса провизора
- **Текст статуса** (`UILabel`, labelOperatorStatus)
  - «Сейчас в сети» (онлайн)
  - «Сейчас не в сети» (офлайн)
  - Цвет текста зависит от статуса

#### 2.1.2. Описание и инструкции
- **Описание** (`UITextView`, textViewDescription)
  - Текст зависит от статуса:
    - Онлайн: «Если у вас возник вопрос о товаре... Среднее время ответа провизора в рабочее время — 40 секунд.»
    - Офлайн: «Если у вас возник вопрос о товаре... Не забудьте указать контактные данные для связи.»
  - Не редактируется пользователем

#### 2.1.3. Форма для ввода данных
- **Поле «Телефон»** (`PhoneTextField`, textFieldPhone)
  - Показывается только если провизор офлайн
  - Валидация: обязательна при офлайн-режиме
  - Взаимодействие: ввод номера телефона
- **Поле «E-mail»** (`TextField`, textFieldEmail)
  - Показывается только если провизор офлайн
  - Валидация: обязательна при офлайн-режиме
  - Взаимодействие: ввод e-mail
- **Поле «Ваш вопрос»** (`ViTextView`, textViewQuestion)
  - Всегда отображается
  - Валидация: не может быть пустым
  - Взаимодействие: ввод текста вопроса

#### 2.1.4. Кнопка отправки
- **Кнопка «ОТПРАВИТЬ ВОПРОС»** (`UIButton`, buttonSend)
  - Всегда отображается
  - Активна, если заполнены все обязательные поля
  - Взаимодействие: отправляет вопрос (онлайн — сразу в чат, офлайн — с контактными данными)
  - После отправки может открываться чат или показываться подтверждение

#### 2.1.5. Градиентный фон внизу формы
- **Градиентный фон** (`GradientView`, viewBottomGradient)
  - Визуальное отделение нижней части формы

---

## 3. Всплывающие и дополнительные элементы
- **Алерты** (`AlertModel`)
  - Показываются при ошибках валидации (например, неверный телефон, e-mail, пустой вопрос)
  - Содержат текст ошибки и кнопку для возврата к полю ввода
  - Взаимодействие: после закрытия алерта фокус возвращается к соответствующему полю

---

## 4. Нижняя навигационная панель
- **TabBar** (UITabBar)
  - Кнопки: Главный, Каталог, Корзина, Избранное, Меню
  - Взаимодействие: переход между основными разделами приложения

---

## 5. Открываемые экраны при взаимодействии с элементами
- **Кнопка «ОТПРАВИТЬ ВОПРОС»**
  - Если провизор онлайн: открывается чат (экран чата, кодовое имя — ChatVC)
  - Если провизор офлайн: открывается экран чата (ChatVC), сообщение отправляется на экране чата с помощью API-метода
- **Кнопка «Назад»**
  - Возвращает на предыдущий экран

---

## 6. Схематичное дерево иерархии экрана
```
Экран «Консультация провизора» (ChatRequestVC)
├── Верхняя панель (UINavigationBar)
│   ├── Кнопка «Назад»
│   └── Заголовок
├── Основная область (UIScrollView)
│   └── Вертикальный стек (StackViewPassthroughHit)
│       ├── Блок статуса провизора
│       │   ├── Иконка статуса (UIImageView)
│       │   └── Текст статуса (UILabel)
│       ├── Описание (UITextView)
│       ├── [Телефон (PhoneTextField)]
│       ├── [E-mail (TextField)]
│       ├── Поле вопроса (ViTextView)
│       ├── Кнопка отправки (UIButton)
│       └── Градиентный фон (GradientView)
├── Всплывающие элементы
│   └── Алерты (AlertModel)
└── Нижняя навигационная панель (UITabBar)
    ├── Главный
    ├── Каталог
    ├── Корзина
    ├── Избранное
    └── Меню
```

---

## [Нужно дополнить]
- Точные тексты для описания и статусов, если они формируются динамически
- Возможные дополнительные состояния или ошибки, не отражённые на скриншотах 