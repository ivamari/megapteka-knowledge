# Страница Редактирования/Создания Мегатовара (EditComponent)

## Обзор Страницы

**Назначение:** Эта страница предназначена для создания и редактирования "мегатоваров".

**Основные функции:**
-   Заполнение основной информации (название, активность, сортировка).
-   Добавление описаний (краткое и детальное).
-   Загрузка изображений (превью и детальное).
-   Привязка обычных товаров к мегатоавру через их ID.

## Элементы Пользовательского Интерфейса (UI Elements)

| Название элемента | Назначение/функция | Возможные состояния | Взаимодействие пользователя |
| --- | --- | --- | --- |
| Поле "Название" | Ввод названия мегатовара. | - | Ввод текста. |
| Чекбокс "Активность" | Управляет активностью мегатовара. | - Выбран<br>- Не выбран | Нажатие. |
| Поле "Сортировка" | Установка порядка отображения. | - | Ввод числа. |
| Поле "Картинка для анонса" | Загрузка изображения для превью. | - | Выбор файла. |
| Поле "Детальная картинка" | Загрузка основного изображения. | - | Выбор файла. |
| Поле "Описание для анонса" | Ввод краткого описания. | - | Ввод текста. |
| Поле "Детальное описание" | Ввод полного описания с помощью WYSIWYG-редактора. | - | Ввод и форматирование текста. |
| Поле "Товары" | Ввод ID обычных товаров, входящих в мегатовар (через запятую или с новой строки). | - | Ввод текста. |
| Кнопки "Сохранить", "Применить", "Отменить" | Управление сохранением изменений. | - | Нажатие. |

## Пользовательские Сценарии (User Flows)

1.  **Создание нового мегатовара:**
    -   Пользователь открывает пустую форму.
    -   Заполняет все необходимые поля.
    -   Добавляет ID товаров.
    -   Нажимает "Сохранить" или "Применить".

2.  **Редактирование существующего мегатовара:**
    -   Пользователь открывает страницу с `id` мегатовара в URL.
    -   Форма заполняется данными.
    -   Пользователь вносит изменения.
    -   Нажимает "Сохранить" или "Применить".

## Навигация

**Переходы с текущей страницы:**
-   Возврат на страницу списка мегатоваров (`/items/goods/list`).
-   При создании нового мегатовара и сохранении, происходит переход на страницу редактирования этого же мегатовара (`/items/goods/edit/:id`).

**Переходы на текущую страницу:**
-   Со страницы списка для редактирования: `/items/goods/edit/:id`.
-   Со страницы списка для создания: `/items/goods/edit`.

## Отображаемые Данные

**Получаемые данные:**
-   Детальная информация о мегатоварe (при редактировании).
    -   **REST эндпоинт:** `GET /goods/:id`
    -   **Сервис:** `ApiGoodsService`
    -   **Метод сервиса:** `getDetail()`

**Отправляемые данные:**
-   Полная модель мегатовара со всеми полями формы.
    -   **REST эндпоинт:** `POST /goods` (создание) или `PUT /goods` (обновление).
    -   **Сервис:** `ApiGoodsService`
    -   **Метод сервиса:** `create()` или `update()`

## Особые Состояния/Логика

-   **Загрузка данных:** При редактировании, во время загрузки информации, на странице отображается индикатор загрузки.
-   **Валидация формы:** Поля "Название", "Детальная картинка", "Превью картинка" являются обязательными.
-   **Определение метода сохранения:** В зависимости от наличия `id` в данных формы, вызывается либо метод создания (`create`), либо метод обновления (`update`).
