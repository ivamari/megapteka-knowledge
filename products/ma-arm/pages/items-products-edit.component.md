# Страница Редактирования/Создания Продукта (EditComponent)

## Обзор Страницы

**Назначение:** Эта страница предназначена для создания и редактирования "продуктов".

**Основные функции:**
-   Заполнение основной информации (название, активность, раздел, бренд).
-   Загрузка изображения.
-   Привязка обычных товаров.
-   Настройка SEO-параметров и названия в родительном падеже.
-   Добавление ссылки на видеоинструкцию.
-   Управление свойствами продукта (пары "ключ-значение").

## Элементы Пользовательского Интерфейса (UI Elements)

| Название элемента | Назначение/функция | Возможные состояния | Взаимодействие пользователя |
| --- | --- | --- | --- |
| Поле "Название" | Ввод названия продукта. | - | Ввод текста. |
| Чекбокс "Активность" | Управляет активностью продукта. | - Выбран<br>- Не выбран | Нажатие. |
| Поле "Раздел" | Выбор раздела, к которому относится продукт. | - | Поиск и выбор из списка. |
| Поле "Бренд" | Выбор бренда (производителя) продукта. | - | Поиск и выбор из списка. |
| Поле "Картинка" | Загрузка изображения для продукта. | - | Выбор и обрезка файла. |
| Поле "Список товаров" | Ввод ID обычных товаров, связанных с продуктом (через запятую). | - | Ввод текста. |
| SEO-поля | Ввод названий для `title`, `h1` и в родительном падеже. | - | Ввод текста. |
| Поле "Видеоинструкция" | Ввод URL видеоинструкции на YouTube. | - | Ввод текста. |
| Таблица "Свойства" | Добавление, редактирование и удаление свойств продукта (название, значение, сортировка). | - | Ввод данных в таблицу. |
| Кнопки "Сохранить", "Применить", "Отменить" | Управление сохранением изменений. | - | Нажатие. |

## Пользовательские Сценарии (User Flows)

1.  **Создание нового продукта:**
    -   Пользователь открывает пустую форму.
    -   Заполняет все необходимые поля.
    -   Добавляет свойства в таблицу.
    -   Нажимает "Сохранить" или "Применить".

2.  **Редактирование существующего продукта:**
    -   Пользователь открывает страницу с `id` продукта в URL.
    -   Форма заполняется данными.
    -   Пользователь вносит изменения.
    -   Нажимает "Сохранить" или "Применить".

## Навигация

**Переходы с текущей страницы:**
-   Возврат на страницу списка продуктов (`/items/products/list`).

**Переходы на текущую страницу:**
-   Со страницы списка для редактирования: `/items/products/edit/:id`.
-   Со страницы списка для создания: `/items/products/edit`.

## Отображаемые Данные

**Получаемые данные:**
-   Детальная информация о продукте (при редактировании).
    -   **REST эндпоинт:** `GET /products/:id`
    -   **Сервис:** `ApiProductsService`
    -   **Метод сервиса:** `get()`

**Отправляемые данные:**
-   Полная модель продукта со всеми полями формы.
    -   **REST эндпоинт:** `POST /products` (создание) или `PUT /products` (обновление).
    -   **Сервис:** `EditService`
    -   **Метод сервиса:** `saveProduct()`

## Особые Состояния/Логика

-   **Загрузка данных:** При редактировании, во время загрузки информации, на странице отображается индикатор загрузки.
-   **Валидация формы:** Поля "Название", "Название в родительном падеже" и все поля в таблице свойств являются обязательными.
-   **Асинхронный поиск:** Для полей "Раздел" и "Бренд" реализован асинхронный поиск по мере ввода.
-   **Преобразование данных:** Список ID связанных товаров преобразуется из строки в массив перед отправкой на сервер.
