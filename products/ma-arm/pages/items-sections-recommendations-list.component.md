# Страница Рекомендаций Разделов (ListComponent)

## Обзор Страницы

**Назначение:** Эта страница отображает список товаров, для которых система автоматически подобрала один или несколько подходящих разделов (категорий). Оператор должен подтвердить или отклонить предложенную связку.

**Основные функции:**
-   Просмотр списка товаров с рекомендованными разделами.
-   Редактирование названия товара "на лету".
-   Выбор правильного раздела из списка предложенных (если их несколько).
-   Подтверждение (применение) рекомендации.
-   Отклонение рекомендации.

## Элементы Пользовательского Интерфейса (UI Elements)

| Название элемента | Назначение/функция | Возможные состояния | Взаимодействие пользователя |
| --- | --- | --- | --- |
| Таблица с рекомендациями | Отображает список товаров и предложенные для них разделы. | - Загрузка<br>- Заполнено<br>- Пусто | Прокрутка. |
| Строка таблицы | Отображает один товар и варианты разделов для него. | - | - |
| Поле "Название" | Редактируемое поле с названием товара. | - | Клик для редактирования, ввод текста. |
| Выпадающий список "Раздел" | Позволяет выбрать один раздел из нескольких предложенных системой. | - Отображается, если предложено > 1 раздела. | Выбор элемента. |
| Текстовое поле "Раздел" | Отображает название единственного предложенного раздела. | - Отображается, если предложен 1 раздел. | - |
| Кнопка "Применить" | Подтверждает связку между товаром и выбранным разделом. | - | Нажатие. |
| Кнопка "Отклонить" | Отклоняет связку между товаром и выбранным разделом. | - | Нажатие. |
| Компонент "Фильтр" | Позволяет фильтровать список. | - | Ввод данных, выбор опций. |
| Компонент "Пагинация" | Позволяет переключаться между страницами списка. | - | Нажатие на номера страниц. |

## Пользовательские Сценарии (User Flows)

1.  **Подтверждение рекомендации:**
    -   Пользователь открывает страницу.
    -   Находит строку с товаром.
    -   Если предложено несколько разделов, выбирает правильный из выпадающего списка.
    -   Нажимает кнопку "Применить".
    -   После подтверждения, рекомендация принимается, и список обновляется.

2.  **Отклонение рекомендации:**
    -   Пользователь открывает страницу.
    -   Находит строку с товаром.
    -   Если предложено несколько разделов, выбирает тот, который считает неверным.
    -   Нажимает кнопку "Отклонить".
    -   После подтверждения, рекомендация отклоняется, и список обновляется.

3.  **Редактирование названия товара:**
    -   Пользователь кликает на название товара в таблице.
    -   Вносит изменения и сохраняет их.
    -   Название товара обновляется.

## Навигация

**Переходы с текущей страницы:**
-   Нет.

**Переходы на текущую страницу:**
-   Прямой переход по URL `/items/sections-recommendations/list`.

## Отображаемые Данные

**Получаемые данные:**
-   Список товаров с рекомендованными разделами.
    -   **REST эндпоинт:** `GET /groups/recommendations`
    -   **Сервис:** `ApiGroupsRecommendationsService`
    -   **Метод сервиса:** `getList()`

**Отправляемые данные:**
-   Подтверждение рекомендации.
    -   **REST эндпоинт:** `POST /groups/recommendations/accept`
    -   **Сервис:** `ApiGroupsRecommendationsService`
    -   **Метод сервиса:** `accept()`
    -   **Параметры:** `item_id`, `group_id`.
-   Отклонение рекомендации.
    -   **REST эндпоинт:** `POST /groups/recommendations/reject`
    -   **Сервис:** `ApiGroupsRecommendationsService`
    -   **Метод сервиса:** `reject()`
    -   **Параметры:** `item_id`, `group_id`.
-   Обновление названия товара.
    -   **REST эндпоинт:** `PUT /items`
    -   **Сервис:** `ApiItemsService`
    -   **Метод сервиса:** `put()`

## Особые Состояния/Логика

-   **Загрузка данных:** Во время загрузки списка с сервера, на странице отображается индикатор загрузки.
-   **Обновление по параметрам:** Список обновляется при изменении параметров в URL (фильтрация, пагинация).
-   **Подтверждение действий:** Перед применением или отклонением рекомендации, система запрашивает подтверждение у пользователя.
-   **Валидация:** Перед отправкой действия на сервер, система проверяет, что раздел выбран (если было несколько вариантов).
-   **Динамический контрол:** Для каждой строки в таблице создается свой `FormControl` для управления выбором раздела.
