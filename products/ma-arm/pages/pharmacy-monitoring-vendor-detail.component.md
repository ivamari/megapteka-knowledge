# Страница Детальной Настройки Вендора (VendorDetailComponent)

## Обзор Страницы

**Назначение:** Эта страница является центром управления для конкретного вендора в системе Аптечного Мониторинга. Она позволяет управлять услугами, операторами и товарами, связанными с этим вендором.

**Основные функции:**
-   **Управление услугами:** Включение и отключение услуг, предоставляемых вендором.
-   **Управление операторами:** Просмотр списка операторов, создание новых (с автоматической генерацией пароля) и удаление существующих.
-   **Управление товарами:**
    -   Просмотр списка основных товаров для мониторинга.
    -   Добавление нового основного товара.
    -   Удаление основного товара.
    -   Массовое удаление всех товаров.
    -   Добавление товаров-конкурентов для каждого основного товара.
    -   Удаление товаров-конкурентов.
-   Удаление самого вендора.

## Элементы Пользовательского Интерфейса (UI Elements)

| Название элемента | Назначение/функция | Возможные состояния | Взаимодействие пользователя |
| --- | --- | --- | --- |
| Блок "Услуги" | Список переключателей для активации/деактивации услуг. | - | Нажатие на переключатель. |
| Блок "Операторы" | Список операторов с их логинами и паролями. | - | - |
| Кнопка "Добавить" (Операторы) | Открывает форму для создания нового оператора. | - | Нажатие. |
| Кнопка "Удалить" (Операторы) | Удаляет оператора. | - | Нажатие. |
| Блок "Товары" | Иерархический список основных товаров и их конкурентов. | - | - |
| Кнопка "Добавить" (Товары) | Открывает форму для добавления нового основного товара по ID. | - | Нажатие. |
| Кнопка "Удалить все" (Товары) | Удаляет все товары, связанные с вендором. | - | Нажатие. |
| Кнопка "Добавить конкурентов" | Открывает форму для массового добавления товаров-конкурентов по их ID. | - | Нажатие. |
| Кнопка "Удалить основной/конкурента" | Удаляет соответствующий товар из списка мониторинга. | - | Нажатие. |

## Пользовательские Сценарии (User Flows)

1.  **Настройка нового вендора:**
    -   Пользователь попадает на эту страницу после создания вендора.
    -   Включает необходимые услуги.
    -   Создает одного или нескольких операторов, записывая их пароли.
    -   Добавляет основные товары для мониторинга.
    -   Для каждого основного товара добавляет список товаров-конкурентов.

2.  **Удаление оператора:**
    -   Пользователь находит в списке ненужного оператора.
    -   Нажимает "Удалить".
    -   После подтверждения, оператор удаляется.

## Навигация

**Переходы с текущей страницы:**
-   `..` (на уровень выше): Возврат на страницу списка вендоров.

**Переходы на текущую страницу:**
-   Со страницы списка вендоров: `/pharmacy-monitoring/vendors/:id`.
-   Со страницы создания вендора: `/pharmacy-monitoring/vendors/:id` (после успешного создания).

## Отображаемые Данные

**Получаемые данные:**
-   Детальная информация о вендоре: `GET /pm/vendors/detail`
-   Список услуг: `GET /pm/vendors/services/list`
-   Список операторов: `GET /pm/operators/list`
-   Список товаров: `GET /pm/items/list`

**Отправляемые данные:**
-   Обновление статуса услуги: `POST /pm/vendors/services/update`
-   Создание оператора: `POST /pm/operators/create`
-   Удаление оператора: `DELETE /pm/operators`
-   Создание основного товара: `POST /pm/items/create`
-   Удаление основного товара: `DELETE /pm/items`
-   Создание товаров-конкурентов: `POST /pm/items/competitors/create`
-   Удаление товара-конкурента: `DELETE /pm/items/competitors`

## Особые Состояния/Логика

-   **Асинхронная загрузка:** Блоки "Услуги", "Операторы" и "Товары" загружаются независимо друг от друга.
-   **Автосохранение услуг:** Изменение состояния переключателя услуги немедленно отправляет запрос на сервер без необходимости нажимать общую кнопку "Сохранить".
-   **Подтверждение удаления:** Все операции по удалению (вендора, оператора, товаров) требуют подтверждения через `swal`.
-   **Индикация загрузки:** Каждая операция, требующая времени (создание, удаление), имеет свой индикатор загрузки, не блокируя остальной интерфейс.
