# Страница Связок от Мерчантов (PricesConnectionsComponent)

## Обзор Страницы

**Назначение:** Эта страница предназначена для просмотра и управления связками между эталонным товаром Мегаптеки и товарами от мерчантов на основе различных кодов (ШК, Протек, Катрен и т.д.) и UUID.

**Основные функции:**
-   Поиск информации о связках по ID эталонного товара.
-   Просмотр и редактирование кодов (ШК, Протек, Катрен, ЕГК, ЕАС) для эталонного товара.
-   Просмотр "жестких" связок по UUID и их удаление.
-   Просмотр списка товаров от мерчантов, которые связаны с эталоном, с отображением их данных и кодов.
-   Возможность отключить связку для конкретной аптечной сети.

## Элементы Пользовательского Интерфейса (UI Elements)

| Название элемента | Назначение/функция | Возможные состояния | Взаимодействие пользователя |
| --- | --- | --- | --- |
| Поле "Ид товара" | Ввод ID эталонного товара для поиска. | - | Ввод числа. |
| Кнопка "Поиск" | Запуск поиска информации о связках. | - Активная<br>- Неактивная (во время загрузки) | Нажатие. |
| Блок "Данные эталона" | Отображает информацию об эталонном товаре и его коды. | - | Редактирование кодов. |
| Поля с кодами | Редактируемые поля для кодов ШК, Протек, Катрен, ЕГК, ЕАС. | - | Клик для редактирования, ввод текста. |
| Таблица "Связки по uuid" | Отображает "жесткие" связки по UUID товара. | - | Нажатие кнопки "Удалить". |
| Таблица "Остатки" | Отображает список товаров от мерчантов, связанных с эталоном. | - | Нажатие кнопки "Отключить". |
| Кнопка "Удалить" | Удаляет "жесткую" связку по UUID. | - | Нажатие. |
| Кнопка "Отключить" | Перенаправляет на страницу отключения товара в конкретной сети. | - | Нажатие. |

## Пользовательские Сценарии (User Flows)

1.  **Поиск и просмотр связок:**
    -   Пользователь вводит ID товара в поле "Ид товара".
    -   Пользователь нажимает "Поиск".
    -   Система загружает и отображает всю информацию о связках для данного товара.

2.  **Редактирование кодов эталона:**
    -   Пользователь кликает на поле с кодами (например, ШК).
    -   Вводит новые коды через запятую и сохраняет.
    -   Данные эталона обновляются.

3.  **Удаление жесткой связки:**
    -   Пользователь находит нужную связку в таблице "Связки по uuid".
    -   Нажимает кнопку "Удалить".
    -   После подтверждения, связка удаляется.

## Навигация

**Переходы с текущей страницы:**
-   `/items/search/:id`: Переход на страницу эталонного товара.
-   `/items/disable-networks/edit?item_id=:item_id&network_id=:network_id`: Переход на страницу отключения товара в сети.

**Переходы на текущую страницу:**
-   Прямой переход по URL `/items/prices-connections`.
-   Может быть передан параметр `item_id` в URL для автоматического поиска при загрузке.

## Отображаемые Данные

**Получаемые данные:**
-   Информация о связках для товара.
    -   **REST эндпоинт:** `GET /items/prices/connections`
    -   **Сервис:** `ApiItemsPricesService`
    -   **Метод сервиса:** `connections()`

**Отправляемые данные:**
-   Редактирование кодов эталона.
    -   **REST эндпоинт:** `POST /items/prices/connections-edit`
    -   **Сервис:** `ApiItemsPricesService`
    -   **Метод сервиса:** `connectionsEdit()`
-   Удаление жесткой связки.
    -   **REST эндпоинт:** `POST /items/prices/connections-uuid-delete`
    -   **Сервис:** `ApiItemsPricesService`
    -   **Метод сервиса:** `connectionsUuidDelete()`

## Особые Состояния/Логика

-   **Подсветка кодов:** В таблице "Остатки" коды, которые совпадают с кодами эталона, подсвечиваются.
-   **Загрузка данных:** Во время поиска и выполнения действий на странице отображаются индикаторы загрузки.
-   **Подтверждение удаления:** Перед удалением жесткой связки система запрашивает подтверждение.
-   **Работа с URL:** Компонент может принимать `item_id` из параметров URL и автоматически выполнять поиск при инициализации. При поиске `item_id` также добавляется в URL.
