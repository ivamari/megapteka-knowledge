# Страница Массового Создания Отзывов (AddComponent)

## Обзор Страницы

**Назначение:** Эта страница предназначена для массового создания "шаблонных" отзывов. Оператор выбирает "продукт", и система генерирует форму для написания отзывов на все товары, входящие в этот продукт.

**Основные функции:**
-   Выбор продукта.
-   Автоматическая генерация полей для написания отзывов на связанные товары.
-   Ввод данных для каждого отзыва (автор, оценка, текст).
-   Массовое сохранение всех заполненных отзывов.

## Элементы Пользовательского Интерфейса (UI Elements)

| Название элемента | Назначение/функция | Возможные состояния | Взаимодействие пользователя |
| --- | --- | --- | --- |
| Поле "Продукт" | Поиск и выбор "продукта", для товаров которого будут создаваться отзывы. | - | Ввод текста для поиска, выбор из списка. |
| Блок "Отзыв" | Группа полей для одного отзыва (на один товар). | - Появляется после выбора продукта. | - |
| Поле "Имя автора" | Ввод имени автора отзыва. | - Предзаполнено из шаблона. | Ввод текста. |
| Поле "Оценка" | Ввод оценки от 1 до 5. | - | Ввод числа. |
| Поле "Текст отзыва" | Ввод текста отзыва. | - | Ввод текста. |
| Кнопки "Сохранить", "Применить", "Отменить" | Управление сохранением всех введенных отзывов. | - | Нажатие. |

## Пользовательские Сценарии (User Flows)

1.  **Создание отзывов для продукта:**
    -   Пользователь открывает страницу.
    -   Выбирает "продукт" из списка.
    -   Страница динамически генерирует список полей для каждого товара, связанного с этим продуктом. Поля "Имя автора" и "Дата" предзаполняются из шаблона.
    -   Пользователь заполняет поля "Оценка" и "Текст отзыва" для тех товаров, для которых хочет создать отзыв.
    -   Нажимает "Сохранить" или "Применить".
    -   Система сохраняет только те отзывы, которые были полностью заполнены.

## Навигация

**Переходы с текущей страницы:**
-   Возврат на страницу списка отзывов (`/content/feedback-items`) при успешном сохранении (через кнопку "Сохранить").

**Переходы на текущую страницу:**
-   Со страницы списка отзывов: `/content/feedback-items/add`.

## Отображаемые Данные

**Получаемые данные:**
-   Список продуктов (для поиска).
    -   **REST эндпоинт:** `GET /products`
    -   **Сервис:** `AddService`
    -   **Метод сервиса:** `getProducts()`
-   Список шаблонов для отзывов (на основе выбранного продукта).
    -   **REST эндпоинт:** `GET /products/feedback/template`
    -   **Сервис:** `AddService`
    -   **Метод сервиса:** `getTemplates()`

**Отправляемые данные:**
-   Массив объектов, представляющих каждый заполненный отзыв.
    -   **REST эндпоинт:** `POST /products/feedback`
    -   **Сервис:** `AddService`
    -   **Метод сервиса:** `save()`

## Особые Состояния/Логика

-   **Динамическая генерация формы:** Ключевая логика страницы. После выбора продукта, `FormArray` с отзывами генерируется динамически на основе полученного списка шаблонов.
-   **Фильтрация перед отправкой:** Перед отправкой на сервер, массив отзывов фильтруется, и отправляются только те, которые были полностью и корректно заполнены (имя, дата, ID товара, текст, оценка от 1 до 5).
-   **Валидация:** На поля "Оценка" установлено ограничение (число от 1 до 5).
