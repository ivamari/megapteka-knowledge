# Страница Поиска и Объединения Товаров (SearchUnionComponent)

## Обзор Страницы

**Назначение:** Эта страница предназначена для поиска товаров, их массового редактирования, объединения и добавления в группы.

**Основные функции:**
-   Поиск и фильтрация товаров.
-   Просмотр списка товаров с основной информацией.
-   Массовый выбор товаров.
-   Выполнение групповых действий с выбранными товарами:
    -   Объединение товаров.
    -   Перенос в группы.
    -   Добавление тегов.
-   Редактирование названия товара "на лету".
-   Изменение флагов "ЖНВЛП" и "Обязательный".

## Элементы Пользовательского Интерфейса (UI Elements)

| Название элемента | Назначение/функция | Возможные состояния | Взаимодействие пользователя |
| --- | --- | --- | --- |
| Компонент "Фильтр" | Фильтрация списка товаров по различным параметрам. | - | Ввод данных, выбор опций. |
| Компонент "Действия" | Выбор группового действия (объединение, группы, теги). | - | Выбор действия из списка. |
| Таблица с товарами | Отображает список найденных товаров. | - Загрузка<br>- Заполнено<br>- Пусто | Прокрутка, двойной клик на строке. |
| Чекбокс в заголовке | Выбрать/снять выбор со всех товаров на странице. | - Выбран<br>- Не выбран | Нажатие. |
| Чекбокс в строке | Выбрать/снять выбор с конкретного товара. | - Выбран<br>- Не выбран | Нажатие. |
| Поле "Название" | Редактируемое поле с названием товара. | - | Клик для редактирования, ввод текста. |
| Чекбоксы "ЖНВЛП" | Изменение флагов "ЖНВЛП" и "Обязательный". | - Выбран<br>- Не выбран | Нажатие. |
| Кнопки действий | В зависимости от выбранного действия, появляются кнопки для его выполнения (например, "Объединить"). | - | Нажатие. |
| Компонент "Пагинация" | Позволяет переключаться между страницами списка. | - | Нажатие на номера страниц. |

## Пользовательские Сценарии (User Flows)

1.  **Поиск и просмотр товаров:**
    -   Пользователь использует фильтр для поиска товаров.
    -   Система отображает список найденных товаров.

2.  **Объединение товаров:**
    -   Пользователь выбирает действие "Объединить".
    -   Пользователь выбирает несколько товаров с помощью чекбоксов.
    -   Пользователь нажимает кнопку "Объединить".
    -   Система выполняет объединение, и список обновляется.

3.  **Редактирование названия:**
    -   Пользователь кликает на название товара в таблице.
    -   Поле становится редактируемым.
    -   Пользователь вводит новое название и сохраняет его.

## Навигация

**Переходы с текущей страницы:**
-   `/items/search/:id`: Переход на страницу детального редактирования товара (по двойному клику).

**Переходы на текущую страницу:**
-   Прямой переход по URL `/items/search`.

## Отображаемые Данные

**Получаемые данные:**
-   Список товаров.
    -   **REST эндпоинт:** `GET /v2/items`
    -   **Сервис:** `SearchService`
    -   **Метод сервиса:** `listItems()`

**Отправляемые данные:**
-   Изменение названия товара:
    -   **REST эндпоинт:** `PUT /items/set-name`
    -   **Сервис:** `SearchService`
    -   **Метод сервиса:** `setName()`
-   Изменение флагов ЖНВЛП:
    -   **REST эндпоинт:** `PUT /items`
    -   **Сервис:** `SearchService`
    -   **Метод сервиса:** `saveItem()`
-   Групповые действия (объединение, перенос в группы, добавление тегов) выполняются через соответствующие компоненты (`app-union`, `app-transfer`, `app-add-tags`).

## Особые Состояния/Логика

-   **Управление состоянием выбора:** Сервис `SearchService` хранит информацию о выбранных товарах и текущем действии.
-   **Динамическое отображение кнопок:** Кнопки для выполнения групповых действий появляются только после выбора соответствующего действия в выпадающем списке.
-   **Контроль доступа:** Возможность объединения товаров (`items_union_component`) доступна только пользователям с соответствующими правами.
-   **Реактивное обновление:** Список товаров и состояние формы обновляются при изменении параметров фильтрации и после выполнения групповых действий.
