# Страница Отзывов о Товарах (ListComponent)

## Обзор Страницы

**Назначение:** Эта страница предназначена для модерации отзывов о товарах, оставленных пользователями.

**Основные функции:**
-   Просмотр списка отзывов.
-   Фильтрация отзывов по статусу (на модерации, опубликованные, снятые с публикации).
-   Просмотр деталей отзыва: текст, автор, оценка, прикрепленные изображения.
-   Публикация или снятие с публикации отзыва.
-   Написание/редактирование официального ответа на отзыв.
-   Переход на страницу детального просмотра отзыва.
-   Переход на страницу массового создания отзывов.

## Элементы Пользовательского Интерфейса (UI Elements)

| Название элемента | Назначение/функция | Возможные состояния | Взаимодействие пользователя |
| --- | --- | --- | --- |
| Таблица с отзывами | Отображает список отзывов. | - Загрузка<br>- Заполнено<br>- Пусто | Прокрутка. |
| Строка таблицы | Отображает информацию о конкретном отзыве. | - | - |
| Превью фото | Уменьшенное изображение, прикрепленное к отзыву. | - | Клик для увеличения. |
| Поле "Ответ" | Редактируемое поле для ввода официального ответа на отзыв. | - | Клик для редактирования, ввод текста. |
| Кнопка "Опубликовать" | Изменяет статус отзыва на "опубликован". | - Видима, если статус не "опубликован". | Нажатие. |
| Кнопка "Снять с публикации" | Изменяет статус отзыва на "снят с публикации". | - Видима, если статус не "снят с публикации". | Нажатие. |
| Кнопка "Открыть детали" | Переход на отдельную страницу с детальной информацией об отзыве. | - | Нажатие. |
| Кнопка "Создать отзывы" | Переход на страницу для массового добавления отзывов. | - | Нажатие. |
| Модальное окно | Отображает увеличенную версию прикрепленной фотографии. | - Открыто<br>- Закрыто | Клик вне изображения для закрытия. |

## Пользовательские Сценарии (User Flows)

1.  **Модерация отзыва:**
    -   Пользователь открывает страницу (по умолчанию отображаются отзывы "на модерации").
    -   Читает текст отзыва, смотрит оценку и фото.
    -   Принимает решение:
        -   Нажимает "Опубликовать", если отзыв корректен.
        -   Нажимает "Снять с публикации" (или "Отклонить"), если отзыв нарушает правила.
    -   Отзыв исчезает из текущего списка.

2.  **Ответ на отзыв:**
    -   Пользователь кликает на поле "Ответ".
    -   Вводит текст официального ответа от имени компании.
    -   Сохраняет ответ. Текст ответа появляется под отзывом.

## Навигация

**Переходы с текущей страницы:**
-   `/content/feedback-items/edit/:id`: Переход на детальную страницу отзыва.
-   `/content/feedback-items/add`: Переход на страницу массового создания отзывов.
-   `/items/search/:id`: Переход на страницу товара, к которому оставлен отзыв.

**Переходы на текущую страницу:**
-   Прямой переход по URL `/content/feedback-items`.

## Отображаемые Данные

**Получаемые данные:**
-   Список отзывов.
    -   **REST эндпоинт:** `GET /v2/items/feedback`
    -   **Сервис:** `ApiItemsFeedbackService`
    -   **Метод сервиса:** `getV2()`
    -   **Параметры:** `status_id` (по умолчанию 1 - на модерации).

**Отправляемые данные:**
-   Изменение статуса отзыва.
    -   **REST эндпоинт:** `POST /items/feedback/update-status`
    -   **Сервис:** `ApiItemsFeedbackService`
    -   **Метод сервиса:** `updateStatus()`
-   Добавление/редактирование ответа.
    -   **REST эндпоинт:** `POST /items/feedback/reply`
    -   **Сервис:** `ApiItemsFeedbackService`
    -   **Метод сервиса:** `reply()`

## Особые Состояния/Логика

-   **Загрузка данных:** Во время загрузки списка с сервера, на странице отображается индикатор загрузки.
-   **Обновление по параметрам:** Список обновляется при изменении `status_id` в URL (через фильтр).
-   **Индикация загрузки:** При нажатии кнопок модерации или сохранения ответа, на них появляется индикатор загрузки.
