# Страница Создания Товара (CreateComponent)

## Обзор Страницы

**Назначение:** Эта страница предназначена для создания нового эталонного товара. Она также помогает предотвратить создание дубликатов, показывая похожие уже существующие товары.

**Основные функции:**
-   Ввод названия и штрих-кодов нового товара.
-   Автоматический поиск и отображение возможных дубликатов по мере ввода названия.
-   Создание нового товара.

## Элементы Пользовательского Интерфейса (UI Elements)

| Название элемента | Назначение/функция | Возможные состояния | Взаимодействие пользователя |
| --- | --- | --- | --- |
| Поле "Название" | Ввод названия нового товара. | - | Ввод текста. |
| Поле "Штрих-коды" | Ввод одного или нескольких штрих-кодов через запятую. | - | Ввод текста. |
| Кнопка "Создать" | Создает новый товар и перенаправляет на страницу его редактирования. | - | Нажатие. |
| Кнопка "Отмена" | Отменяет создание и возвращает на страницу поиска товаров. | - | Нажатие. |
| Таблица "Возможно такой товар уже есть" | Отображает список существующих товаров, похожих на создаваемый. | - Появляется, если найдены похожие товары. | Просмотр. |

## Пользовательские Сценарии (User Flows)

1.  **Создание нового товара:**
    -   Пользователь открывает страницу.
    -   Начинает вводить название товара. Система автоматически ищет и показывает похожие товары, чтобы пользователь мог убедиться, что не создает дубликат.
    -   Пользователь вводит штрих-коды. Система подсвечивает совпадения в списке похожих товаров.
    -   Убедившись, что товара еще нет, пользователь нажимает "Создать".
    -   Система создает товар и перенаправляет на страницу детального редактирования (`/items/search/:id`).

2.  **Отмена создания:**
    -   Пользователь нажимает кнопку "Отмена".
    -   Происходит возврат на страницу поиска товаров.

## Навигация

**Переходы с текущей страницы:**
-   `/items/search/:id`: При успешном создании товара, происходит переход на страницу его редактирования.
-   `/items/search`: При отмене создания.

**Переходы на текущую страницу:**
-   Прямой переход по URL `/items/create`.
-   Могут быть переданы GET-параметры `name` и `barcodes` для предзаполнения формы.

## Отображаемые Данные

**Получаемые данные (для проверки дубликатов):**
-   Список похожих товаров.
    -   **REST эндпоинт:** `GET /items/simple-list`
    -   **Сервис:** `ApiItemsService`
    -   **Метод сервиса:** `simpleList()`
    -   **Параметры:** `query` (первое слово из введенного названия).

**Отправляемые данные:**
-   `name` (string): Название нового товара.
-   `barcodes` (string, опционально): Строка со штрих-кодами через запятую.
-   `is_from_suggestion` (boolean): Флаг, указывающий, был ли товар создан из предложенного (неиспользуемый функционал в данном контексте).

**REST эндпоинт для отправки данных:**
-   **Метод:** `POST`
-   **Эндпоинт:** `/v2/items/create`
-   **Сервис:** `ApiItemsService`
-   **Метод сервиса:** `createv2()`

## Особые Состояния/Логика

-   **Проверка дубликатов:** Ключевая логика страницы. По мере ввода названия в поле "Название", система берет первое слово, и через 500 мс отправляет запрос на поиск похожих товаров. Результаты отображаются в таблице ниже.
-   **Подсветка штрих-кодов:** По мере ввода штрих-кодов в соответствующее поле, система подсвечивает совпадения в списке уже найденных похожих товаров.
-   **Предзаполнение формы:** Компонент может принимать параметры `name` и `barcodes` из URL для автоматического заполнения полей при инициализации.
