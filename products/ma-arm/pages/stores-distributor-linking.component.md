# Страница Связки Аптек Дистрибьюторов (DistributorLinkingComponent)

## Обзор Страницы

**Назначение:** Эта страница предназначена для модерации предложений по связыванию "аптек дистрибьюторов" с обычными аптеками из базы данных Мегаптеки. Система автоматически подбирает похожие аптеки, а оператор должен подтвердить или отклонить предложенную связь.

**Основные функции:**
-   Просмотр списка аптек дистрибьюторов, для которых найдены потенциальные соответствия.
-   Просмотр списка предложенных для связывания обычных аптек.
-   Принятие ("Объединить") или отклонение ("Отклонить") предложенной связки.

## Элементы Пользовательского Интерфейса (UI Elements)

| Название элемента | Назначение/функция | Возможные состояния | Взаимодействие пользователя |
| --- | --- | --- | --- |
| Таблица со связками | Отображает список аптек дистрибьюторов и предложенные для них обычные аптеки. | - Загрузка<br>- Заполнено<br>- Пусто | Прокрутка. |
| Строка таблицы | Отображает одну аптеку дистрибьютора и список ее потенциальных "двойников". | - | - |
| Блок "Предложение" | Отображает информацию о предложенной для связывания обычной аптеке. | - | - |
| Кнопка "Объединить" | Подтверждает, что аптека дистрибьютора и предложенная обычная аптека - это один и тот же объект. | - Активная<br>- Неактивная (во время загрузки) | Нажатие. |
| Кнопка "Отклонить" | Отклоняет предложенную связку. | - Активная<br>- Неактивная (во время загрузки) | Нажатие. |
| Ссылка (ID аптеки) | Переход на страницу списка аптек с фильтром по ID для детального просмотра. | - | Нажатие. |

## Пользовательские Сценарии (User Flows)

1.  **Модерация связок:**
    -   Пользователь открывает страницу.
    -   Система загружает список аптек дистрибьюторов с предложенными для них связками.
    -   Для каждой предложенной пары пользователь сравнивает данные (адрес, бренд).
    -   Принимает решение:
        -   Если аптеки совпадают, нажимает "Объединить".
        -   Если аптеки разные, нажимает "Отклонить".
    -   После принятия решения пара исчезает из списка предложений для данной аптеки дистрибьютора.

## Навигация

**Переходы с текущей страницы:**
-   `/stores/list?id=:id`: Переход на страницу списка аптек для детального просмотра аптеки.

**Переходы на текущую страницу:**
-   Прямой переход по URL `/stores/distributor-linking`.

## Отображаемые Данные

**Получаемые данные:**
-   Список аптек дистрибьюторов с предложениями для связывания.
    -   **REST эндпоинт:** `GET /stores/distributor/linking-list`
    -   **Сервис:** `DistributorLinkingService`
    -   **Метод сервиса:** `linkingList()`

**Отправляемые данные:**
-   Решение по модерации связки.
    -   **REST эндпоинт:** `POST /stores/distributor/linking-moderate`
    -   **Сервис:** `DistributorLinkingService`
    -   **Метод сервиса:** `linkingModerate()`
    -   **Параметры:** `distributor_store_id`, `main_store_id`, `is_rejected` (boolean).

## Особые Состояния/Логика

-   **Загрузка данных:** Во время загрузки списка с сервера, на странице отображается индикатор загрузки.
-   **Обновление по параметрам:** Список обновляется при изменении параметров в URL (пагинация).
-   **Индикация загрузки:** При нажатии кнопок "Объединить" или "Отклонить", на них появляется индикатор загрузки, блокируя повторное нажатие до завершения операции.
