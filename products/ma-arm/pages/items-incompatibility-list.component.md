# Страница Несовместимости Действующих Веществ (ListComponent)

## Обзор Страницы

**Назначение:** Эта страница предназначена для управления правилами несовместимости между двумя действующими веществами (ДВ). Эти правила используются для предупреждения пользователей о возможных негативных взаимодействиях при одновременном заказе определенных лекарственных средств.

**Основные функции:**
-   Просмотр списка существующих правил несовместимости.
-   Фильтрация списка.
-   Создание нового правила.
-   Редактирование существующего правила.
-   Удаление правила.

## Элементы Пользовательского Интерфейса (UI Elements)

| Название элемента | Назначение/функция | Возможные состояния | Взаимодействие пользователя |
| --- | --- | --- | --- |
| Таблица с правилами | Отображает список пар несовместимых ДВ и тип их несовместимости. | - Загрузка<br>- Заполнено<br>- Пусто | Прокрутка, двойной клик на строке. |
| Строка таблицы | Отображает информацию о конкретном правиле. | - | Двойной клик для перехода к редактированию. |
| Кнопка "Создать" | Переход на страницу создания нового правила несовместимости. | - | Нажатие. |
| Кнопка "Удалить" | Удаляет правило несовместимости. | - | Нажатие. |
| Компонент "Фильтр" | Позволяет фильтровать список по действующим веществам. | - | Ввод данных, выбор опций. |
| Компонент "Пагинация" | Позволяет переключаться между страницами списка. | - | Нажатие на номера страниц. |

## Пользовательские Сценарии (User Flows)

1.  **Просмотр и фильтрация:**
    -   Пользователь открывает страницу.
    -   Система загружает и отображает список правил.
    -   Пользователь использует фильтр для поиска нужного правила.

2.  **Создание нового правила:**
    -   Пользователь нажимает кнопку "Создать".
    -   Переходит на страницу создания, где выбирает два ДВ и тип их несовместимости.

3.  **Редактирование правила:**
    -   Пользователь делает двойной клик на строке с правилом.
    -   Переходит на страницу создания/редактирования, где поля уже заполнены данными этого правила.

4.  **Удаление правила:**
    -   Пользователь находит в списке правило, которое нужно удалить.
    -   Нажимает кнопку "Удалить".
    -   После подтверждения, правило удаляется, и список обновляется.

## Навигация

**Переходы с текущей страницы:**
-   `./create`: Переход на страницу создания нового правила.
-   `./create?actmatter_id=:id&incompatible_id=:id`: Переход на страницу редактирования существующего правила.

**Переходы на текущую страницу:**
-   Прямой переход по URL `/items/incompatibility`.

## Отображаемые Данные

**Получаемые данные:**
-   Список правил несовместимости.
    -   **REST эндпоинт:** `GET /items/incompatibility`
    -   **Сервис:** `ListService`
    -   **Метод сервиса:** `getList()`

**Удаляемые данные:**
-   Удаление правила несовместимости.
    -   **REST эндпоинт:** `DELETE /items/incompatibility`
    -   **Сервис:** `ListService`
    -   **Метод сервиса:** `delete()`
    -   **Параметры:** `actmatter_id`, `incompatible_actmatter_id`.

**Отображаемые поля:**
-   `actmatter_name`: Название первого ДВ.
-   `incompatible_actmatter_name`: Название второго ДВ.
-   `incompatibility_type_name`: Тип несовместимости (например, "усиливает эффект", "ослабляет эффект").

## Особые Состояния/Логика

-   **Загрузка данных:** Во время загрузки списка с сервера, на странице отображается индикатор загрузки.
-   **Обновление по параметрам:** Список обновляется при изменении параметров в URL (фильтрация, пагинация).
-   **Подтверждение удаления:** Перед удалением правила, система запрашивает подтверждение у пользователя.
-   **Редактирование через создание:** Для редактирования используется та же страница, что и для создания, но с предзаполненными полями, которые передаются через GET-параметры.
