# Страница Блок-листа (BlocklistComponent)

## Обзор Страницы

**Назначение:** Эта страница предназначена для управления блок-листом контактов (телефонов и email). Контакты, внесенные в этот список, могут быть ограничены в использовании определенных функций системы (например, создание заказов).

**Основные функции:**
-   Просмотр и поиск контактов в блок-листе.
-   Добавление нового контакта в блок-лист.
-   Удаление контакта из блок-листа.

## Элементы Пользовательского Интерфейса (UI Elements)

| Название элемента | Назначение/функция | Возможные состояния | Взаимодействие пользователя |
| --- | --- | --- | --- |
| Поле "Фильтр" | Поиск контакта (телефона или email) в списке. | - | Ввод текста. |
| Таблица с контактами | Отображает список заблокированных контактов. | - Загрузка<br>- Заполнено<br>- Пусто | Прокрутка. |
| Кнопка "Создать" | Открывает форму для добавления нового контакта в блок-лист. | - | Нажатие. |
| Кнопка "Отмена" | Скрывает форму добавления. | - | Нажатие. |
| Кнопка "Удалить" | Удаляет контакт из блок-листа. | - Активная<br>- Неактивная (во время загрузки) | Нажатие. |
| Форма создания | Включает поля для ввода контакта, выбора типа блокировки и комментария. | - Видима<br>- Скрыта | Ввод данных, сохранение. |

## Пользовательские Сценарии (User Flows)

1.  **Просмотр и поиск:**
    -   Пользователь открывает страницу.
    -   Система загружает и отображает список заблокированных контактов.
    -   Пользователь вводит часть телефона или email в поле фильтра, и список автоматически обновляется.

2.  **Добавление в блок-лист:**
    -   Пользователь нажимает кнопку "Создать".
    -   Появляется форма для добавления.
    -   Пользователь вводит контакт, выбирает, на что распространяется блокировка (отчеты, все), и пишет комментарий.
    -   Сохраняет. Контакт добавляется в список, форма скрывается.

3.  **Удаление из блок-листа:**
    -   Пользователь находит в списке контакт, который нужно разблокировать.
    -   Нажимает кнопку "Удалить".
    -   Контакт удаляется из списка.

## Навигация

**Переходы с текущей страницы:**
-   Нет.

**Переходы на текущую страницу:**
-   Прямой переход по URL `/clients/blocklist`.

## Отображаемые Данные

**Получаемые данные:**
-   Список заблокированных контактов.
    -   **REST эндпоинт:** `GET /clients/block-list`
    -   **Сервис:** `BlocklistService`
    -   **Метод сервиса:** `getList()`
    -   **Параметры:** `contact` (из фильтра).

**Отправляемые данные (через компонент `CreateComponent`):**
-   `contact` (string): Телефон или email.
-   `is_excluded_for_all` (boolean): Блокировка на все действия.
-   `is_excluded_for_reports` (boolean): Блокировка только для отчетов.
-   `comment` (string): Комментарий.
    -   **REST эндпоинт:** `POST /clients/block-list`
    -   **Сервис:** `BlocklistService`

**Удаляемые данные:**
-   `contact` (string): Телефон или email для удаления.
    -   **REST эндпоинт:** `DELETE /clients/block-list`
    -   **Сервис:** `BlocklistService`
    -   **Метод сервиса:** `remove()`

## Особые Состояния/Логика

-   **Загрузка данных:** Во время загрузки списка с сервера, на странице отображается индикатор загрузки.
-   **Фильтрация "на лету":** При вводе текста в поле фильтра, URL обновляется, что вызывает автоматическую перезагрузку списка с задержкой в 500 мс.
-   **Встроенная форма создания:** Форма для добавления нового контакта является частью этой же страницы и отображается/скрывается по кнопкам "Создать"/"Отмена".
-   **Индикация загрузки:** При удалении контакта на кнопке появляется индикатор загрузки.
