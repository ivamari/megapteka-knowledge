# Страница "Товары без Эталона" (WithoutEtalonComponent)

## Обзор Страницы

**Назначение:** Эта страница отображает предложения на создание новых эталонных товаров. Эти предложения формируются системой, когда от мерчантов поступают товары (с определенным штрих-кодом), для которых не удалось найти соответствующий эталон в базе Мегаптеки.

**Основные функции:**
-   Просмотр списка предложений на создание товара.
-   Просмотр информации о товарах от мерчантов, сгруппированных по штрих-коду.
-   Принятие предложения (создание нового эталонного товара).
-   Отклонение предложения.

## Элементы Пользовательского Интерфейса (UI Elements)

| Название элемента | Назначение/функция | Возможные состояния | Взаимодействие пользователя |
| --- | --- | --- | --- |
| Таблица с предложениями | Отображает список предложений, сгруппированных по штрих-коду. | - Загрузка<br>- Заполнено<br>- Пусто | Прокрутка. |
| Строка таблицы | Отображает одно предложение: штрих-код и список товаров от мерчантов. | - | - |
| Карточка товара | Отображает детальную информацию о товаре от конкретного мерчанта (название, бренд, штрих-коды). | - | - |
| Кнопка "Создать товар" | Принимает предложение и создает новый эталонный товар на основе данных из предложения. | - Активная<br>- Неактивная (во время загрузки) | Нажатие. |
| Кнопка "Пропустить" | Отклоняет предложение, оно больше не будет показываться. | - Активная<br>- Неактивная (во время загрузки) | Нажатие. |
| Компонент "Пагинация" | Позволяет переключаться между страницами списка. | - | Нажатие на номера страниц. |

## Пользовательские Сценарии (User Flows)

1.  **Обработка предложения:**
    -   Пользователь открывает страницу и видит список предложений.
    -   Изучает информацию о товарах от мерчантов в рамках одного предложения.
    -   Принимает решение:
        -   **Создать товар:** Нажимает "Создать товар". Система создает новый эталон, и пользователь автоматически перенаправляется на страницу редактирования этого нового товара. Предложение исчезает из списка.
        -   **Пропустить:** Нажимает "Пропустить". Предложение отклоняется и исчезает из списка.

## Навигация

**Переходы с текущей страницы:**
-   `/items/search/:id`: При успешном создании товара, происходит переход на страницу его редактирования в новой вкладке.

**Переходы на текущую страницу:**
-   Прямой переход по URL `/items/without-etalon`.

## Отображаемые Данные

**Получаемые данные:**
-   Список предложений на создание товаров.
    -   **REST эндпоинт:** `GET /items/without-etalon/suggestion`
    -   **Сервис:** `WithoutEtalonService`
    -   **Метод сервиса:** `list()`

**Отправляемые данные:**
-   Принятие предложения.
    -   **REST эндпоинт:** `POST /items/without-etalon/suggestion/apply`
    -   **Сервис:** `WithoutEtalonService`
    -   **Метод сервиса:** `apply()`
    -   **Параметры:** `id` (ID предложения).
-   Отклонение предложения.
    -   **REST эндпоинт:** `POST /items/without-etalon/suggestion/reject`
    -   **Сервис:** `WithoutEtalonService`
    -   **Метод сервиса:** `reject()`
    -   **Параметры:** `id` (ID предложения).

## Особые Состояния/Логика

-   **Загрузка данных:** Во время загрузки списка с сервера, на странице отображается индикатор загрузки.
-   **Обновление по параметрам:** Список обновляется при изменении параметров в URL (пагинация).
-   **Подтверждение действий:** Перед созданием или отклонением предложения, система запрашивает подтверждение у пользователя.
-   **Переход в новой вкладке:** После создания товара, переход на страницу его редактирования осуществляется в новой вкладке браузера с помощью скрытой ссылки (`<a>`).
-   **Подсветка штрих-кода:** В списке товаров от мерчантов подсвечивается тот штрих-код, который является основным для данного предложения.
