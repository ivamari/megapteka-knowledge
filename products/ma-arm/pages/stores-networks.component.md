# Страница Аптечных Сетей (StoreNetworksComponent)

## Обзор Страницы

**Назначение:** Эта страница является центром управления аптечными сетями. Она позволяет просматривать, редактировать и управлять различными аспектами каждой сети.

**Основные функции:**
-   Просмотр списка аптечных сетей с детальной информацией.
-   Фильтрация и поиск сетей.
-   Редактирование названия сети "на лету".
-   Управление активностью сети (включение/отключение).
-   Массовое включение/отключение всех аптек в сети.
-   Назначение ответственного сотрудника.
-   Создание учетной записи для ЛК аптеки.
-   Просмотр и привязка чатов Telegram.
-   Редактирование множества технических настроек сети (комиссии, интервалы и т.д.).
-   Управление пробным периодом.
-   Скрытие сети из АРМа.

## Элементы Пользовательского Интерфейса (UI Elements)

| Название элемента | Назначение/функция | Возможные состояния | Взаимодействие пользователя |
| --- | --- | --- | --- |
| Таблица с сетями | Отображает список сетей и их настройки. | - Загрузка<br>- Заполнено<br>- Пусто | Прокрутка. |
| Поле "Название сети" | Редактируемое поле с названием сети. | - | Клик для редактирования, ввод текста. |
| Поле "Ответственный" | Позволяет искать и назначать ответственного сотрудника для сети. | - | Поиск и выбор из списка, сохранение. |
| Кнопки управления активностью | Включение/отключение сети, а также всех аптек в ней. | - | Нажатие. |
| Блок "Настройки" | Набор редактируемых полей и переключателей для различных технических параметров сети. | - | Ввод текста, переключение. |
| Блок "Чаты" | Отображает непривязанные чаты и позволяет привязать их к сети или мерчанту. | - | Поиск и выбор сети/мерчанта, сохранение. |
| Кнопка "Создать учетку в ЛК" | Создает оператора для личного кабинета аптеки. | - | Нажатие. |

## Пользовательские Сценарии (User Flows)

1.  **Поиск и просмотр сети:**
    -   Пользователь открывает страницу.
    -   Использует фильтры для поиска нужной сети.
    -   Просматривает всю информацию и настройки в строке таблицы.

2.  **Отключение сети:**
    -   Пользователь нажимает кнопку "Отключить сеть".
    -   В модальном окне указывает причину.
    -   Сохраняет. Сеть становится неактивной.

3.  **Изменение настройки:**
    -   Пользователь находит нужную настройку в разворачивающемся блоке.
    -   Изменяет ее значение (вводит текст или переключает свитчер).
    -   Изменение автоматически сохраняется.

4.  **Привязка чата:**
    -   Вверху страницы пользователь видит список непривязанных чатов.
    -   Для нужного чата он находит и выбирает соответствующую сеть или мерчанта.
    -   Нажимает кнопку сохранения. Чат привязывается и исчезает из списка.

## Навигация

**Переходы с текущей страницы:**
-   Внешняя ссылка на страницу заказов сети.
-   Внешняя ссылка на Bearpass (для просмотра доступов к ЛК).
-   Внешние ссылки на приглашения в чаты Telegram.

**Переходы на текущую страницу:**
-   Прямой переход по URL `/stores/store-networks`.

## Отображаемые Данные

**Получаемые данные:**
-   Список аптечных сетей со всеми настройками.
    -   **REST эндпоинт:** `GET /stores/networks`
    -   **Сервис:** `ApiStoresNetworksService`
-   Список непривязанных чатов.
    -   **REST эндпоинт:** `GET /stores/networks/chats/empty-list`
    -   **Сервис:** `ApiStoresNetworksChatsService`

**Отправляемые данные:**
-   Обновление настроек сети: `PUT /reports/networks/settings`
-   Изменение активности сети: `PUT /stores/networks`
-   Назначение ответственного: `PUT /stores/networks/staff`
-   Привязка чата: `POST /stores/networks/chats/set-network`
-   Создание оператора ЛК: `POST /stores/networks/create-lk-operator`
-   И другие...

## Особые Состояния/Логика

-   **Комплексный компонент:** Один из самых насыщенных информацией и действиями компонентов в системе.
-   **Автосохранение:** Многие настройки (кроме тех, что требуют подтверждения) сохраняются автоматически при изменении.
-   **Подтверждение действий:** Критичные действия (отключение, скрытие, создание оператора) требуют подтверждения через `swal`.
-   **Управление доступом:** Кнопка "Скрыть сеть" доступна только пользователям с соответствующим правом (`networks_hide`).
