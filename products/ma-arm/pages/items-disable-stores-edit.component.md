# Страница Отключения Товара в Аптеке (EditComponent)

## Обзор Страницы

**Назначение:** Эта страница предназначена для создания и редактирования правил отключения товара в конкретной аптеке.

**Основные функции:**
-   Выбор товара и аптеки.
-   Выбор причины отключения.
-   Добавление комментария.
-   Установка даты "карантина" (до какого числа товар не будет появляться в наличии).
-   Управление активностью правила (включение/отключение).

## Элементы Пользовательского Интерфейса (UI Elements)

| Название элемента | Назначение/функция | Возможные состояния | Взаимодействие пользователя |
| --- | --- | --- | --- |
| Поле "Товар" | Поиск и выбор товара, который нужно отключить. | - Неактивно (при редактировании) | Ввод текста для поиска, выбор из списка. |
| Поле "Идентификатор аптеки" | Ввод ID аптеки, в которой нужно отключить товар. | - Неактивно (при редактировании) | Ввод числа. |
| Поле "Причина отключения" | Выбор предопределенной причины отключения. | - | Выбор из списка. |
| Поле "Комментарий" | Ввод текстового комментария с дополнительной информацией. | - | Ввод текста. |
| Поле "В карантине до" | Выбор даты и времени окончания карантина. | - | Выбор даты. |
| Чекбокс "Активность" | Управляет статусом правила. Если неактивно, товар снова включается. | - Выбран<br>- Не выбран | Нажатие. |
| Кнопки "Сохранить", "Применить", "Отменить" | Управление сохранением изменений. | - | Нажатие. |

## Пользовательские Сценарии (User Flows)

1.  **Создание нового правила отключения:**
    -   Пользователь открывает пустую форму.
    -   Находит и выбирает товар.
    -   Вводит ID аптеки.
    -   Выбирает причину, пишет комментарий, устанавливает дату карантина.
    -   Оставляет чекбокс "Активность" включенным.
    -   Нажимает "Сохранить" или "Применить".

2.  **Редактирование существующего правила:**
    -   Пользователь открывает страницу с `item_id` и `store_id` в URL.
    -   Форма заполняется данными.
    -   Пользователь может изменить причину, комментарий или дату карантина.
    -   Нажимает "Сохранить" или "Применить".

3.  **Повторное включение товара (деактивация правила):**
    -   Пользователь открывает страницу редактирования существующего правила.
    -   Снимает флажок "Активность".
    -   Нажимает "Сохранить" или "Применить". Правило становится неактивным (удаляется).

## Навигация

**Переходы с текущей страницы:**
-   Возврат на страницу списка отключений (`/items/disable-stores/list`).
-   При создании нового правила и сохранении, происходит переход на страницу редактирования этого же правила (`/items/disable-stores/edit/:item_id/:store_id`).

## Отображаемые Данные

**Получаемые данные:**
-   Детальная информация о правиле отключения (при редактировании).
    -   **REST эндпоинт:** `GET /items/store-disabled/detail`
    -   **Сервис:** `ApiItemsStoreDisabledService`
    -   **Метод сервиса:** `getDetail()`
-   Список причин отключения.
    -   **REST эндпоинт:** `GET /items/disabled/reasons`
    -   **Сервис:** `ApiItemsDisabledService`
    -   **Метод сервиса:** `getReasons()`

**Отправляемые данные:**
-   Создание правила: `POST /items/store-disabled`
-   Обновление правила: `PUT /items/store-disabled`
-   Удаление правила (при снятии флага "Активность"): `DELETE /items/store-disabled`
-   **Сервис:** `ApiItemsStoreDisabledService`

## Особые Состояния/Логика

-   **Загрузка данных:** При редактировании, во время загрузки информации, на странице отображается индикатор загрузки.
-   **Динамическая валидация:** Поле "Причина отключения" становится обязательным, только если установлен флаг "Активность".
-   **Логика сохранения:** Компонент определяет, какой метод API вызывать (`POST`, `PUT` или `DELETE`), основываясь на наличии `item_id` и `store_id` в URL и состоянии флага "Активность".
-   **Блокировка полей:** При редактировании поля "Товар" и "Идентификатор аптеки" становятся неактивными.
