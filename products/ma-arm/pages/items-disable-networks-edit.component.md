# Страница Отключения Товара в Сети (EditComponent)

## Обзор Страницы

**Назначение:** Эта страница предназначена для создания и редактирования правил отключения товара в конкретной аптечной сети.

**Основные функции:**
-   Выбор товара и аптечной сети.
-   Выбор причины отключения.
-   Добавление комментария.
-   Управление активностью правила (включение/отключение).

## Элементы Пользовательского Интерфейса (UI Elements)

| Название элемента | Назначение/функция | Возможные состояния | Взаимодействие пользователя |
| --- | --- | --- | --- |
| Поле "Товар" | Поиск и выбор товара, который нужно отключить. | - Неактивно (при редактировании) | Ввод текста для поиска, выбор из списка. |
| Поле "Идентификатор сети" | Ввод ID аптечной сети, в которой нужно отключить товар. | - | Ввод числа. |
| Поле "Причина отключения" | Выбор предопределенной причины отключения. | - | Выбор из списка. |
| Поле "Комментарий" | Ввод текстового комментария с дополнительной информацией. | - | Ввод текста. |
| Чекбокс "Активность" | Управляет статусом правила. Если неактивно, товар снова включается. | - Выбран<br>- Не выбран | Нажатие. |
| Кнопки "Сохранить", "Применить", "Отменить" | Управление сохранением изменений. | - | Нажатие. |

## Пользовательские Сценарии (User Flows)

1.  **Создание нового правила отключения:**
    -   Пользователь открывает пустую форму.
    -   Находит и выбирает товар.
    -   Вводит ID аптечной сети.
    -   Выбирает причину и, при необходимости, пишет комментарий.
    -   Оставляет чекбокс "Активность" включенным.
    -   Нажимает "Сохранить" или "Применить".

2.  **Редактирование существующего правила:**
    -   Пользователь открывает страницу с `item_id` и `network_id` в URL.
    -   Форма заполняется данными.
    -   Пользователь может изменить причину или комментарий.
    -   Нажимает "Сохранить" или "Применить".

3.  **Повторное включение товара (деактивация правила):**
    -   Пользователь открывает страницу редактирования существующего правила.
    -   Снимает флажок "Активность".
    -   Нажимает "Сохранить" или "Применить". Правило становится неактивным (удаляется).

## Навигация

**Переходы с текущей страницы:**
-   Возврат на страницу списка отключений (`/items/disable-networks/list`).
-   При создании нового правила и сохранении, происходит переход на страницу редактирования этого же правила (`/items/disable-networks/edit/:item_id/:network_id`).

**Переходы на текущую страницу:**
-   Со страницы списка для редактирования: `/items/disable-networks/edit/:item_id/:network_id`.
-   Со страницы списка для создания: `/items/disable-networks/edit`.

## Отображаемые Данные

**Получаемые данные:**
-   Детальная информация о правиле отключения (при редактировании).
    -   **REST эндпоинт:** `GET /items/network-disabled`
    -   **Сервис:** `ApiItemsNetworkDisabledService`
    -   **Метод сервиса:** `get()`
-   Список причин отключения.
    -   **REST эндпоинт:** `GET /items/disabled/reasons`
    -   **Сервис:** `ApiItemsDisabledService`
    -   **Метод сервиса:** `getReasons()`

**Отправляемые данные:**
-   Создание/обновление правила.
    -   **REST эндпоинт:** `POST /items/network-disabled`
    -   **Сервис:** `ApiItemsNetworkDisabledService`
    -   **Метод сервиса:** `post()`
-   Удаление правила (при снятии флага "Активность").
    -   **REST эндпоинт:** `DELETE /items/network-disabled`
    -   **Сервис:** `ApiItemsNetworkDisabledService`
    -   **Метод сервиса:** `delete()`

## Особые Состояния/Логика

-   **Загрузка данных:** При редактировании, во время загрузки информации, на странице отображается индикатор загрузки.
-   **Динамическая валидация:** Поле "Причина отключения" становится обязательным, только если установлен флаг "Активность".
-   **Логика сохранения:** В зависимости от наличия `item_id` и `network_id` в URL и состояния флага "Активность", компонент решает, какой метод API вызывать: `POST` (создать/обновить) или `DELETE` (удалить/деактивировать).
