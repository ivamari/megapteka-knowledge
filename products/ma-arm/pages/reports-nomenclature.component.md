# Страница Отчета "Номенклатура" (NomenclatureComponent)

## Обзор Страницы

**Назначение:** Эта страница предназначена для формирования и скачивания отчета "Номенклатура мерчанта". Отчет содержит полный список товаров (номенклатуру), который данный мерчант выгружает в систему Мегаптеки.

**Основные функции:**
-   Выбор мерчанта.
-   Формирование и скачивание отчета в формате Excel.

## Элементы Пользовательского Интерфейса (UI Elements)

| Название элемента | Назначение/функция | Возможные состояния | Взаимодействие пользователя |
| --- | --- | --- | --- |
| Поле "Мерчант" | Выбор мерчанта, для которого будет сформирован отчет. | - | Выбор из выпадающего списка. |
| Кнопка "Сформировать" | Запускает процесс формирования и скачивания отчета. | - Активная<br>- Неактивная (во время загрузки) | Нажатие. |

## Пользовательские Сценарии (User Flows)

1.  **Формирование отчета:**
    -   Пользователь открывает страницу.
    -   Выбирает мерчанта из списка.
    -   Нажимает кнопку "Сформировать".
    -   Система генерирует отчет на сервере, и браузер предлагает пользователю скачать Excel-файл.

## Навигация

**Переходы с текущей страницы:**
-   Нет (происходит скачивание файла).

**Переходы на текущую страницу:**
-   Прямой переход по URL `/reports/nomenclature`.

## Отображаемые Данные

**Получаемые данные:**
-   Список мерчантов для выбора в фильтре.
    -   **REST эндпоинт:** `GET /merchants`
    -   **Сервис:** `ApiMerchantsService`
    -   **Метод сервиса:** `get()`

**Отправляемые данные (для формирования отчета):**
-   `merchant_id` (number): ID выбранного мерчанта.

**REST эндпоинт для получения отчета:**
-   **Метод:** `GET`
-   **Эндпоинт:** `/reports/nomenclature`
-   **Сервис:** `ApiReportsService`
-   **Метод сервиса:** `getNomenclature()`

## Особые Состояния/Логика

-   **Загрузка данных:** Во время формирования отчета на странице отображается индикатор загрузки.
-   **Валидация формы:** Поле "Мерчант" является обязательным.
-   **Скачивание файла:** Сервис `ApiReportsService` обрабатывает ответ от API как `blob` и инициирует скачивание файла браузером.
-   **Работа с URL:** Компонент может принимать `id` мерчанта из параметров URL для предзаполнения поля.
