# Страница Проверки Автоматической Разметки (MarkupCheckComponent)

## Обзор Страницы

**Назначение:** Эта страница предназначена для ручной проверки и модерации результатов автоматической разметки атрибутов лекарственных средств. Система автоматически извлекает из названия товара такие атрибуты, как "Торговое наименование", "Форма выпуска", "Дозировка" и т.д., а оператор должен подтвердить или отклонить эти предположения.

**Основные функции:**
-   Просмотр списка товаров с автоматически распознанными атрибутами.
-   Подтверждение ("Принять") или отклонение ("Отклонить") каждого распознанного атрибута по отдельности.

## Элементы Пользовательского Интерфейса (UI Elements)

| Название элемента | Назначение/функция | Возможные состояния | Взаимодействие пользователя |
| --- | --- | --- | --- |
| Таблица с товарами | Отображает список товаров, для которых была произведена автоматическая разметка. | - Загрузка<br>- Заполнено<br>- Пусто | Прокрутка. |
| Строка товара | Отображает ID и название товара. | - | - |
| Строка атрибута | Отображает название и распознанное значение атрибута (например, "Дозировка: 500 мг"). | - | - |
| Кнопка "Принять" | Подтверждает, что система правильно распознала данный атрибут. | - Активная<br>- Неактивная (во время загрузки) | Нажатие. |
| Кнопка "Отклонить" | Отклоняет результат распознавания для данного атрибута. | - Активная<br>- Неактивная (во время загрузки) | Нажатие. |
| Ссылка (ID товара) | Переход на страницу детального редактирования товара. | - | Нажатие. |
| Компонент "Пагинация" | Позволяет переключаться между страницами списка. | - | Нажатие на номера страниц. |

## Пользовательские Сценарии (User Flows)

1.  **Модерация разметки:**
    -   Пользователь открывает страницу и видит список товаров с предложенными атрибутами.
    -   Для каждого атрибута каждого товара он принимает решение:
        -   Если атрибут распознан верно, нажимает "Принять". Атрибут сохраняется, и строка с ним исчезает.
        -   Если атрибут распознан неверно, нажимает "Отклонить". Предположение системы удаляется, и строка с ним исчезает.
    -   Когда все атрибуты для товара проверены, товар полностью исчезает из списка на этой странице.

## Навигация

**Переходы с текущей страницы:**
-   `/items/search/:id`: Переход на страницу редактирования товара.

**Переходы на текущую страницу:**
-   Прямой переход по URL `/items/markup-check`.

## Отображаемые Данные

**Получаемые данные:**
-   Список товаров с результатами автоматической разметки.
    -   **REST эндпоинт:** `GET /items/markup/check`
    -   **Сервис:** `MarkupCheckService`
    -   **Метод сервиса:** `getList()`

**Отправляемые данные:**
-   Решение по конкретному атрибуту.
    -   **REST эндпоинт:** `POST /items/markup/check`
    -   **Сервис:** `MarkupCheckService`
    -   **Метод сервиса:** `updateMarkup()`
    -   **Параметры:** `item_id`, `is_approve` (boolean), `attribute` (название атрибута).

## Особые Состояния/Логика

-   **Загрузка данных:** Во время загрузки списка с сервера, на странице отображается индикатор загрузки.
-   **Обновление по параметрам:** Список обновляется при изменении параметров в URL (пагинация).
-   **Динамическое обновление:** После принятия или отклонения атрибута, данные для товара могут обновиться на лету (если остались другие атрибуты для проверки) или товар может быть удален из списка (если это был последний атрибут).
-   **Объединение ячеек:** Таблица использует `rowSpan` для визуального объединения всех атрибутов, относящихся к одному товару.
-   **Индикация загрузки:** При нажатии кнопок "Принять" или "Отклонить", на них появляется индикатор загрузки, блокируя повторное нажатие до завершения операции.
