# Страница Создания/Редактирования Несовместимости (CreateComponent)

## Обзор Страницы

**Назначение:** Эта страница предназначена для создания и редактирования правил несовместимости между двумя действующими веществами (ДВ).

**Основные функции:**
-   Выбор двух действующих веществ.
-   Выбор типа несовместимости между ними.
-   Сохранение нового или измененного правила.

## Элементы Пользовательского Интерфейса (UI Elements)

| Название элемента | Назначение/функция | Возможные состояния | Взаимодействие пользователя |
| --- | --- | --- | --- |
| Поле "Действующее вещество 1" | Поиск и выбор первого ДВ. | - | Ввод текста для поиска, выбор из списка. |
| Поле "Действующее вещество 2" | Поиск и выбор второго ДВ. | - | Ввод текста для поиска, выбор из списка. |
| Поле "Тип несовместимости" | Выбор типа взаимодействия между двумя ДВ. | - | Выбор из выпадающего списка. |
| Кнопка "Создать" | Сохраняет новое (или измененное) правило. | - Активная<br>- Неактивная (во время загрузки) | Нажатие. |
| Кнопка "Отмена" | Отменяет создание/редактирование и возвращает на предыдущую страницу. | - | Нажатие. |

## Пользовательские Сценарии (User Flows)

1.  **Создание нового правила:**
    -   Пользователь открывает страницу.
    -   Выбирает первое действующее вещество.
    -   Выбирает второе действующее вещество.
    -   Выбирает тип несовместимости.
    -   Нажимает "Создать".
    -   Система сохраняет правило, и пользователь возвращается к списку.

2.  **Редактирование правила:**
    -   Пользователь переходит на страницу со страницы списка (по двойному клику).
    -   Параметры `actmatter_id` и `incompatible_id` передаются в URL.
    -   *Примечание: Текущая реализация компонента не считывает эти параметры и не предзаполняет форму, поэтому редактирование фактически не работает, только создание.*

## Навигация

**Переходы с текущей страницы:**
-   Возврат на страницу списка несовместимостей (`/items/incompatibility`) при успешном сохранении или отмене.

**Переходы на текущую страницу:**
-   Со страницы списка: `/items/incompatibility/create`.
-   Со страницы списка для редактирования (функционал не реализован): `/items/incompatibility/create?actmatter_id=:id&incompatible_id=:id`.

## Отображаемые Данные

**Получаемые данные:**
-   Список типов несовместимости.
    -   **REST эндпоинт:** `GET /items/incompatibility/types`
    -   **Сервис:** `CreateService`
    -   **Метод сервиса:** `getTypes()`

**Отправляемые данные:**
-   `actmatter_id` (number): ID первого ДВ.
-   `incompatible_actmatter_id` (number): ID второго ДВ.
-   `incompatibility_type_id` (number): ID типа несовместимости.

**REST эндпоинт для отправки данных:**
-   **Метод:** `POST`
-   **Эндпоинт:** `/items/incompatibility`
-   **Сервис:** `CreateService`
-   **Метод сервиса:** `create()`

## Особые Состояния/Логика

-   **Валидация формы:** Все три поля являются обязательными. Также есть проверка, что выбраны два *разных* действующих вещества.
-   **Состояние загрузки:** Во время сохранения нового правила, кнопки "Создать" и "Отмена" блокируются, и на кнопке "Создать" отображается индикатор загрузки.
-   **Недореализованное редактирование:** Компонент не обрабатывает GET-параметры для предзаполнения формы, поэтому в текущем виде он может только создавать новые правила, но не редактировать существующие.
