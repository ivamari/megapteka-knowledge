# Страница Проверки Двойных Связок по Штрих-коду (MergeItemsCheckBarcodeComponent)

## Обзор Страницы

**Назначение:** Эта страница отображает случаи, когда один и тот же товар от мерчанта (с одним набором штрих-кодов) оказывается связанным сразу с двумя разными эталонными товарами в базе Мегаптеки. Это указывает на то, что два эталонных товара, вероятно, являются дублями и их нужно объединить.

**Основные функции:**
-   Просмотр списка "тройных" связок: "Товар мерчанта" -> "Основной эталон" + "Эталон-дубль".
-   Детальный просмотр информации по всем трем товарам, включая совпадающие штрих-коды.
-   Принятие решения по каждой связке:
    -   **Объединить:** Подтвердить, что эталоны являются дублями.
    -   **Отклонить:** Указать, что эталоны не являются дублями (ошибка в данных мерчанта).
    -   **Отклонить и сообщить сети:** Отклонить связку и отправить уведомление в аптечную сеть об ошибке в их данных.

## Элементы Пользовательского Интерфейса (UI Elements)

| Название элемента | Назначение/функция | Возможные состояния | Взаимодействие пользователя |
| --- | --- | --- | --- |
| Таблица со связками | Отображает список проблемных "тройных" связок. | - Загрузка<br>- Заполнено<br>- Пусто | Прокрутка. |
| Строка таблицы | Отображает информацию о товаре мерчанта и двух эталонных товарах. | - | - |
| Ссылка (ID товара) | Переход на страницу "Связки от мерчантов" для детального анализа эталонного товара. | - | Нажатие. |
| Кнопка "Объединить" | Подтверждает, что эталоны являются дублями, и запускает процесс их объединения. | - Активная<br>- Неактивная (во время загрузки) | Нажатие. |
| Кнопка "Отклонить" | Отклоняет предположение о дублировании эталонов. | - Активная<br>- Неактивная (во время загрузки) | Нажатие. |
| Кнопка "Отклонить и сообщить сети" | Отклоняет предположение и отправляет уведомление в сеть. | - Активная<br>- Неактивная (во время загрузки) | Нажатие. |
| Компонент "Пагинация" | Позволяет переключаться между страницами списка. | - | Нажатие на номера страниц. |

## Пользовательские Сценарии (User Flows)

1.  **Модерация двойных связок:**
    -   Пользователь открывает страницу и видит список проблемных связок.
    -   Для каждой строки он анализирует информацию, сравнивая данные трех товаров.
    -   Принимает решение:
        -   Если эталоны - дубли, нажимает "Объединить".
        -   Если эталоны - не дубли, а ошибка в данных сети, нажимает "Отклонить" или "Отклонить и сообщить сети".
    -   После принятия решения проблемная связка исчезает из списка.

## Навигация

**Переходы с текущей страницы:**
-   `/items/prices-connections?item_id=:id`: Переход на страницу связок для одного из эталонных товаров.

**Переходы на текущую страницу:**
-   Прямой переход по URL `/items/merge-items-check-barcode`.

## Отображаемые Данные

**Получаемые данные:**
-   Список проблемных "тройных" связок.
    -   **REST эндпоинт:** `GET /items/merge/check-barcode`
    -   **Сервис:** `MergeItemsCheckBarcodeService`
    -   **Метод сервиса:** `getList()`

**Отправляемые данные:**
-   Решение по связке.
    -   **REST эндпоинт:** `POST /items/merge/check-barcode`
    -   **Сервис:** `MergeItemsCheckBarcodeService`
    -   **Метод сервиса:** `checkMerge()`
    -   **Параметры:** `id` (ID записи о связке), `is_approve` (boolean), `is_notif` (boolean, опционально).

## Особые Состояния/Логика

-   **Загрузка данных:** Во время загрузки списка с сервера, на странице отображается индикатор загрузки.
-   **Обновление по параметрам:** Список обновляется при изменении параметров в URL (пагинация).
-   **Подтверждение действий:** Перед выполнением любого действия, система запрашивает подтверждение у пользователя.
-   **Подсветка штрих-кодов:** Штрих-коды, которые являются общими для товара мерчанта и одного из эталонов, подсвечиваются для наглядности.
-   **Индикация загрузки:** При нажатии кнопок действий, на них появляется индикатор загрузки, блокируя повторное нажатие до завершения операции.
