# Страница "Наличие Рядом" (AvailabilityNearComponent)

## Обзор Страницы

**Назначение:** Эта страница предназначена для поиска ближайших городов, в которых есть в наличии определенный товар. Поиск осуществляется по ID товара и ID "опорного" города (от которого ведется поиск) через параметры в URL.

**Основные функции:**
-   Отображение списка ближайших городов с наличием товара.
-   Фильтрация (поиск) по ID товара и ID города.
-   Переход на страницу "Наличие в городе" для просмотра конкретных аптек.

## Элементы Пользовательского Интерфейса (UI Elements)

| Название элемента | Назначение/функция | Возможные состояния | Взаимодействие пользователя |
| --- | --- | --- | --- |
| Компонент "Фильтр" | Позволяет задать ID товара и ID "опорного" города для поиска. | - | Ввод данных, запуск поиска. |
| Таблица с результатами | Отображает список ближайших городов, где товар есть в наличии. | - Загрузка<br>- Заполнено<br>- Пусто | Прокрутка. |
| Строка таблицы | Отображает информацию о найденном городе (регион, название, дистанция, цена, кол-во аптек). | - | - |
| Ссылка (Название города) | Переход на страницу "Наличие в городе" для просмотра аптек в этом городе. | - | Нажатие. |

## Пользовательские Сценарии (User Flows)

1.  **Поиск ближайших городов с наличием товара:**
    -   Пользователь открывает страницу.
    -   В компоненте "Фильтр" вводит ID товара и ID "опорного" города.
    -   Нажимает кнопку поиска в фильтре.
    -   URL обновляется, и система загружает и отображает список ближайших городов.

2.  **Просмотр аптек в найденном городе:**
    -   Пользователь нажимает на название города в таблице результатов.
    -   Происходит переход на страницу "Наличие в городе" с уже подставленными ID товара и ID выбранного города.

## Навигация

**Переходы с текущей страницы:**
-   `/items/availability-city?item_id=:item_id&city_id=:city_id`: Переход на страницу наличия в конкретном городе.

**Переходы на текущую страницу:**
-   Прямой переход по URL `/items/availability-near`.
-   Для выполнения поиска необходимо добавить GET-параметры, например: `/items/availability-near?item_id=123&city_id=456`.

## Отображаемые Данные

**Получаемые данные:**
-   Список ближайших городов с наличием товара.
    -   **REST эндпоинт:** `GET /items/availability/near`
    -   **Сервис:** `ApiItemsAvailabilityService`
    -   **Метод сервиса:** `getNear()`
    -   **Параметры:** `item_id`, `city_id` (и другие возможные параметры из фильтра).

**Отображаемые поля:**
-   `region_name` (string): Название региона.
-   `city_name` (string): Название города.
-   `city_distance` (number): Примерное расстояние до города (в км).
-   `min_price` (number): Минимальная цена на товар в этом городе.
-   `stores_quantity` (number): Количество аптек с наличием товара в этом городе.

## Особые Состояния/Логика

-   **Загрузка данных:** Во время загрузки списка с сервера, на странице отображается индикатор загрузки.
-   **Работа с URL:** Компонент полностью зависит от GET-параметров в URL. При изменении параметров, он автоматически выполняет новый запрос на сервер. Если параметры отсутствуют, список остается пустым.
-   **Пустой результат:** Если товар не найден ни в одном городе, выводится специальное сообщение.
