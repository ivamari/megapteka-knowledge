# Страница Настроек Уведомлений Бренда (BrandWarningsComponent)

## Обзор Страницы

**Назначение:** Эта страница предназначена для управления уведомлениями (предупреждениями), которые отображаются на страницах аптек, принадлежащих к определенному бренду.

**Основные функции:**
-   Просмотр и редактирование существующих уведомлений.
-   Создание нового уведомления.
-   Удаление уведомлений.
-   Выбор цвета для каждого уведомления.

## Элементы Пользовательского Интерфейса (UI Elements)

| Название элемента | Назначение/функция | Возможные состояния | Взаимодействие пользователя |
| --- | --- | --- | --- |
| Блок "Уведомление" | Группа полей для одного уведомления, включающая выбор цвета и текстовое поле. | - | - |
| Поле "Цвет" | Выбор цвета фона для плашки уведомления (желтый или красный). | - | Выбор из выпадающего списка. |
| Поле "HTML-текст" | Ввод и редактирование текста уведомления. Поддерживается HTML-разметка. | - | Ввод текста. |
| Кнопка "Удалить" | Удаляет существующее уведомление. | - | Нажатие. |
| Блок "Новое уведомление" | Пустая группа полей для создания нового уведомления. | - | Заполнение полей. |
| Кнопки "Сохранить", "Применить" | Управление сохранением всех изменений на странице. | - | Нажатие. |
| Кнопка "Назад" | Возврат на предыдущую страницу. | - | Нажатие. |

## Пользовательские Сценарии (User Flows)

1.  **Управление уведомлениями:**
    -   Пользователь открывает страницу.
    -   Система загружает все уведомления для данного бренда.
    -   Пользователь может:
        -   Изменить текст или цвет существующих уведомлений.
        -   Удалить ненужные уведомления, нажав "Удалить".
        -   Создать новое уведомление, заполнив пустые поля внизу страницы.
    -   Нажимает "Сохранить" или "Применить", чтобы сохранить все изменения (создание, редактирование и удаление).

## Навигация

**Переходы с текущей страницы:**
-   Возврат на страницу списка брендов (`/stores/brands`).

**Переходы на текущую страницу:**
-   Со страницы списка брендов: `/stores/brands/warnings/:id`.

## Отображаемые Данные

**Получаемые данные:**
-   Название бренда и список его уведомлений.
    -   **REST эндпоинт:** `GET /stores/brands/warnings`
    -   **Сервис:** `BrandWarningsService`
    -   **Метод сервиса:** `getBrandWarnings()`
    -   **Параметры:** `brand_id`.

**Отправляемые данные:**
-   Структура данных, отражающая все изменения в форме (обновленные, удаленные и новые уведомления).
    -   **REST эндпоинт:** `POST /stores/brands/warnings`
    -   **Сервис:** `BrandWarningsService`
    -   **Метод сервиса:** `upsertBrandWarnings()`
    -   **Параметры:** `brand_id`, `form_data`.

## Особые Состояния/Логика

-   **Загрузка данных:** При открытии страницы, во время загрузки информации, отображается индикатор загрузки.
-   **Единое сохранение:** Все действия (редактирование, удаление, добавление) накапливаются в `FormGroup` и отправляются на сервер одной командой при нажатии "Сохранить" или "Применить".
-   **Удаление на фронтенде:** При нажатии "Удалить", контрол для данного уведомления удаляется из `FormGroup`, а само уведомление - из локального массива `detail.warnings`. Фактическое удаление на бэкенде происходит только при сохранении.
-   **Создание:** Для создания нового уведомления используется предопределенная группа контролов с ключом `new` в основной `FormGroup`.
